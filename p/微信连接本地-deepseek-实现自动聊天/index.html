<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="å‚è€ƒå†…å®¹ ã€AIå®¢æœdeepseekã€‘deepseekæ¥å…¥å¾®ä¿¡ï¼ˆæœ¬åœ°éƒ¨ç½²deepseeké›†æˆå¾®ä¿¡è‡ªåŠ¨æ”¶å‘æ¶ˆæ¯ï¼‰\né»‘é©¬ç¨‹åºå‘˜AIå¤§æ¨¡å‹å¼€å‘é›¶åŸºç¡€åˆ°é¡¹ç›®å®æˆ˜å…¨å¥—è§†é¢‘æ•™ç¨‹ï¼ŒåŸºäºDeepSeekå’ŒQwenå¤§æ¨¡å‹ï¼Œä»å¤§æ¨¡å‹ç§æœ‰åŒ–éƒ¨ç½²ã€è¿è¡Œæœºåˆ¶åˆ°ç‹¬ç«‹æ­å»ºèŠå¤©æœºå™¨äººä¸€å¥—é€šå…³_å“”å“©å“”å“©_bilibili\n">
<title>å¾®ä¿¡è¿æ¥æœ¬åœ° deepseek å®ç°è‡ªåŠ¨èŠå¤©</title>

<link rel='canonical' href='https://YeYingQingYu.github.io/p/%E5%BE%AE%E4%BF%A1%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0-deepseek-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E8%81%8A%E5%A4%A9/'>

<link rel="stylesheet" href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="å¾®ä¿¡è¿æ¥æœ¬åœ° deepseek å®ç°è‡ªåŠ¨èŠå¤©">
<meta property='og:description' content="å‚è€ƒå†…å®¹ ã€AIå®¢æœdeepseekã€‘deepseekæ¥å…¥å¾®ä¿¡ï¼ˆæœ¬åœ°éƒ¨ç½²deepseeké›†æˆå¾®ä¿¡è‡ªåŠ¨æ”¶å‘æ¶ˆæ¯ï¼‰\né»‘é©¬ç¨‹åºå‘˜AIå¤§æ¨¡å‹å¼€å‘é›¶åŸºç¡€åˆ°é¡¹ç›®å®æˆ˜å…¨å¥—è§†é¢‘æ•™ç¨‹ï¼ŒåŸºäºDeepSeekå’ŒQwenå¤§æ¨¡å‹ï¼Œä»å¤§æ¨¡å‹ç§æœ‰åŒ–éƒ¨ç½²ã€è¿è¡Œæœºåˆ¶åˆ°ç‹¬ç«‹æ­å»ºèŠå¤©æœºå™¨äººä¸€å¥—é€šå…³_å“”å“©å“”å“©_bilibili\n">
<meta property='og:url' content='https://YeYingQingYu.github.io/p/%E5%BE%AE%E4%BF%A1%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0-deepseek-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E8%81%8A%E5%A4%A9/'>
<meta property='og:site_name' content='Sandy Memoriesä¸¨æ²™ç³»'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-06-07T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2025-06-07T00:00:00&#43;00:00'/><meta property='og:image' content='https://YeYingQingYu.github.io/p/%E5%BE%AE%E4%BF%A1%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0-deepseek-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E8%81%8A%E5%A4%A9/img.png' />
<meta name="twitter:title" content="å¾®ä¿¡è¿æ¥æœ¬åœ° deepseek å®ç°è‡ªåŠ¨èŠå¤©">
<meta name="twitter:description" content="å‚è€ƒå†…å®¹ ã€AIå®¢æœdeepseekã€‘deepseekæ¥å…¥å¾®ä¿¡ï¼ˆæœ¬åœ°éƒ¨ç½²deepseeké›†æˆå¾®ä¿¡è‡ªåŠ¨æ”¶å‘æ¶ˆæ¯ï¼‰\né»‘é©¬ç¨‹åºå‘˜AIå¤§æ¨¡å‹å¼€å‘é›¶åŸºç¡€åˆ°é¡¹ç›®å®æˆ˜å…¨å¥—è§†é¢‘æ•™ç¨‹ï¼ŒåŸºäºDeepSeekå’ŒQwenå¤§æ¨¡å‹ï¼Œä»å¤§æ¨¡å‹ç§æœ‰åŒ–éƒ¨ç½²ã€è¿è¡Œæœºåˆ¶åˆ°ç‹¬ç«‹æ­å»ºèŠå¤©æœºå™¨äººä¸€å¥—é€šå…³_å“”å“©å“”å“©_bilibili\n"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://YeYingQingYu.github.io/p/%E5%BE%AE%E4%BF%A1%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0-deepseek-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E8%81%8A%E5%A4%A9/img.png' />
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_bfea9a570b4a88e6.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ¥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Sandy Memoriesä¸¨æ²™ç³»</a></h1>
            <h2 class="site-description">Fall in the dark</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/1865091'
                        target="_blank"
                        title="bilibili"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1747070557794" class="icon" viewBox="0 0 1129 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2634" width="26.4609375" height="24" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M234.908525 9.656195a80.468288 80.468288 0 0 1 68.398044 0 167.374038 167.374038 0 0 1 41.84351 30.577949l160.936576 140.819503H621.156306L782.092881 40.234144a168.983404 168.983404 0 0 1 41.84351-30.577949 80.468288 80.468288 0 0 1 107.022823 66.788678 80.468288 80.468288 0 0 1-17.703024 53.913753 449.817728 449.817728 0 0 1-35.406046 32.187315 232.553351 232.553351 0 0 1-22.531121 18.507706h100.58536a170.59277 170.59277 0 0 1 118.288383 53.10907A171.397453 171.397453 0 0 1 1128.106519 352.4511v462.692655a325.896565 325.896565 0 0 1-4.023415 70.00741 178.639599 178.639599 0 0 1-80.468288 112.655603 173.006819 173.006819 0 0 1-92.53853 25.749852H212.377404a341.18554 341.18554 0 0 1-72.421459-4.023415 177.834916 177.834916 0 0 1-111.046237-80.468287A172.202136 172.202136 0 0 1 1.550491 846.526387V388.66183A360.497929 360.497929 0 0 1 1.550491 321.873151a177.030233 177.030233 0 0 1 160.936575-143.233552h105.413457c-16.89834-12.070243-31.382632-26.554535-46.671607-39.429461a80.468288 80.468288 0 0 1-25.749852-65.983996A80.468288 80.468288 0 0 1 234.908525 9.656195M216.400819 321.873151a80.468288 80.468288 0 0 0-63.569948 57.937167 108.632188 108.632188 0 0 0 0 30.577949v380.615001a80.468288 80.468288 0 0 0 55.523119 80.468288 106.21814 106.21814 0 0 0 34.601364 5.63278h654.207179a80.468288 80.468288 0 0 0 76.444873-47.47629 112.655603 112.655603 0 0 0 8.046829-53.10907v-354.060465a135.186723 135.186723 0 0 0 0-38.624779 80.468288 80.468288 0 0 0-52.304387-54.718435 129.553943 129.553943 0 0 0-49.890338-7.242146H254.220914a268.764081 268.764081 0 0 0-37.820095 0z m0 0" fill="#20B0E3" p-id="2635"></path><path d="M348.368811 447.40368a80.468288 80.468288 0 0 1 55.523118 18.507706 80.468288 80.468288 0 0 1 28.163901 59.546533v80.468287a80.468288 80.468288 0 0 1-16.093658 51.499705 80.468288 80.468288 0 0 1-131.967992-9.656195 104.608774 104.608774 0 0 1-10.460877-54.718436v-80.468287a80.468288 80.468288 0 0 1 70.00741-67.593362z m416.021047 0a80.468288 80.468288 0 0 1 86.101068 75.64019v80.468288a94.147897 94.147897 0 0 1-12.070243 53.10907 80.468288 80.468288 0 0 1-132.772675 0 95.757262 95.757262 0 0 1-12.874926-57.132485v-80.468287a80.468288 80.468288 0 0 1 70.00741-70.812093z m0 0" fill="#20B0E3" p-id="2636"></path></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/YeYingQingYu'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1747070606533" class="icon" viewBox="0 0 1049 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3658" width="24.5859375" height="24" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M524.979332 0C234.676191 0 0 234.676191 0 524.979332c0 232.068678 150.366597 428.501342 358.967656 498.035028 26.075132 5.215026 35.636014-11.299224 35.636014-25.205961 0-12.168395-0.869171-53.888607-0.869171-97.347161-146.020741 31.290159-176.441729-62.580318-176.441729-62.580318-23.467619-60.841976-58.234462-76.487055-58.234463-76.487055-47.804409-32.15933 3.476684-32.15933 3.476685-32.15933 53.019436 3.476684 80.83291 53.888607 80.83291 53.888607 46.935238 79.963739 122.553122 57.365291 152.97411 43.458554 4.345855-33.897672 18.252593-57.365291 33.028501-70.402857-116.468925-12.168395-239.022047-57.365291-239.022047-259.012982 0-57.365291 20.860106-104.300529 53.888607-140.805715-5.215026-13.037566-23.467619-66.926173 5.215027-139.067372 0 0 44.327725-13.906737 144.282399 53.888607 41.720212-11.299224 86.917108-17.383422 131.244833-17.383422s89.524621 6.084198 131.244833 17.383422C756.178839 203.386032 800.506564 217.29277 800.506564 217.29277c28.682646 72.1412 10.430053 126.029806 5.215026 139.067372 33.897672 36.505185 53.888607 83.440424 53.888607 140.805715 0 201.64769-122.553122 245.975415-239.891218 259.012982 19.121764 16.514251 35.636014 47.804409 35.636015 97.347161 0 70.402857-0.869171 126.898978-0.869172 144.282399 0 13.906737 9.560882 30.420988 35.636015 25.205961 208.601059-69.533686 358.967656-265.96635 358.967655-498.035028C1049.958663 234.676191 814.413301 0 524.979332 0z" fill="#191717" p-id="3659"></path><path d="M199.040177 753.571326c-0.869171 2.607513-5.215026 3.476684-8.691711 1.738342s-6.084198-5.215026-4.345855-7.82254c0.869171-2.607513 5.215026-3.476684 8.691711-1.738342s5.215026 5.215026 4.345855 7.82254z m-6.953369-4.345856M219.900283 777.038945c-2.607513 2.607513-7.82254 0.869171-10.430053-2.607514-3.476684-3.476684-4.345855-8.691711-1.738342-11.299224 2.607513-2.607513 6.953369-0.869171 10.430053 2.607514 3.476684 4.345855 4.345855 9.560882 1.738342 11.299224z m-5.215026-5.215027M240.760389 807.459932c-3.476684 2.607513-8.691711 0-11.299224-4.345855-3.476684-4.345855-3.476684-10.430053 0-12.168395 3.476684-2.607513 8.691711 0 11.299224 4.345855 3.476684 4.345855 3.476684 9.560882 0 12.168395z m0 0M269.443034 837.011749c-2.607513 3.476684-8.691711 2.607513-13.906737-1.738342-4.345855-4.345855-6.084198-10.430053-2.607513-13.037566 2.607513-3.476684 8.691711-2.607513 13.906737 1.738342 4.345855 3.476684 5.215026 9.560882 2.607513 13.037566z m0 0M308.555733 853.526c-0.869171 4.345855-6.953369 6.084198-13.037566 4.345855-6.084198-1.738342-9.560882-6.953369-8.691711-10.430053 0.869171-4.345855 6.953369-6.084198 13.037566-4.345855 6.084198 1.738342 9.560882 6.084198 8.691711 10.430053z m0 0M351.145116 857.002684c0 4.345855-5.215026 7.82254-11.299224 7.82254-6.084198 0-11.299224-3.476684-11.299224-7.82254s5.215026-7.82254 11.299224-7.82254c6.084198 0 11.299224 3.476684 11.299224 7.82254z m0 0M391.126986 850.049315c0.869171 4.345855-3.476684 8.691711-9.560882 9.560882-6.084198 0.869171-11.299224-1.738342-12.168395-6.084197-0.869171-4.345855 3.476684-8.691711 9.560881-9.560882 6.084198-0.869171 11.299224 1.738342 12.168396 6.084197z m0 0" fill="#191717" p-id="3660"></path></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>å‹æƒ…é“¾æ¥</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                <span></span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">
                    
                        <li id="i18n-switch">  
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                            <select name="language" title="language" onchange="window.location.href = this.selectedOptions[0].value">
                                
                                    <option value="https://YeYingQingYu.github.io/zh-hk/" >ç¹é«”ä¸­æ–‡</option>
                                
                                    <option value="https://YeYingQingYu.github.io/" selected>ç®€ä½“ä¸­æ–‡</option>
                                
                            </select>
                        </li>
                    
                

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#å‚è€ƒå†…å®¹">å‚è€ƒå†…å®¹</a></li>
    <li><a href="#æœ¬åœ°éƒ¨ç½²">æœ¬åœ°éƒ¨ç½²</a>
      <ol>
        <li><a href="#ollama-å®‰è£…">Ollama å®‰è£…</a></li>
        <li><a href="#æ¨¡å‹å®‰è£…">æ¨¡å‹å®‰è£…</a></li>
      </ol>
    </li>
    <li><a href="#å¯è§†åŒ–é¡µé¢">å¯è§†åŒ–é¡µé¢</a>
      <ol>
        <li><a href="#chatbox-å®‰è£…">Chatbox å®‰è£…</a></li>
        <li><a href="#ollama-web-ui-lite-å®‰è£…">Ollama Web UI Lite å®‰è£…</a></li>
      </ol>
    </li>
    <li><a href="#è‡ªåŠ¨èŠå¤©">è‡ªåŠ¨èŠå¤©</a>
      <ol>
        <li><a href="#å®ç°åŸç†">å®ç°åŸç†</a>
          <ol>
            <li><a href="#å‘é€æ¶ˆæ¯">å‘é€æ¶ˆæ¯</a></li>
            <li><a href="#æ¥æ”¶æ‰€æœ‰æ¶ˆæ¯">æ¥æ”¶æ‰€æœ‰æ¶ˆæ¯</a></li>
            <li><a href="#æ¥æ”¶æŒ‡å®šç”¨æˆ·æ¶ˆæ¯">æ¥æ”¶æŒ‡å®šç”¨æˆ·æ¶ˆæ¯</a></li>
          </ol>
        </li>
        <li><a href="#æ•´ä½“å®ç°">æ•´ä½“å®ç°</a></li>
      </ol>
    </li>
    <li><a href="#ä»£ç ä¿®æ”¹">ä»£ç ä¿®æ”¹</a>
      <ol>
        <li><a href="#é—®ç­”è¿‡ç¨‹">é—®ç­”è¿‡ç¨‹</a>
          <ol>
            <li><a href="#æé—®1">æé—®1</a></li>
            <li><a href="#å›ç­”1">å›ç­”1</a></li>
            <li><a href="#æé—®2">æé—®2</a></li>
            <li><a href="#å›ç­”2">å›ç­”2</a></li>
          </ol>
        </li>
        <li><a href="#å®ç°æƒ…å†µ">å®ç°æƒ…å†µ</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/%E5%BE%AE%E4%BF%A1%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0-deepseek-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E8%81%8A%E5%A4%A9/">
                <img src="/p/%E5%BE%AE%E4%BF%A1%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0-deepseek-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E8%81%8A%E5%A4%A9/img_hu_67c705aec98e5d75.png"
                        srcset="/p/%E5%BE%AE%E4%BF%A1%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0-deepseek-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E8%81%8A%E5%A4%A9/img_hu_67c705aec98e5d75.png 800w, /p/%E5%BE%AE%E4%BF%A1%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0-deepseek-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E8%81%8A%E5%A4%A9/img_hu_578de8a0946a2914.png 1600w"
                        width="800" 
                        height="364" 
                        loading="lazy"
                        alt="Featured image of post å¾®ä¿¡è¿æ¥æœ¬åœ° deepseek å®ç°è‡ªåŠ¨èŠå¤©" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/my_note/" style="background-color: deepskyblue; color: #fff;">
                ç¬”è®°
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/%E5%BE%AE%E4%BF%A1%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0-deepseek-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E8%81%8A%E5%A4%A9/">å¾®ä¿¡è¿æ¥æœ¬åœ° deepseek å®ç°è‡ªåŠ¨èŠå¤©</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jun 07, 2025</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="å‚è€ƒå†…å®¹">å‚è€ƒå†…å®¹
</h2><p><a class="link" href="https://www.bilibili.com/video/BV1sFKMeqES5/?p=8&amp;spm_id_from=333.1007.top_right_bar_window_history.content.click&amp;vd_source=1bb47e84ede9c37ce3b9af60ed6d443d"  target="_blank" rel="noopener"
    >ã€AIå®¢æœdeepseekã€‘deepseekæ¥å…¥å¾®ä¿¡ï¼ˆæœ¬åœ°éƒ¨ç½²deepseeké›†æˆå¾®ä¿¡è‡ªåŠ¨æ”¶å‘æ¶ˆæ¯ï¼‰</a></p>
<p><a class="link" href="https://www.bilibili.com/video/BV1h1VbzHER2/?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&amp;vd_source=1bb47e84ede9c37ce3b9af60ed6d443d"  target="_blank" rel="noopener"
    >é»‘é©¬ç¨‹åºå‘˜AIå¤§æ¨¡å‹å¼€å‘é›¶åŸºç¡€åˆ°é¡¹ç›®å®æˆ˜å…¨å¥—è§†é¢‘æ•™ç¨‹ï¼ŒåŸºäºDeepSeekå’ŒQwenå¤§æ¨¡å‹ï¼Œä»å¤§æ¨¡å‹ç§æœ‰åŒ–éƒ¨ç½²ã€è¿è¡Œæœºåˆ¶åˆ°ç‹¬ç«‹æ­å»ºèŠå¤©æœºå™¨äººä¸€å¥—é€šå…³_å“”å“©å“”å“©_bilibili</a></p>
<h2 id="æœ¬åœ°éƒ¨ç½²">æœ¬åœ°éƒ¨ç½²
</h2><h3 id="ollama-å®‰è£…">Ollama å®‰è£…
</h3><p>Ollama æ˜¯ä¸€ä¸ªå¼€æºçš„æœ¬åœ°å¤§è¯­è¨€æ¨¡å‹è¿è¡Œæ¡†æ¶ï¼Œä¸“ä¸ºåœ¨æœ¬åœ°æœºå™¨ä¸Šä¾¿æ·éƒ¨ç½²å’Œè¿è¡Œå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è€Œè®¾è®¡ã€‚</p>
<p><a class="link" href="https://ollama.com/"  target="_blank" rel="noopener"
    >Ollama å®˜ç½‘</a></p>
<img src="image-20250607103314927.png">
<h3 id="æ¨¡å‹å®‰è£…">æ¨¡å‹å®‰è£…
</h3><p>åœ¨ <a class="link" href="https://ollama.com/search"  target="_blank" rel="noopener"
    >Ollama Search</a> ä¸­é€‰æ‹©æƒ³è¦ä¸‹è½½çš„æ¨¡å‹ï¼Œä½¿ç”¨ cmd ç»ˆç«¯è¿è¡Œç›¸åº”ä»£ç å³å¯ã€‚</p>
<img src="image-20250607103537732.png">
<p>éœ€è¦æ³¨æ„çš„æ˜¯ ollama é»˜è®¤å®‰è£…åœ¨ C ç›˜ç›®å½• AppData ä¸‹çš„ ollama æ–‡ä»¶å¤¹ä¸­ï¼Œå¦‚æœå†…å­˜ä¸å¤Ÿå¯ä»¥åœ¨ç¯å¢ƒå˜é‡ä¸­é…ç½® OLLAMA_MODELSï¼Œè·¯å¾„è‡ªé€‰ã€‚</p>
<h2 id="å¯è§†åŒ–é¡µé¢">å¯è§†åŒ–é¡µé¢
</h2><h3 id="chatbox-å®‰è£…">Chatbox å®‰è£…
</h3><p>Chatbox AI æ˜¯ä¸€æ¬¾ AI å®¢æˆ·ç«¯åº”ç”¨å’Œæ™ºèƒ½åŠ©æ‰‹ï¼Œæ”¯æŒä¼—å¤šå…ˆè¿›çš„ AI æ¨¡å‹å’Œ APIï¼Œå¯åœ¨ Windowsã€MacOSã€Androidã€iOSã€Linux å’Œç½‘é¡µç‰ˆä¸Šä½¿ç”¨ã€‚</p>
<p><a class="link" href="https://www.chatbox-china.com/"  target="_blank" rel="noopener"
    >Chatbox å®˜ç½‘</a></p>
<img src="image-20250607103629350.png">
<p>å®‰è£… chatbox å¯ä»¥åœ¨çª—å£åº”ç”¨ä¸­ä½¿ç”¨ç›¸åº”æœ¬åœ°æ¨¡å‹ï¼Œä»£æ›¿äº†åœ¨ cmd ç»ˆç«¯ä¸­è¿è¡Œã€‚</p>
<img src="image-20250607104157031.png">
<h3 id="ollama-web-ui-lite-å®‰è£…">Ollama Web UI Lite å®‰è£…
</h3><p>Ollama Web UI Lite æ˜¯ <a class="link" href="https://github.com/ollama-webui/ollama-webui"  target="_blank" rel="noopener"
    >Ollama Web UI</a> çš„ç®€åŒ–ç‰ˆæœ¬ï¼Œæ—¨åœ¨æä¾›ç®€åŒ–çš„ç”¨æˆ·ç•Œé¢ï¼Œå…·æœ‰æœ€å°‘çš„åŠŸèƒ½å’Œæ›´ä½çš„å¤æ‚æ€§ã€‚è¯¥é¡¹ç›®çš„ä¸»è¦é‡ç‚¹æ˜¯é€šè¿‡å®Œæ•´çš„ TypeScript è¿ç§»å®ç°æ›´æ¸…æ™°çš„ä»£ç ï¼Œé‡‡ç”¨æ›´åŠ æ¨¡å—åŒ–çš„æ¶æ„ï¼Œç¡®ä¿å…¨é¢çš„æµ‹è¯•è¦†ç›–ç‡ï¼Œå¹¶å®æ–½å¼ºå¤§çš„ CI/CD ç®¡é“ã€‚</p>
<p><a class="link" href="https://github.com/ollama-webui/ollama-webui-lite"  target="_blank" rel="noopener"
    >ollama-webui/ollama-webui-lite: This repo is no longer maintained, please use our main Open WebUI repo.</a></p>
<img src="image-20250607104612392.png">
<p>æœ¬åœ°è§£å‹åï¼Œåœ¨ç»ˆç«¯ä¸­æ‰“å¼€ï¼Œä½¿ç”¨ npm ci å®‰è£…ä¾èµ–ï¼Œç„¶åä½¿ç”¨ npm run dev å³å¯è¿è¡Œã€‚</p>
<img src="image-20250607104819639.png">
<h2 id="è‡ªåŠ¨èŠå¤©">è‡ªåŠ¨èŠå¤©
</h2><h3 id="å®ç°åŸç†">å®ç°åŸç†
</h3><p>é€šè¿‡æœ¬åœ°ä»£ç ç›‘æµ‹å¾®ä¿¡èŠå¤©çª—å£ï¼Œè·å–åˆ°æ¶ˆæ¯åè°ƒç”¨æœ¬åœ° deepseek æ¨¡å‹ï¼Œå¹¶å°† deepseek çš„å›å¤å‘é€åˆ°èŠå¤©çª—å£ã€‚</p>
<p>éœ€è¦å®‰è£… wxauto è‡ªåŠ¨æ§åˆ¶å¾®ä¿¡ç•Œé¢å®ç°æ”¶å‘ä¿¡æ¯ã€‚</p>
<p>æ­¤æ—¶æˆ‘ä½¿ç”¨çš„ Python ç‰ˆæœ¬æ˜¯ 3.10.6ï¼Œå¾®ä¿¡ç‰ˆæœ¬ä¸º 3.9.12.51ï¼Œä¸è§†é¢‘æ¼”ç¤ºä¸­çš„ç‰ˆæœ¬ä¸åŒã€‚</p>
<h4 id="å‘é€æ¶ˆæ¯">å‘é€æ¶ˆæ¯
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">wxauto</span> <span class="kn">import</span> <span class="n">Wechat</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">wx</span><span class="o">=</span> <span class="n">Wechat</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="c1"># æŒ‡å®šäºº/ç¾¤å‘æ¶ˆæ¯</span>
</span></span><span class="line"><span class="cl"><span class="n">wx</span><span class="o">.</span><span class="n">sendMsg</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&#34;ä½ å¥½&#34;</span><span class="err">ï¼Œ</span><span class="n">who</span><span class="o">=</span><span class="s2">&#34;ç”¨æˆ·ID&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ç¾¤æ¶ˆæ¯+@æŒ‡å®šäºº</span>
</span></span><span class="line"><span class="cl"><span class="c1"># wx.sendMsg(msg=&#34;ä½ å¥½&#34;ï¼Œwho=&#34;...&#34;ï¼Œat=[â€œ...&#34;,â€œ...â€])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># wx.sendMsg(filepath=&#34;F:\xxx.png&#34;ï¼Œwho=&#34;...&#34;)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># wx.sendMsg(filepath=[&#34;æ–‡ä»¶A&#34;,â€œæ–‡ä»¶B&#34;,â€œF:\xxx.png&#34;]ï¼Œwho=â€œ...â€)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æ¥æ”¶æ‰€æœ‰æ¶ˆæ¯">æ¥æ”¶æ‰€æœ‰æ¶ˆæ¯
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">wxauto</span> <span class="kn">import</span> <span class="n">wechat</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">WX</span> <span class="o">=</span> <span class="n">Wechat</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># {</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     &#34;ç”¨æˆ·æ˜µç§°A&#34;: [æ¶ˆæ¯å¯¹è±¡1, æ¶ˆæ¯å¯¹è±¡2, æ¶ˆæ¯å¯¹è±¡3],</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     &#34;ç”¨æˆ·æ˜µç§°B&#34;: [æ¶ˆæ¯å¯¹è±¡1, æ¶ˆæ¯å¯¹è±¡2, æ¶ˆæ¯å¯¹è±¡3]</span>
</span></span><span class="line"><span class="cl"><span class="c1"># }</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># ç­‰å¾…æ¥å—æ”¶åˆ°çš„æœ€æ–°æ¶ˆæ¯</span>
</span></span><span class="line"><span class="cl">	<span class="n">msg_dict</span><span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">GetNextNewMessage</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="n">username</span><span class="p">,</span> <span class="n">msg_list</span> <span class="ow">in</span> <span class="n">msg_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">		<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;æ˜µç§°:&#34;</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1"># [æ¶ˆæ¯å¯¹è±¡1ï¼Œæ¶ˆæ¯å¯¹è±¡2ï¼Œæ¶ˆæ¯å¯¹è±¡3]</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">msg_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">		<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\t</span><span class="s2">æ¶ˆæ¯&#34;</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æ¥æ”¶æŒ‡å®šç”¨æˆ·æ¶ˆæ¯">æ¥æ”¶æŒ‡å®šç”¨æˆ·æ¶ˆæ¯
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">wxauto</span> <span class="kn">import</span> <span class="n">wechat</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">wx</span> <span class="o">=</span> <span class="n">Wechat</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">wx</span><span class="o">.</span><span class="n">AddListenchat</span><span class="p">(</span><span class="n">who</span><span class="o">=</span><span class="s1">&#39;ç”¨æˆ·ID&#34;)</span>
</span></span><span class="line"><span class="cl"><span class="n">wx</span><span class="o">.</span><span class="n">AddListenchat</span><span class="p">(</span><span class="n">who</span><span class="o">=</span><span class="s2">&#34;...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                 
</span></span><span class="line"><span class="cl"><span class="c1"># {</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     &#34;ç”¨æˆ·AèŠå¤©çª—å£&#34;: [æ¶ˆæ¯å¯¹è±¡1, æ¶ˆæ¯å¯¹è±¡2, æ¶ˆæ¯å¯¹è±¡3],</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     &#34;ç”¨æˆ·BèŠå¤©çª—å£&#34;: [æ¶ˆæ¯å¯¹è±¡1, æ¶ˆæ¯å¯¹è±¡2, æ¶ˆæ¯å¯¹è±¡3]</span>
</span></span><span class="line"><span class="cl"><span class="c1"># }</span>
</span></span><span class="line"><span class="cl">                 
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>	
</span></span><span class="line"><span class="cl">	<span class="n">listen</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">GetListenMessage</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="n">chat</span> <span class="n">win</span><span class="p">,</span> <span class="n">message</span> <span class="nb">list</span> <span class="ow">in</span> <span class="n">listen_</span> <span class="nb">dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">		<span class="c1">#ç”¨æˆ·æˆ–ç¾¤å</span>
</span></span><span class="line"><span class="cl">		<span class="n">chat</span> <span class="n">user</span><span class="o">=</span><span class="n">chat</span> <span class="n">win</span><span class="o">.</span><span class="n">who</span>
</span></span><span class="line"><span class="cl">                 
</span></span><span class="line"><span class="cl">		<span class="c1">#[æ¶ˆæ¯å¯¹è±¡1,æ¶ˆæ¯å¯¹è±¡2,æ¶ˆæ¯å¯¹è±¡3]</span>
</span></span><span class="line"><span class="cl">		<span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">message_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s2">&#34;friend&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                 <span class="k">continue</span>
</span></span><span class="line"><span class="cl">			<span class="nb">print</span><span class="p">(</span><span class="n">chat_user</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1"># å›å¤æ¶ˆæ¯</span>
</span></span><span class="line"><span class="cl">		<span class="c1"># chat_win.sendMsg(&#34;å›å¤çš„å†…å®¹&#34;)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ•´ä½“å®ç°">æ•´ä½“å®ç°
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">requests</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">wxauto</span> <span class="kn">import</span> <span class="n">WeChat</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åŠ è½½å†å²æ¶ˆæ¯è®°å½•</span>
</span></span><span class="line"><span class="cl"><span class="n">DB</span> <span class="o">=</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">DB</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># MONITOR_LIST = []</span>
</span></span><span class="line"><span class="cl"><span class="c1"># fp = open(&#34;users.txt&#34;, encoding=&#39;utf-8&#39;, mode=&#39;r&#39;)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># for line in fp:</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     # è¯»å–users.txtåŠ è½½ç›‘å¬ç”¨æˆ·</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     # print(line)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     MONITOR_LIST.append(line)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># fp.close()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åŠ è½½ç›‘å¬ç”¨æˆ·åˆ—è¡¨</span>
</span></span><span class="line"><span class="cl"><span class="n">MONITOR_LIST</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&#34;users.txt&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;users.txt&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>  <span class="c1"># å»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦å’Œæ¢è¡Œç¬¦</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">line</span><span class="p">:</span>  <span class="c1"># å¿½ç•¥ç©ºè¡Œ</span>
</span></span><span class="line"><span class="cl">                <span class="n">MONITOR_LIST</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;è­¦å‘Šï¼šæœªæ‰¾åˆ° users.txt æ–‡ä»¶ï¼Œå°†ç›‘å¬é»˜è®¤ç”¨æˆ·åˆ—è¡¨&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">MONITOR_LIST</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;æ²™ç³»&#34;</span><span class="p">]</span>  <span class="c1"># é»˜è®¤ç›‘å¬ç”¨æˆ·ï¼ˆç¤ºä¾‹ï¼‰</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ‰“å¼€å¾®ä¿¡</span>
</span></span><span class="line"><span class="cl"><span class="n">wx</span> <span class="o">=</span> <span class="n">WeChat</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ç›‘å¬è´¦æˆ·åˆ—è¡¨</span>
</span></span><span class="line"><span class="cl"><span class="c1"># MONITOR_LIST = [&#34;æ²™ç³»&#34;]</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">ele</span> <span class="ow">in</span> <span class="n">MONITOR_LIST</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">wx</span><span class="o">.</span><span class="n">AddListenChat</span><span class="p">(</span><span class="n">who</span> <span class="o">=</span> <span class="n">ele</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ç›‘å¬æ¶ˆæ¯</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">listen_dict</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">GetListenMessage</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">chat_win</span><span class="p">,</span> <span class="n">message_list</span> <span class="ow">in</span> <span class="n">listen_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># print(chat_win.who)</span>
</span></span><span class="line"><span class="cl">        <span class="n">chat_user</span> <span class="o">=</span> <span class="n">chat_win</span><span class="o">.</span><span class="n">who</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># è·å–æœ€æ–°èŠå¤©æ¶ˆæ¯</span>
</span></span><span class="line"><span class="cl">        <span class="n">interval_list</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">message_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s2">&#34;friend&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span>
</span></span><span class="line"><span class="cl">            <span class="n">interval_list</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&#34;role&#34;</span><span class="p">:</span> <span class="s2">&#34;user&#34;</span><span class="p">,</span> <span class="s2">&#34;content&#34;</span><span class="p">:</span> <span class="n">msg</span><span class="o">.</span><span class="n">content</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">interval_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># æ‹¼æ¥å†å²èŠå¤©è®°å½•</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;å¾®ä¿¡æ¶ˆæ¯ï¼š&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">interval_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">history_list</span> <span class="o">=</span> <span class="n">DB</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">chat_user</span><span class="p">,</span> <span class="p">[])</span>
</span></span><span class="line"><span class="cl">        <span class="n">history_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">interval_list</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># è°ƒç”¨æœ¬åœ° deepseek æ¨¡å‹</span>
</span></span><span class="line"><span class="cl">        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">url</span><span class="o">=</span><span class="s2">&#34;http://localhost:11434/api/chat&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">json</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;model&#34;</span><span class="p">:</span> <span class="s2">&#34;deepseek-r1:8b&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;message&#34;</span><span class="p">:</span> <span class="n">history_list</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;stream&#34;</span><span class="p">:</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">data_dict</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">res_msg_dict</span> <span class="o">=</span> <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># è·å– deepseek å›å¤å†…å®¹ï¼Œå¾®ä¿¡å›å¤</span>
</span></span><span class="line"><span class="cl">        <span class="n">res_content</span> <span class="o">=</span> <span class="n">res_msg_dict</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">chat_win</span><span class="o">.</span><span class="n">SendMsg</span><span class="p">(</span><span class="n">res_content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;deepseekå›å¤ï¼š&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">res_content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># ä¿å­˜æ²Ÿé€šè®°å½•</span>
</span></span><span class="line"><span class="cl">        <span class="n">history_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res_msg_dict</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">DB</span><span class="p">[</span><span class="n">chat_user</span><span class="p">]</span> <span class="o">=</span> <span class="n">history_list</span>
</span></span><span class="line"><span class="cl">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">DB</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»£ç è¿è¡Œåèƒ½å¤ŸæˆåŠŸç›‘å¬åˆ°å¾®ä¿¡å¥½å‹å‘é€çš„æ¶ˆæ¯ï¼Œä¸”èƒ½å¤Ÿè¯»å–åˆ°æ¶ˆæ¯ä¿¡æ¯ï¼Œä½†æ˜¯åœ¨å›å¤æ—¶ä¸€ç›´æŠ¥é”™ï¼Œæ˜¾ç¤ºå›å¤æ—¶é—´è¶…æ—¶ï¼ŒæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;D:\PycharmProject\WebAutoTest\Auto_Chat\Auto_Chat.py&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">82</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">chat_win</span><span class="o">.</span><span class="n">SendMsg</span><span class="p">(</span><span class="n">res_content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;D:\PycharmProject\WebAutoTest</span><span class="se">\v</span><span class="s2">env\lib\site-packages\wxauto\elements.py&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">250</span><span class="p">,</span> <span class="ow">in</span> <span class="n">SendMsg</span>
</span></span><span class="line"><span class="cl">    <span class="k">raise</span> <span class="ne">TimeoutError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;å‘é€æ¶ˆæ¯è¶…æ—¶ --&gt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">who</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="ne">TimeoutError</span><span class="p">:</span> <span class="n">å‘é€æ¶ˆæ¯è¶…æ—¶</span> <span class="o">--&gt;</span> <span class="n">æ²™ç³»</span> <span class="o">-</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯¢é—® AI ä¿®æ”¹åä»£ç å¦‚ä¸‹ï¼Œä½†ä»æœªèƒ½è§£å†³é—®é¢˜ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">requests</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">wxauto</span> <span class="kn">import</span> <span class="n">WeChat</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">win32gui</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">win32con</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ======================== å·¥å…·å‡½æ•° ========================</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">activate_window</span><span class="p">(</span><span class="n">window_title</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;å¼ºåˆ¶æ¿€æ´»å¾®ä¿¡çª—å£ï¼ˆéœ€ç®¡ç†å‘˜æƒé™ï¼‰&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">hwnd</span> <span class="o">=</span> <span class="n">win32gui</span><span class="o">.</span><span class="n">FindWindow</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">window_title</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">hwnd</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">win32gui</span><span class="o">.</span><span class="n">ShowWindow</span><span class="p">(</span><span class="n">hwnd</span><span class="p">,</span> <span class="n">win32con</span><span class="o">.</span><span class="n">SW_RESTORE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">win32gui</span><span class="o">.</span><span class="n">SetForegroundWindow</span><span class="p">(</span><span class="n">hwnd</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;çª—å£æ¿€æ´»å¤±è´¥ï¼ˆä¸å½±å“å‘é€ï¼‰: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">safe_send_msg</span><span class="p">(</span><span class="n">chat_win</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">max_retries</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;å¸¦é‡è¯•æœºåˆ¶çš„æ¶ˆæ¯å‘é€&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_retries</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># å°è¯•æ¿€æ´»çª—å£ï¼ˆæé«˜æˆåŠŸç‡ï¼‰</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">chat_win</span><span class="p">,</span> <span class="s1">&#39;who&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">activate_window</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">chat_win</span><span class="o">.</span><span class="n">who</span><span class="si">}</span><span class="s2"> - å¾®ä¿¡&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">chat_win</span><span class="o">.</span><span class="n">SendMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;å‘é€å¤±è´¥ï¼ˆå°è¯• </span><span class="si">{</span><span class="n">attempt</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">max_retries</span><span class="si">}</span><span class="s2">ï¼‰: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ======================== ä¸»é€»è¾‘ ========================</span>
</span></span><span class="line"><span class="cl"><span class="c1"># åŠ è½½å†å²æ¶ˆæ¯è®°å½•</span>
</span></span><span class="line"><span class="cl"><span class="n">DB</span> <span class="o">=</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">DB</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;å†å²è®°å½•åŠ è½½å¤±è´¥: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åŠ è½½ç›‘å¬ç”¨æˆ·åˆ—è¡¨</span>
</span></span><span class="line"><span class="cl"><span class="n">MONITOR_LIST</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&#34;users.txt&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;users.txt&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">line</span> <span class="ow">and</span> <span class="n">line</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">MONITOR_LIST</span><span class="p">:</span>  <span class="c1"># å»é‡</span>
</span></span><span class="line"><span class="cl">                <span class="n">MONITOR_LIST</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;è­¦å‘Šï¼šæœªæ‰¾åˆ° users.txt æ–‡ä»¶ï¼Œå°†ç›‘å¬é»˜è®¤ç”¨æˆ·&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">MONITOR_LIST</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;æ²™ç³»&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åˆå§‹åŒ–å¾®ä¿¡</span>
</span></span><span class="line"><span class="cl"><span class="n">wx</span> <span class="o">=</span> <span class="n">WeChat</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">MONITOR_LIST</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">wx</span><span class="o">.</span><span class="n">AddListenChat</span><span class="p">(</span><span class="n">who</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;å·²ç›‘å¬ç”¨æˆ·: </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;ç›‘å¬ç”¨æˆ· </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2"> å¤±è´¥: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ä¸»å¾ªç¯</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">listen_dict</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">GetListenMessage</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">chat_win</span><span class="p">,</span> <span class="n">message_list</span> <span class="ow">in</span> <span class="n">listen_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="n">chat_user</span> <span class="o">=</span> <span class="n">chat_win</span><span class="o">.</span><span class="n">who</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># è¿‡æ»¤éå¥½å‹æ¶ˆæ¯</span>
</span></span><span class="line"><span class="cl">            <span class="n">interval_list</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span><span class="s2">&#34;role&#34;</span><span class="p">:</span> <span class="s2">&#34;user&#34;</span><span class="p">,</span> <span class="s2">&#34;content&#34;</span><span class="p">:</span> <span class="n">msg</span><span class="o">.</span><span class="n">content</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">message_list</span> <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&#34;friend&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="n">interval_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">æ”¶åˆ°æ¥è‡ª </span><span class="si">{</span><span class="n">chat_user</span><span class="si">}</span><span class="s2"> çš„æ¶ˆæ¯:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">interval_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  </span><span class="si">{</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># åˆå¹¶å†å²è®°å½•</span>
</span></span><span class="line"><span class="cl">            <span class="n">history_list</span> <span class="o">=</span> <span class="n">DB</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">chat_user</span><span class="p">,</span> <span class="p">[])</span>
</span></span><span class="line"><span class="cl">            <span class="n">history_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">interval_list</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># è°ƒç”¨æ¨¡å‹API</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="n">url</span><span class="o">=</span><span class="s2">&#34;http://localhost:11434/api/chat&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">json</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="s2">&#34;model&#34;</span><span class="p">:</span> <span class="s2">&#34;deepseek-r1:8b&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="s2">&#34;message&#34;</span><span class="p">:</span> <span class="n">history_list</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="s2">&#34;stream&#34;</span><span class="p">:</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">                    <span class="p">},</span>
</span></span><span class="line"><span class="cl">                    <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span>
</span></span><span class="line"><span class="cl">                <span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">res</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="n">reply</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;message&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="n">reply_content</span> <span class="o">=</span> <span class="n">reply</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;æ¨¡å‹è°ƒç”¨å¤±è´¥: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">reply_content</span> <span class="o">=</span> <span class="s2">&#34;ï¼ˆæ€è€ƒä¸­...è¯·ç¨åå†è¯•ï¼‰&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># å‘é€å›å¤</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">å›å¤ </span><span class="si">{</span><span class="n">chat_user</span><span class="si">}</span><span class="s2">:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  </span><span class="si">{</span><span class="n">reply_content</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="n">safe_send_msg</span><span class="p">(</span><span class="n">chat_win</span><span class="p">,</span> <span class="n">reply_content</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;âš ï¸ æœ€ç»ˆå‘é€å¤±è´¥: </span><span class="si">{</span><span class="n">reply_content</span><span class="p">[:</span><span class="mi">50</span><span class="p">]</span><span class="si">}</span><span class="s2">...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># ä¿å­˜æˆåŠŸè®°å½•</span>
</span></span><span class="line"><span class="cl">                <span class="n">history_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reply</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">DB</span><span class="p">[</span><span class="n">chat_user</span><span class="p">]</span> <span class="o">=</span> <span class="n">history_list</span>
</span></span><span class="line"><span class="cl">                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">DB</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># é™ä½CPUå ç”¨</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">ç”¨æˆ·ç»ˆæ­¢ç¨‹åº&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;ä¸»å¾ªç¯å¼‚å¸¸: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># é˜²æ­¢é¢‘ç¹æŠ¥é”™</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ­¤æ—¶æ£€æŸ¥å¯èƒ½å½±å“å› ç´ ï¼Œollama æ­£å¸¸è¿è¡Œï¼Œèƒ½å¤Ÿè®¿é—®åˆ° api åœ°å€ http://localhost:11434/api/tagsï¼Œç®¡ç†å‘˜èº«ä»½è¿è¡Œ pycharmï¼Œæ¨¡å‹åŠ è½½æ­£å¸¸ï¼Œæš‚æ—¶æœªå‘ç°å…¶ä»–é—®é¢˜ã€‚</p>
<p>ç»ˆç«¯ä¿¡æ¯è¾“å‡ºå¦‚ä¸‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.115+08:00 level=WARN source=ggml.go:152 msg=<span class="s2">&#34;key not found&#34;</span> key=general.alignment default=32
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.142+08:00 level=WARN source=ggml.go:152 msg=<span class="s2">&#34;key not found&#34;</span> key=general.alignment default=32
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.155+08:00 level=WARN source=ggml.go:152 msg=<span class="s2">&#34;key not found&#34;</span> key=general.alignment default=32
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.156+08:00 level=WARN source=ggml.go:152 msg=<span class="s2">&#34;key not found&#34;</span> key=llama.vision.block_count default=0
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.156+08:00 level=WARN source=ggml.go:152 msg=<span class="s2">&#34;key not found&#34;</span> key=llama.attention.key_length default=128
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.156+08:00 level=WARN source=ggml.go:152 msg=<span class="s2">&#34;key not found&#34;</span> key=llama.attention.value_length default=128
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.156+08:00 level=INFO source=sched.go:754 msg=<span class="s2">&#34;new model will fit in available VRAM in single GPU, loading&#34;</span> model=C:\Users\Ysam\.ollama\models\blobs\sha256-6340dc3229b0d08ea9cc49b75d4098702983e17b4c096d57afbbf2ffc813f2be gpu=GPU-189333b1-98d9-8621-adb5-344761953fc5 parallel=2 available=7349653504 required=<span class="s2">&#34;6.5 GiB&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.177+08:00 level=INFO source=server.go:106 msg=<span class="s2">&#34;system memory&#34;</span> total=<span class="s2">&#34;31.3 GiB&#34;</span> free=<span class="s2">&#34;16.5 GiB&#34;</span> free_swap=<span class="s2">&#34;22.9 GiB&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.177+08:00 level=WARN source=ggml.go:152 msg=<span class="s2">&#34;key not found&#34;</span> key=llama.vision.block_count default=0
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.177+08:00 level=WARN source=ggml.go:152 msg=<span class="s2">&#34;key not found&#34;</span> key=llama.attention.key_length default=128
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.177+08:00 level=WARN source=ggml.go:152 msg=<span class="s2">&#34;key not found&#34;</span> key=llama.attention.value_length default=128
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.177+08:00 level=INFO source=server.go:139 msg=offload library=cuda layers.requested=-1 layers.model=33 layers.offload=33 layers.split=<span class="s2">&#34;&#34;</span> memory.available=<span class="s2">&#34;[6.8 GiB]&#34;</span> memory.gpu_overhead=<span class="s2">&#34;0 B&#34;</span> memory.required.full=<span class="s2">&#34;6.5 GiB&#34;</span> memory.required.partial=<span class="s2">&#34;6.5 GiB&#34;</span> memory.required.kv=<span class="s2">&#34;1.0 GiB&#34;</span> memory.required.allocations=<span class="s2">&#34;[6.5 GiB]&#34;</span> memory.weights.total=<span class="s2">&#34;4.3 GiB&#34;</span> memory.weights.repeating=<span class="s2">&#34;3.9 GiB&#34;</span> memory.weights.nonrepeating=<span class="s2">&#34;411.0 MiB&#34;</span> memory.graph.full=<span class="s2">&#34;560.0 MiB&#34;</span> memory.graph.partial=<span class="s2">&#34;677.5 MiB&#34;</span>
</span></span><span class="line"><span class="cl">llama_model_loader: loaded meta data with 28 key-value pairs and 292 tensors from C:\Users\Ysam\.ollama\models\blobs\sha256-6340dc3229b0d08ea9cc49b75d4098702983e17b4c096d57afbbf2ffc813f2be (version GGUF V3 (latest))
</span></span><span class="line"><span class="cl">llama_model_loader: Dumping metadata keys/values. Note: KV overrides do not apply in this output.
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   0:                       general.architecture str              = llama
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   1:                               general.type str              = model
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   2:                               general.name str              = DeepSeek R1 Distill Llama 8B
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   3:                           general.basename str              = DeepSeek-R1-Distill-Llama
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   4:                         general.size_label str              = 8B
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   5:                          llama.block_count u32              = 32
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   6:                       llama.context_length u32              = 131072
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   7:                     llama.embedding_length u32              = 4096
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   8:                  llama.feed_forward_length u32              = 14336
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   9:                 llama.attention.head_count u32              = 32
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  10:              llama.attention.head_count_kv u32              = 8
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  11:                       llama.rope.freq_base f32              = 500000.000000
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  12:     llama.attention.layer_norm_rms_epsilon f32              = 0.000010
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  13:                          general.file_type u32              = 15
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  14:                           llama.vocab_size u32              = 128256
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  15:                 llama.rope.dimension_count u32              = 128
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  16:                       tokenizer.ggml.model str              = gpt2
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  17:                         tokenizer.ggml.pre str              = llama-bpe
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  18:                      tokenizer.ggml.tokens arr[str,128256]  = [<span class="s2">&#34;!&#34;</span>, <span class="s2">&#34;\&#34;&#34;, &#34;</span>#<span class="s2">&#34;, &#34;</span>$<span class="s2">&#34;, &#34;</span>%<span class="s2">&#34;, &#34;</span><span class="p">&amp;</span><span class="s2">&#34;, &#34;</span>&#39;<span class="s2">&#34;, ...</span>
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  19:                  tokenizer.ggml.token_type arr[i32,128256]  = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, ...
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  20:                      tokenizer.ggml.merges arr[str,280147]  = [<span class="s2">&#34;Ä  Ä &#34;</span>, <span class="s2">&#34;Ä  Ä Ä Ä &#34;</span>, <span class="s2">&#34;Ä Ä  Ä Ä &#34;</span>, <span class="s2">&#34;...</span>
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  21:                tokenizer.ggml.bos_token_id u32              = 128000
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  22:                tokenizer.ggml.eos_token_id u32              = 128001
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  23:            tokenizer.ggml.padding_token_id u32              = 128001
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  24:               tokenizer.ggml.add_bos_token bool             = true
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  25:               tokenizer.ggml.add_eos_token bool             = false
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  26:                    tokenizer.chat_template str              = {% if not add_generation_prompt is de...
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  27:               general.quantization_version u32              = 2
</span></span><span class="line"><span class="cl">llama_model_loader: - type  f32:   66 tensors
</span></span><span class="line"><span class="cl">llama_model_loader: - type q4_K:  193 tensors
</span></span><span class="line"><span class="cl">llama_model_loader: - type q6_K:   33 tensors
</span></span><span class="line"><span class="cl">print_info: file format = GGUF V3 (latest)
</span></span><span class="line"><span class="cl">print_info: file type   = Q4_K - Medium
</span></span><span class="line"><span class="cl">print_info: file size   = 4.58 GiB (4.89 BPW)
</span></span><span class="line"><span class="cl">load: special_eos_id is not in special_eog_ids - the tokenizer config may be incorrect
</span></span><span class="line"><span class="cl">load: special tokens cache size = 256
</span></span><span class="line"><span class="cl">load: token to piece cache size = 0.7999 MB
</span></span><span class="line"><span class="cl">print_info: arch             = llama
</span></span><span class="line"><span class="cl">print_info: vocab_only       = 1
</span></span><span class="line"><span class="cl">print_info: model type       = ?B
</span></span><span class="line"><span class="cl">print_info: model params     = 8.03 B
</span></span><span class="line"><span class="cl">print_info: general.name     = DeepSeek R1 Distill Llama 8B
</span></span><span class="line"><span class="cl">print_info: vocab type       = BPE
</span></span><span class="line"><span class="cl">print_info: n_vocab          = 128256
</span></span><span class="line"><span class="cl">print_info: n_merges         = 280147
</span></span><span class="line"><span class="cl">print_info: BOS token        = 128000 &#39;<span class="p">&lt;</span>ï½œbeginâ–ofâ–sentenceï½œ<span class="p">&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: EOS token        = 128001 &#39;<span class="p">&lt;</span>ï½œendâ–ofâ–sentenceï½œ<span class="p">&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: EOT token        = 128001 &#39;<span class="p">&lt;</span>ï½œendâ–ofâ–sentenceï½œ<span class="p">&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: EOM token        = 128008 &#39;<span class="p">&lt;</span>|eom_id<span class="p">|&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: PAD token        = 128001 &#39;<span class="p">&lt;</span>ï½œendâ–ofâ–sentenceï½œ<span class="p">&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: LF token         = 198 &#39;ÄŠ&#39;
</span></span><span class="line"><span class="cl">print_info: EOG token        = 128001 &#39;<span class="p">&lt;</span>ï½œendâ–ofâ–sentenceï½œ<span class="p">&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: EOG token        = 128008 &#39;<span class="p">&lt;</span>|eom_id<span class="p">|&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: EOG token        = 128009 &#39;<span class="p">&lt;</span>|eot_id<span class="p">|&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: max token length = 256
</span></span><span class="line"><span class="cl">llama_model_load: vocab only - skipping tensors
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.398+08:00 level=INFO source=server.go:410 msg=<span class="s2">&#34;starting llama server&#34;</span> cmd=<span class="s2">&#34;C:\\Users\\Ysam\\AppData\\Local\\Programs\\Ollama\\ollama.exe runner --model C:\\Users\\Ysam\\.ollama\\models\\blobs\\sha256-6340dc3229b0d08ea9cc49b75d4098702983e17b4c096d57afbbf2ffc813f2be --ctx-size 8192 --batch-size 512 --n-gpu-layers 33 --threads 12 --no-mmap --parallel 2 --port 57197&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.401+08:00 level=INFO source=sched.go:452 msg=<span class="s2">&#34;loaded runners&#34;</span> count=1
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.401+08:00 level=INFO source=server.go:589 msg=<span class="s2">&#34;waiting for llama runner to start responding&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.401+08:00 level=INFO source=server.go:623 msg=<span class="s2">&#34;waiting for server to become available&#34;</span> status=<span class="s2">&#34;llm server error&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.420+08:00 level=INFO source=runner.go:853 msg=<span class="s2">&#34;starting go runner&#34;</span>
</span></span><span class="line"><span class="cl">load_backend: loaded CPU backend from C:\Users\Ysam\AppData\Local\Programs\Ollama\lib\ollama\ggml-cpu-icelake.dll
</span></span><span class="line"><span class="cl">ggml_cuda_init: GGML_CUDA_FORCE_MMQ:    no
</span></span><span class="line"><span class="cl">ggml_cuda_init: GGML_CUDA_FORCE_CUBLAS: no
</span></span><span class="line"><span class="cl">ggml_cuda_init: found 1 CUDA devices:
</span></span><span class="line"><span class="cl">  Device 0: NVIDIA GeForce RTX 4070 Laptop GPU, compute capability 8.9, VMM: yes
</span></span><span class="line"><span class="cl">load_backend: loaded CUDA backend from C:\Users\Ysam\AppData\Local\Programs\Ollama\lib\ollama\cuda_v12\ggml-cuda.dll
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.744+08:00 level=INFO source=ggml.go:103 msg=system CPU.0.SSE3=1 CPU.0.SSSE3=1 CPU.0.AVX=1 CPU.0.AVX2=1 CPU.0.F16C=1 CPU.0.FMA=1 CPU.0.BMI2=1 CPU.0.AVX512=1 CPU.0.AVX512_VBMI=1 CPU.0.AVX512_VNNI=1 CPU.0.LLAMAFILE=1 CPU.1.LLAMAFILE=1 CUDA.0.ARCHS=500,600,610,700,750,800,860,870,890,900,1200 CUDA.0.USE_GRAPHS=1 CUDA.0.PEER_MAX_BATCH_SIZE=128 compiler=cgo(clang)
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.744+08:00 level=INFO source=runner.go:913 msg=<span class="s2">&#34;Server listening on 127.0.0.1:57197&#34;</span>
</span></span><span class="line"><span class="cl">llama_model_load_from_file_impl: using device CUDA0 (NVIDIA GeForce RTX 4070 Laptop GPU) - 7056 MiB free
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:44.903+08:00 level=INFO source=server.go:623 msg=<span class="s2">&#34;waiting for server to become available&#34;</span> status=<span class="s2">&#34;llm server loading model&#34;</span>
</span></span><span class="line"><span class="cl">llama_model_loader: loaded meta data with 28 key-value pairs and 292 tensors from C:\Users\Ysam\.ollama\models\blobs\sha256-6340dc3229b0d08ea9cc49b75d4098702983e17b4c096d57afbbf2ffc813f2be (version GGUF V3 (latest))
</span></span><span class="line"><span class="cl">llama_model_loader: Dumping metadata keys/values. Note: KV overrides do not apply in this output.
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   0:                       general.architecture str              = llama
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   1:                               general.type str              = model
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   2:                               general.name str              = DeepSeek R1 Distill Llama 8B
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   3:                           general.basename str              = DeepSeek-R1-Distill-Llama
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   4:                         general.size_label str              = 8B
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   5:                          llama.block_count u32              = 32
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   6:                       llama.context_length u32              = 131072
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   7:                     llama.embedding_length u32              = 4096
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   8:                  llama.feed_forward_length u32              = 14336
</span></span><span class="line"><span class="cl">llama_model_loader: - kv   9:                 llama.attention.head_count u32              = 32
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  10:              llama.attention.head_count_kv u32              = 8
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  11:                       llama.rope.freq_base f32              = 500000.000000
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  12:     llama.attention.layer_norm_rms_epsilon f32              = 0.000010
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  13:                          general.file_type u32              = 15
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  14:                           llama.vocab_size u32              = 128256
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  15:                 llama.rope.dimension_count u32              = 128
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  16:                       tokenizer.ggml.model str              = gpt2
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  17:                         tokenizer.ggml.pre str              = llama-bpe
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  18:                      tokenizer.ggml.tokens arr[str,128256]  = [<span class="s2">&#34;!&#34;</span>, <span class="s2">&#34;\&#34;&#34;, &#34;</span>#<span class="s2">&#34;, &#34;</span>$<span class="s2">&#34;, &#34;</span>%<span class="s2">&#34;, &#34;</span><span class="p">&amp;</span><span class="s2">&#34;, &#34;</span>&#39;<span class="s2">&#34;, ...</span>
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  19:                  tokenizer.ggml.token_type arr[i32,128256]  = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, ...
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  20:                      tokenizer.ggml.merges arr[str,280147]  = [<span class="s2">&#34;Ä  Ä &#34;</span>, <span class="s2">&#34;Ä  Ä Ä Ä &#34;</span>, <span class="s2">&#34;Ä Ä  Ä Ä &#34;</span>, <span class="s2">&#34;...</span>
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  21:                tokenizer.ggml.bos_token_id u32              = 128000
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  22:                tokenizer.ggml.eos_token_id u32              = 128001
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  23:            tokenizer.ggml.padding_token_id u32              = 128001
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  24:               tokenizer.ggml.add_bos_token bool             = true
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  25:               tokenizer.ggml.add_eos_token bool             = false
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  26:                    tokenizer.chat_template str              = {% if not add_generation_prompt is de...
</span></span><span class="line"><span class="cl">llama_model_loader: - kv  27:               general.quantization_version u32              = 2
</span></span><span class="line"><span class="cl">llama_model_loader: - type  f32:   66 tensors
</span></span><span class="line"><span class="cl">llama_model_loader: - type q4_K:  193 tensors
</span></span><span class="line"><span class="cl">llama_model_loader: - type q6_K:   33 tensors
</span></span><span class="line"><span class="cl">print_info: file format = GGUF V3 (latest)
</span></span><span class="line"><span class="cl">print_info: file type   = Q4_K - Medium
</span></span><span class="line"><span class="cl">print_info: file size   = 4.58 GiB (4.89 BPW)
</span></span><span class="line"><span class="cl">load: special_eos_id is not in special_eog_ids - the tokenizer config may be incorrect
</span></span><span class="line"><span class="cl">load: special tokens cache size = 256
</span></span><span class="line"><span class="cl">load: token to piece cache size = 0.7999 MB
</span></span><span class="line"><span class="cl">print_info: arch             = llama
</span></span><span class="line"><span class="cl">print_info: vocab_only       = 0
</span></span><span class="line"><span class="cl">print_info: n_ctx_train      = 131072
</span></span><span class="line"><span class="cl">print_info: n_embd           = 4096
</span></span><span class="line"><span class="cl">print_info: n_layer          = 32
</span></span><span class="line"><span class="cl">print_info: n_head           = 32
</span></span><span class="line"><span class="cl">print_info: n_head_kv        = 8
</span></span><span class="line"><span class="cl">print_info: n_rot            = 128
</span></span><span class="line"><span class="cl">print_info: n_swa            = 0
</span></span><span class="line"><span class="cl">print_info: n_swa_pattern    = 1
</span></span><span class="line"><span class="cl">print_info: n_embd_head_k    = 128
</span></span><span class="line"><span class="cl">print_info: n_embd_head_v    = 128
</span></span><span class="line"><span class="cl">print_info: n_gqa            = 4
</span></span><span class="line"><span class="cl">print_info: n_embd_k_gqa     = 1024
</span></span><span class="line"><span class="cl">print_info: n_embd_v_gqa     = 1024
</span></span><span class="line"><span class="cl">print_info: f_norm_eps       = 0.0e+00
</span></span><span class="line"><span class="cl">print_info: f_norm_rms_eps   = 1.0e-05
</span></span><span class="line"><span class="cl">print_info: f_clamp_kqv      = 0.0e+00
</span></span><span class="line"><span class="cl">print_info: f_max_alibi_bias = 0.0e+00
</span></span><span class="line"><span class="cl">print_info: f_logit_scale    = 0.0e+00
</span></span><span class="line"><span class="cl">print_info: f_attn_scale     = 0.0e+00
</span></span><span class="line"><span class="cl">print_info: n_ff             = 14336
</span></span><span class="line"><span class="cl">print_info: n_expert         = 0
</span></span><span class="line"><span class="cl">print_info: n_expert_used    = 0
</span></span><span class="line"><span class="cl">print_info: causal attn      = 1
</span></span><span class="line"><span class="cl">print_info: pooling type     = 0
</span></span><span class="line"><span class="cl">print_info: rope type        = 0
</span></span><span class="line"><span class="cl">print_info: rope scaling     = linear
</span></span><span class="line"><span class="cl">print_info: freq_base_train  = 500000.0
</span></span><span class="line"><span class="cl">print_info: freq_scale_train = 1
</span></span><span class="line"><span class="cl">print_info: n_ctx_orig_yarn  = 131072
</span></span><span class="line"><span class="cl">print_info: rope_finetuned   = unknown
</span></span><span class="line"><span class="cl">print_info: ssm_d_conv       = 0
</span></span><span class="line"><span class="cl">print_info: ssm_d_inner      = 0
</span></span><span class="line"><span class="cl">print_info: ssm_d_state      = 0
</span></span><span class="line"><span class="cl">print_info: ssm_dt_rank      = 0
</span></span><span class="line"><span class="cl">print_info: ssm_dt_b_c_rms   = 0
</span></span><span class="line"><span class="cl">print_info: model type       = 8B
</span></span><span class="line"><span class="cl">print_info: model params     = 8.03 B
</span></span><span class="line"><span class="cl">print_info: general.name     = DeepSeek R1 Distill Llama 8B
</span></span><span class="line"><span class="cl">print_info: vocab type       = BPE
</span></span><span class="line"><span class="cl">print_info: n_vocab          = 128256
</span></span><span class="line"><span class="cl">print_info: n_merges         = 280147
</span></span><span class="line"><span class="cl">print_info: BOS token        = 128000 &#39;<span class="p">&lt;</span>ï½œbeginâ–ofâ–sentenceï½œ<span class="p">&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: EOS token        = 128001 &#39;<span class="p">&lt;</span>ï½œendâ–ofâ–sentenceï½œ<span class="p">&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: EOT token        = 128001 &#39;<span class="p">&lt;</span>ï½œendâ–ofâ–sentenceï½œ<span class="p">&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: EOM token        = 128008 &#39;<span class="p">&lt;</span>|eom_id<span class="p">|&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: PAD token        = 128001 &#39;<span class="p">&lt;</span>ï½œendâ–ofâ–sentenceï½œ<span class="p">&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: LF token         = 198 &#39;ÄŠ&#39;
</span></span><span class="line"><span class="cl">print_info: EOG token        = 128001 &#39;<span class="p">&lt;</span>ï½œendâ–ofâ–sentenceï½œ<span class="p">&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: EOG token        = 128008 &#39;<span class="p">&lt;</span>|eom_id<span class="p">|&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: EOG token        = 128009 &#39;<span class="p">&lt;</span>|eot_id<span class="p">|&gt;</span>&#39;
</span></span><span class="line"><span class="cl">print_info: max token length = 256
</span></span><span class="line"><span class="cl">load_tensors: loading model tensors, this can take a while... (mmap = false)
</span></span><span class="line"><span class="cl">load_tensors: offloading 32 repeating layers to GPU
</span></span><span class="line"><span class="cl">load_tensors: offloading output layer to GPU
</span></span><span class="line"><span class="cl">load_tensors: offloaded 33/33 layers to GPU
</span></span><span class="line"><span class="cl">load_tensors:        CUDA0 model buffer size =  4403.49 MiB
</span></span><span class="line"><span class="cl">load_tensors:          CPU model buffer size =   281.81 MiB
</span></span><span class="line"><span class="cl">llama_context: constructing llama_context
</span></span><span class="line"><span class="cl">llama_context: n_seq_max     = 2
</span></span><span class="line"><span class="cl">llama_context: n_ctx         = 8192
</span></span><span class="line"><span class="cl">llama_context: n_ctx_per_seq = 4096
</span></span><span class="line"><span class="cl">llama_context: n_batch       = 1024
</span></span><span class="line"><span class="cl">llama_context: n_ubatch      = 512
</span></span><span class="line"><span class="cl">llama_context: causal_attn   = 1
</span></span><span class="line"><span class="cl">llama_context: flash_attn    = 0
</span></span><span class="line"><span class="cl">llama_context: freq_base     = 500000.0
</span></span><span class="line"><span class="cl">llama_context: freq_scale    = 1
</span></span><span class="line"><span class="cl">llama_context: n_ctx_per_seq (4096) <span class="p">&lt;</span> n_ctx_train (131072) -- the full capacity of the model will not be utilized
</span></span><span class="line"><span class="cl">llama_context:  CUDA_Host  output buffer size =     1.01 MiB
</span></span><span class="line"><span class="cl">init: kv_size = 8192, offload = 1, type_k = &#39;f16&#39;, type_v = &#39;f16&#39;, n_layer = 32, can_shift = 1
</span></span><span class="line"><span class="cl">init:      CUDA0 KV buffer size =  1024.00 MiB
</span></span><span class="line"><span class="cl">llama_context: KV self size  = 1024.00 MiB, K (f16):  512.00 MiB, V (f16):  512.00 MiB
</span></span><span class="line"><span class="cl">llama_context:      CUDA0 compute buffer size =   560.00 MiB
</span></span><span class="line"><span class="cl">llama_context:  CUDA_Host compute buffer size =    24.01 MiB
</span></span><span class="line"><span class="cl">llama_context: graph nodes  = 1094
</span></span><span class="line"><span class="cl">llama_context: graph splits = 2
</span></span><span class="line"><span class="cl"><span class="k">time</span>=2025-06-07T11:16:45.904+08:00 level=INFO source=server.go:628 msg=<span class="s2">&#34;llama runner started in 1.50 seconds&#34;</span>
</span></span><span class="line"><span class="cl">[GIN] 2025/06/07 - 11:16:45 <span class="p">|</span> 200 <span class="p">|</span>    1.8019804s <span class="p">|</span>       127.0.0.1 <span class="p">|</span> POST     <span class="s2">&#34;/api/chat&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ä»£ç ä¿®æ”¹">ä»£ç ä¿®æ”¹
</h2><h3 id="é—®ç­”è¿‡ç¨‹">é—®ç­”è¿‡ç¨‹
</h3><h4 id="æé—®1">æé—®1
</h4><blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">requests</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">wxauto</span> <span class="kn">import</span> <span class="n">WeChat</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åŠ è½½å†å²æ¶ˆæ¯è®°å½•</span>
</span></span><span class="line"><span class="cl"><span class="n">DB</span> <span class="o">=</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">DB</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># MONITOR_LIST = []</span>
</span></span><span class="line"><span class="cl"><span class="c1"># fp = open(&#34;users.txt&#34;, encoding=&#39;utf-8&#39;, mode=&#39;r&#39;)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># for line in fp:</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     # è¯»å–users.txtåŠ è½½ç›‘å¬ç”¨æˆ·</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     # print(line)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     MONITOR_LIST.append(line)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># fp.close()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åŠ è½½ç›‘å¬ç”¨æˆ·åˆ—è¡¨</span>
</span></span><span class="line"><span class="cl"><span class="n">MONITOR_LIST</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&#34;users.txt&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;users.txt&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>  <span class="c1"># å»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦å’Œæ¢è¡Œç¬¦</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">line</span><span class="p">:</span>  <span class="c1"># å¿½ç•¥ç©ºè¡Œ</span>
</span></span><span class="line"><span class="cl">                <span class="n">MONITOR_LIST</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;è­¦å‘Šï¼šæœªæ‰¾åˆ° users.txt æ–‡ä»¶ï¼Œå°†ç›‘å¬é»˜è®¤ç”¨æˆ·åˆ—è¡¨&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">MONITOR_LIST</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;æ²™ç³»&#34;</span><span class="p">]</span>  <span class="c1"># é»˜è®¤ç›‘å¬ç”¨æˆ·ï¼ˆç¤ºä¾‹ï¼‰</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ‰“å¼€å¾®ä¿¡</span>
</span></span><span class="line"><span class="cl"><span class="n">wx</span> <span class="o">=</span> <span class="n">WeChat</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ç›‘å¬è´¦æˆ·åˆ—è¡¨</span>
</span></span><span class="line"><span class="cl"><span class="c1"># MONITOR_LIST = [&#34;æ²™ç³»&#34;]</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">ele</span> <span class="ow">in</span> <span class="n">MONITOR_LIST</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">wx</span><span class="o">.</span><span class="n">AddListenChat</span><span class="p">(</span><span class="n">who</span> <span class="o">=</span> <span class="n">ele</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ç›‘å¬æ¶ˆæ¯</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">listen_dict</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">GetListenMessage</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">chat_win</span><span class="p">,</span> <span class="n">message_list</span> <span class="ow">in</span> <span class="n">listen_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># print(chat_win.who)</span>
</span></span><span class="line"><span class="cl">        <span class="n">chat_user</span> <span class="o">=</span> <span class="n">chat_win</span><span class="o">.</span><span class="n">who</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># è·å–æœ€æ–°èŠå¤©æ¶ˆæ¯</span>
</span></span><span class="line"><span class="cl">        <span class="n">interval_list</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">message_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s2">&#34;friend&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span>
</span></span><span class="line"><span class="cl">            <span class="n">interval_list</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&#34;role&#34;</span><span class="p">:</span> <span class="s2">&#34;user&#34;</span><span class="p">,</span> <span class="s2">&#34;content&#34;</span><span class="p">:</span> <span class="n">msg</span><span class="o">.</span><span class="n">content</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">interval_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># æ‹¼æ¥å†å²èŠå¤©è®°å½•</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;å¾®ä¿¡æ¶ˆæ¯ï¼š&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">interval_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">history_list</span> <span class="o">=</span> <span class="n">DB</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">chat_user</span><span class="p">,</span> <span class="p">[])</span>
</span></span><span class="line"><span class="cl">        <span class="n">history_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">interval_list</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># è°ƒç”¨æœ¬åœ° deepseek æ¨¡å‹</span>
</span></span><span class="line"><span class="cl">        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">url</span><span class="o">=</span><span class="s2">&#34;http://localhost:11434/api/chat&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">json</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;model&#34;</span><span class="p">:</span> <span class="s2">&#34;deepseek-r1:8b&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;message&#34;</span><span class="p">:</span> <span class="n">history_list</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;stream&#34;</span><span class="p">:</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">data_dict</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">res_msg_dict</span> <span class="o">=</span> <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># è·å– deepseek å›å¤å†…å®¹ï¼Œå¾®ä¿¡å›å¤</span>
</span></span><span class="line"><span class="cl">        <span class="n">res_content</span> <span class="o">=</span> <span class="n">res_msg_dict</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">chat_win</span><span class="o">.</span><span class="n">SendMsg</span><span class="p">(</span><span class="n">res_content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;deepseekå›å¤ï¼š&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">res_content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># ä¿å­˜æ²Ÿé€šè®°å½•</span>
</span></span><span class="line"><span class="cl">        <span class="n">history_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res_msg_dict</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">DB</span><span class="p">[</span><span class="n">chat_user</span><span class="p">]</span> <span class="o">=</span> <span class="n">history_list</span>
</span></span><span class="line"><span class="cl">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">DB</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">è¿™æ®µä»£ç åœ¨è¿è¡Œå</span><span class="err">ï¼Œ</span><span class="n">èƒ½å¤Ÿæ£€æµ‹åˆ°å½“å‰èŠå¤©ç”¨æˆ·</span><span class="err">ï¼Œ</span><span class="n">å¹¶ä¸”èƒ½å¤Ÿè·å–åˆ°ä¿¡æ¯</span><span class="err">ï¼Œ</span><span class="n">ä½†æ˜¯æ— æ³•å›å¤</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">pycharm</span> <span class="n">æŠ¥é”™å¦‚ä¸‹</span><span class="err">ï¼š</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">åˆå§‹åŒ–æˆåŠŸ</span><span class="err">ï¼Œ</span><span class="n">è·å–åˆ°å·²ç™»å½•çª—å£</span><span class="err">ï¼š</span><span class="n">æ¸…é›¨</span>
</span></span><span class="line"><span class="cl"><span class="n">å¾®ä¿¡æ¶ˆæ¯</span><span class="err">ï¼š</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s1">&#39;æµ‹è¯•&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;D:\PycharmProject\WebAutoTest\Auto_Chat\Auto_Chat.py&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">82</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">chat_win</span><span class="o">.</span><span class="n">SendMsg</span><span class="p">(</span><span class="n">res_content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;D:\PycharmProject\WebAutoTest</span><span class="se">\v</span><span class="s2">env\lib\site-packages\wxauto\elements.py&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">250</span><span class="p">,</span> <span class="ow">in</span> <span class="n">SendMsg</span>
</span></span><span class="line"><span class="cl">    <span class="k">raise</span> <span class="ne">TimeoutError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;å‘é€æ¶ˆæ¯è¶…æ—¶ --&gt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">who</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="ne">TimeoutError</span><span class="p">:</span> <span class="n">å‘é€æ¶ˆæ¯è¶…æ—¶</span> <span class="o">--&gt;</span> <span class="n">æ²™ç³»</span> <span class="o">-</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">åœ¨ç»ˆç«¯ä¸­å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">Ysam</span><span class="o">&gt;</span><span class="n">ollama</span> <span class="n">serve</span>
</span></span><span class="line"><span class="cl"><span class="mi">2025</span><span class="o">/</span><span class="mi">06</span><span class="o">/</span><span class="mi">07</span> <span class="mi">12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">11</span> <span class="n">routes</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">1233</span><span class="p">:</span> <span class="n">INFO</span> <span class="n">server</span> <span class="n">config</span> <span class="n">env</span><span class="o">=</span><span class="s2">&#34;map[CUDA_VISIBLE_DEVICES: GPU_DEVICE_ORDINAL: HIP_VISIBLE_DEVICES: HSA_OVERRIDE_GFX_VERSION: HTTPS_PROXY: HTTP_PROXY: NO_PROXY: OLLAMA_CONTEXT_LENGTH:4096 OLLAMA_DEBUG:false OLLAMA_FLASH_ATTENTION:false OLLAMA_GPU_OVERHEAD:0 OLLAMA_HOST:http://127.0.0.1:11434 OLLAMA_INTEL_GPU:false OLLAMA_KEEP_ALIVE:5m0s OLLAMA_KV_CACHE_TYPE: OLLAMA_LLM_LIBRARY: OLLAMA_LOAD_TIMEOUT:5m0s OLLAMA_MAX_LOADED_MODELS:0 OLLAMA_MAX_QUEUE:512 OLLAMA_MODELS:C:</span><span class="se">\\</span><span class="s2">Users</span><span class="se">\\</span><span class="s2">Ysam</span><span class="se">\\</span><span class="s2">.ollama</span><span class="se">\\</span><span class="s2">models OLLAMA_MULTIUSER_CACHE:false OLLAMA_NEW_ENGINE:false OLLAMA_NOHISTORY:false OLLAMA_NOPRUNE:false OLLAMA_NUM_PARALLEL:0 OLLAMA_ORIGINS:[http://localhost https://localhost http://localhost:* https://localhost:* http://127.0.0.1 https://127.0.0.1 http://127.0.0.1:* https://127.0.0.1:* http://0.0.0.0 https://0.0.0.0 http://0.0.0.0:* https://0.0.0.0:* app://* file://* tauri://* vscode-webview://* vscode-file://*] OLLAMA_SCHED_SPREAD:false ROCR_VISIBLE_DEVICES:]&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">11.166</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">images</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">463</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;total blobs: 10&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">11.166</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">images</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">470</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;total unused blobs removed: 0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">11.167</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">routes</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">1300</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;Listening on 127.0.0.1:11434 (version 0.6.8)&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">11.167</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">gpu</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">217</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;looking for compatible GPUs&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">11.167</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">gpu_windows</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">167</span> <span class="n">msg</span><span class="o">=</span><span class="n">packages</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">11.167</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">gpu_windows</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">214</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;&#34;</span> <span class="n">package</span><span class="o">=</span><span class="mi">0</span> <span class="n">cores</span><span class="o">=</span><span class="mi">12</span> <span class="n">efficiency</span><span class="o">=</span><span class="mi">0</span> <span class="n">threads</span><span class="o">=</span><span class="mi">24</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">11.758</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">WARN</span> <span class="n">source</span><span class="o">=</span><span class="n">amd_windows</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">138</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;amdgpu is not supported (supported types:[gfx1030 gfx1100 gfx1101 gfx1102 gfx1151 gfx906])&#34;</span> <span class="n">gpu_type</span><span class="o">=</span><span class="n">gfx1036</span> <span class="n">gpu</span><span class="o">=</span><span class="mi">0</span> <span class="n">library</span><span class="o">=</span><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">Ysam</span>\<span class="n">AppData</span>\<span class="n">Local</span>\<span class="n">Programs</span>\<span class="n">Ollama</span>\<span class="n">lib</span>\<span class="n">ollama</span>\<span class="n">rocm</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">11.761</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">130</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;inference compute&#34;</span> <span class="nb">id</span><span class="o">=</span><span class="n">GPU</span><span class="o">-</span><span class="mi">189333</span><span class="n">b1</span><span class="o">-</span><span class="mi">98</span><span class="n">d9</span><span class="o">-</span><span class="mi">8621</span><span class="o">-</span><span class="n">adb5</span><span class="o">-</span><span class="mi">344761953</span><span class="n">fc5</span> <span class="n">library</span><span class="o">=</span><span class="n">cuda</span> <span class="n">variant</span><span class="o">=</span><span class="n">v12</span> <span class="n">compute</span><span class="o">=</span><span class="mf">8.9</span> <span class="n">driver</span><span class="o">=</span><span class="mf">12.8</span> <span class="n">name</span><span class="o">=</span><span class="s2">&#34;NVIDIA GeForce RTX 4070 Laptop GPU&#34;</span> <span class="n">total</span><span class="o">=</span><span class="s2">&#34;8.0 GiB&#34;</span> <span class="n">available</span><span class="o">=</span><span class="s2">&#34;6.9 GiB&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.732</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">WARN</span> <span class="n">source</span><span class="o">=</span><span class="n">ggml</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">152</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;key not found&#34;</span> <span class="n">key</span><span class="o">=</span><span class="n">general</span><span class="o">.</span><span class="n">alignment</span> <span class="n">default</span><span class="o">=</span><span class="mi">32</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.754</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">WARN</span> <span class="n">source</span><span class="o">=</span><span class="n">ggml</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">152</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;key not found&#34;</span> <span class="n">key</span><span class="o">=</span><span class="n">general</span><span class="o">.</span><span class="n">alignment</span> <span class="n">default</span><span class="o">=</span><span class="mi">32</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.767</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">WARN</span> <span class="n">source</span><span class="o">=</span><span class="n">ggml</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">152</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;key not found&#34;</span> <span class="n">key</span><span class="o">=</span><span class="n">general</span><span class="o">.</span><span class="n">alignment</span> <span class="n">default</span><span class="o">=</span><span class="mi">32</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.768</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">WARN</span> <span class="n">source</span><span class="o">=</span><span class="n">ggml</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">152</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;key not found&#34;</span> <span class="n">key</span><span class="o">=</span><span class="n">llama</span><span class="o">.</span><span class="n">vision</span><span class="o">.</span><span class="n">block_count</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.768</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">WARN</span> <span class="n">source</span><span class="o">=</span><span class="n">ggml</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">152</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;key not found&#34;</span> <span class="n">key</span><span class="o">=</span><span class="n">llama</span><span class="o">.</span><span class="n">attention</span><span class="o">.</span><span class="n">key_length</span> <span class="n">default</span><span class="o">=</span><span class="mi">128</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.768</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">WARN</span> <span class="n">source</span><span class="o">=</span><span class="n">ggml</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">152</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;key not found&#34;</span> <span class="n">key</span><span class="o">=</span><span class="n">llama</span><span class="o">.</span><span class="n">attention</span><span class="o">.</span><span class="n">value_length</span> <span class="n">default</span><span class="o">=</span><span class="mi">128</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.768</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">sched</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">754</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;new model will fit in available VRAM in single GPU, loading&#34;</span> <span class="n">model</span><span class="o">=</span><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">Ysam</span>\<span class="o">.</span><span class="n">ollama</span>\<span class="n">models</span>\<span class="n">blobs</span>\<span class="n">sha256</span><span class="o">-</span><span class="mi">6340</span><span class="n">dc3229b0d08ea9cc49b75d4098702983e17b4c096d57afbbf2ffc813f2be</span> <span class="n">gpu</span><span class="o">=</span><span class="n">GPU</span><span class="o">-</span><span class="mi">189333</span><span class="n">b1</span><span class="o">-</span><span class="mi">98</span><span class="n">d9</span><span class="o">-</span><span class="mi">8621</span><span class="o">-</span><span class="n">adb5</span><span class="o">-</span><span class="mi">344761953</span><span class="n">fc5</span> <span class="n">parallel</span><span class="o">=</span><span class="mi">2</span> <span class="n">available</span><span class="o">=</span><span class="mi">7317225472</span> <span class="n">required</span><span class="o">=</span><span class="s2">&#34;6.5 GiB&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.777</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">server</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">106</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;system memory&#34;</span> <span class="n">total</span><span class="o">=</span><span class="s2">&#34;31.3 GiB&#34;</span> <span class="n">free</span><span class="o">=</span><span class="s2">&#34;18.0 GiB&#34;</span> <span class="n">free_swap</span><span class="o">=</span><span class="s2">&#34;22.8 GiB&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.777</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">WARN</span> <span class="n">source</span><span class="o">=</span><span class="n">ggml</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">152</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;key not found&#34;</span> <span class="n">key</span><span class="o">=</span><span class="n">llama</span><span class="o">.</span><span class="n">vision</span><span class="o">.</span><span class="n">block_count</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.777</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">WARN</span> <span class="n">source</span><span class="o">=</span><span class="n">ggml</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">152</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;key not found&#34;</span> <span class="n">key</span><span class="o">=</span><span class="n">llama</span><span class="o">.</span><span class="n">attention</span><span class="o">.</span><span class="n">key_length</span> <span class="n">default</span><span class="o">=</span><span class="mi">128</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.777</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">WARN</span> <span class="n">source</span><span class="o">=</span><span class="n">ggml</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">152</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;key not found&#34;</span> <span class="n">key</span><span class="o">=</span><span class="n">llama</span><span class="o">.</span><span class="n">attention</span><span class="o">.</span><span class="n">value_length</span> <span class="n">default</span><span class="o">=</span><span class="mi">128</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.778</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">server</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">139</span> <span class="n">msg</span><span class="o">=</span><span class="n">offload</span> <span class="n">library</span><span class="o">=</span><span class="n">cuda</span> <span class="n">layers</span><span class="o">.</span><span class="n">requested</span><span class="o">=-</span><span class="mi">1</span> <span class="n">layers</span><span class="o">.</span><span class="n">model</span><span class="o">=</span><span class="mi">33</span> <span class="n">layers</span><span class="o">.</span><span class="n">offload</span><span class="o">=</span><span class="mi">33</span> <span class="n">layers</span><span class="o">.</span><span class="n">split</span><span class="o">=</span><span class="s2">&#34;&#34;</span> <span class="n">memory</span><span class="o">.</span><span class="n">available</span><span class="o">=</span><span class="s2">&#34;[6.8 GiB]&#34;</span> <span class="n">memory</span><span class="o">.</span><span class="n">gpu_overhead</span><span class="o">=</span><span class="s2">&#34;0 B&#34;</span> <span class="n">memory</span><span class="o">.</span><span class="n">required</span><span class="o">.</span><span class="n">full</span><span class="o">=</span><span class="s2">&#34;6.5 GiB&#34;</span> <span class="n">memory</span><span class="o">.</span><span class="n">required</span><span class="o">.</span><span class="n">partial</span><span class="o">=</span><span class="s2">&#34;6.5 GiB&#34;</span> <span class="n">memory</span><span class="o">.</span><span class="n">required</span><span class="o">.</span><span class="n">kv</span><span class="o">=</span><span class="s2">&#34;1.0 GiB&#34;</span> <span class="n">memory</span><span class="o">.</span><span class="n">required</span><span class="o">.</span><span class="n">allocations</span><span class="o">=</span><span class="s2">&#34;[6.5 GiB]&#34;</span> <span class="n">memory</span><span class="o">.</span><span class="n">weights</span><span class="o">.</span><span class="n">total</span><span class="o">=</span><span class="s2">&#34;4.3 GiB&#34;</span> <span class="n">memory</span><span class="o">.</span><span class="n">weights</span><span class="o">.</span><span class="n">repeating</span><span class="o">=</span><span class="s2">&#34;3.9 GiB&#34;</span> <span class="n">memory</span><span class="o">.</span><span class="n">weights</span><span class="o">.</span><span class="n">nonrepeating</span><span class="o">=</span><span class="s2">&#34;411.0 MiB&#34;</span> <span class="n">memory</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">full</span><span class="o">=</span><span class="s2">&#34;560.0 MiB&#34;</span> <span class="n">memory</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">partial</span><span class="o">=</span><span class="s2">&#34;677.5 MiB&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="n">loaded</span> <span class="n">meta</span> <span class="n">data</span> <span class="k">with</span> <span class="mi">28</span> <span class="n">key</span><span class="o">-</span><span class="n">value</span> <span class="n">pairs</span> <span class="ow">and</span> <span class="mi">292</span> <span class="n">tensors</span> <span class="kn">from</span> <span class="nn">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">Ysam</span>\<span class="o">.</span><span class="n">ollama</span>\<span class="n">models</span>\<span class="n">blobs</span>\<span class="n">sha256</span><span class="o">-</span><span class="mi">6340</span><span class="n">dc3229b0d08ea9cc49b75d4098702983e17b4c096d57afbbf2ffc813f2be</span> <span class="p">(</span><span class="n">version</span> <span class="n">GGUF</span> <span class="n">V3</span> <span class="p">(</span><span class="n">latest</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="n">Dumping</span> <span class="n">metadata</span> <span class="n">keys</span><span class="o">/</span><span class="n">values</span><span class="o">.</span> <span class="n">Note</span><span class="p">:</span> <span class="n">KV</span> <span class="n">overrides</span> <span class="n">do</span> <span class="ow">not</span> <span class="n">apply</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">output</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">0</span><span class="p">:</span>                       <span class="n">general</span><span class="o">.</span><span class="n">architecture</span> <span class="nb">str</span>              <span class="o">=</span> <span class="n">llama</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">1</span><span class="p">:</span>                               <span class="n">general</span><span class="o">.</span><span class="n">type</span> <span class="nb">str</span>              <span class="o">=</span> <span class="n">model</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">2</span><span class="p">:</span>                               <span class="n">general</span><span class="o">.</span><span class="n">name</span> <span class="nb">str</span>              <span class="o">=</span> <span class="n">DeepSeek</span> <span class="n">R1</span> <span class="n">Distill</span> <span class="n">Llama</span> <span class="mi">8</span><span class="n">B</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">3</span><span class="p">:</span>                           <span class="n">general</span><span class="o">.</span><span class="n">basename</span> <span class="nb">str</span>              <span class="o">=</span> <span class="n">DeepSeek</span><span class="o">-</span><span class="n">R1</span><span class="o">-</span><span class="n">Distill</span><span class="o">-</span><span class="n">Llama</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">4</span><span class="p">:</span>                         <span class="n">general</span><span class="o">.</span><span class="n">size_label</span> <span class="nb">str</span>              <span class="o">=</span> <span class="mi">8</span><span class="n">B</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">5</span><span class="p">:</span>                          <span class="n">llama</span><span class="o">.</span><span class="n">block_count</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">32</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">6</span><span class="p">:</span>                       <span class="n">llama</span><span class="o">.</span><span class="n">context_length</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">131072</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">7</span><span class="p">:</span>                     <span class="n">llama</span><span class="o">.</span><span class="n">embedding_length</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">4096</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">8</span><span class="p">:</span>                  <span class="n">llama</span><span class="o">.</span><span class="n">feed_forward_length</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">14336</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">9</span><span class="p">:</span>                 <span class="n">llama</span><span class="o">.</span><span class="n">attention</span><span class="o">.</span><span class="n">head_count</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">32</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">10</span><span class="p">:</span>              <span class="n">llama</span><span class="o">.</span><span class="n">attention</span><span class="o">.</span><span class="n">head_count_kv</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">8</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">11</span><span class="p">:</span>                       <span class="n">llama</span><span class="o">.</span><span class="n">rope</span><span class="o">.</span><span class="n">freq_base</span> <span class="n">f32</span>              <span class="o">=</span> <span class="mf">500000.000000</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">12</span><span class="p">:</span>     <span class="n">llama</span><span class="o">.</span><span class="n">attention</span><span class="o">.</span><span class="n">layer_norm_rms_epsilon</span> <span class="n">f32</span>              <span class="o">=</span> <span class="mf">0.000010</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">13</span><span class="p">:</span>                          <span class="n">general</span><span class="o">.</span><span class="n">file_type</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">15</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">14</span><span class="p">:</span>                           <span class="n">llama</span><span class="o">.</span><span class="n">vocab_size</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">128256</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">15</span><span class="p">:</span>                 <span class="n">llama</span><span class="o">.</span><span class="n">rope</span><span class="o">.</span><span class="n">dimension_count</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">128</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">16</span><span class="p">:</span>                       <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">model</span> <span class="nb">str</span>              <span class="o">=</span> <span class="n">gpt2</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">17</span><span class="p">:</span>                         <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">pre</span> <span class="nb">str</span>              <span class="o">=</span> <span class="n">llama</span><span class="o">-</span><span class="n">bpe</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">18</span><span class="p">:</span>                      <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">tokens</span> <span class="n">arr</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="mi">128256</span><span class="p">]</span>  <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;!&#34;</span><span class="p">,</span> <span class="s2">&#34;</span><span class="se">\&#34;</span><span class="s2">&#34;</span><span class="p">,</span> <span class="s2">&#34;#&#34;</span><span class="p">,</span> <span class="s2">&#34;$&#34;</span><span class="p">,</span> <span class="s2">&#34;%&#34;</span><span class="p">,</span> <span class="s2">&#34;&amp;&#34;</span><span class="p">,</span> <span class="s2">&#34;&#39;&#34;</span><span class="p">,</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">19</span><span class="p">:</span>                  <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">token_type</span> <span class="n">arr</span><span class="p">[</span><span class="n">i32</span><span class="p">,</span><span class="mi">128256</span><span class="p">]</span>  <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">20</span><span class="p">:</span>                      <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">merges</span> <span class="n">arr</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="mi">280147</span><span class="p">]</span>  <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;Ä  Ä &#34;</span><span class="p">,</span> <span class="s2">&#34;Ä  Ä Ä Ä &#34;</span><span class="p">,</span> <span class="s2">&#34;Ä Ä  Ä Ä &#34;</span><span class="p">,</span> <span class="s2">&#34;...</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">21</span><span class="p">:</span>                <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">bos_token_id</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">128000</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">22</span><span class="p">:</span>                <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">eos_token_id</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">128001</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">23</span><span class="p">:</span>            <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">padding_token_id</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">128001</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">24</span><span class="p">:</span>               <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">add_bos_token</span> <span class="nb">bool</span>             <span class="o">=</span> <span class="n">true</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">25</span><span class="p">:</span>               <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">add_eos_token</span> <span class="nb">bool</span>             <span class="o">=</span> <span class="n">false</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">26</span><span class="p">:</span>                    <span class="n">tokenizer</span><span class="o">.</span><span class="n">chat_template</span> <span class="nb">str</span>              <span class="o">=</span> <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">add_generation_prompt</span> <span class="ow">is</span> <span class="n">de</span><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">27</span><span class="p">:</span>               <span class="n">general</span><span class="o">.</span><span class="n">quantization_version</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="nb">type</span>  <span class="n">f32</span><span class="p">:</span>   <span class="mi">66</span> <span class="n">tensors</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="nb">type</span> <span class="n">q4_K</span><span class="p">:</span>  <span class="mi">193</span> <span class="n">tensors</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="nb">type</span> <span class="n">q6_K</span><span class="p">:</span>   <span class="mi">33</span> <span class="n">tensors</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">file</span> <span class="nb">format</span> <span class="o">=</span> <span class="n">GGUF</span> <span class="n">V3</span> <span class="p">(</span><span class="n">latest</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">file</span> <span class="nb">type</span>   <span class="o">=</span> <span class="n">Q4_K</span> <span class="o">-</span> <span class="n">Medium</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">file</span> <span class="n">size</span>   <span class="o">=</span> <span class="mf">4.58</span> <span class="n">GiB</span> <span class="p">(</span><span class="mf">4.89</span> <span class="n">BPW</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">load</span><span class="p">:</span> <span class="n">special_eos_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">special_eog_ids</span> <span class="o">-</span> <span class="n">the</span> <span class="n">tokenizer</span> <span class="n">config</span> <span class="n">may</span> <span class="n">be</span> <span class="n">incorrect</span>
</span></span><span class="line"><span class="cl"><span class="n">load</span><span class="p">:</span> <span class="n">special</span> <span class="n">tokens</span> <span class="n">cache</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">256</span>
</span></span><span class="line"><span class="cl"><span class="n">load</span><span class="p">:</span> <span class="n">token</span> <span class="n">to</span> <span class="n">piece</span> <span class="n">cache</span> <span class="n">size</span> <span class="o">=</span> <span class="mf">0.7999</span> <span class="n">MB</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">arch</span>             <span class="o">=</span> <span class="n">llama</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">vocab_only</span>       <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">model</span> <span class="nb">type</span>       <span class="o">=</span> <span class="err">?</span><span class="n">B</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">model</span> <span class="n">params</span>     <span class="o">=</span> <span class="mf">8.03</span> <span class="n">B</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">general</span><span class="o">.</span><span class="n">name</span>     <span class="o">=</span> <span class="n">DeepSeek</span> <span class="n">R1</span> <span class="n">Distill</span> <span class="n">Llama</span> <span class="mi">8</span><span class="n">B</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">vocab</span> <span class="nb">type</span>       <span class="o">=</span> <span class="n">BPE</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_vocab</span>          <span class="o">=</span> <span class="mi">128256</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_merges</span>         <span class="o">=</span> <span class="mi">280147</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">BOS</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128000</span> <span class="s1">&#39;&lt;ï½œbeginâ–ofâ–sentenceï½œ&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">EOS</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128001</span> <span class="s1">&#39;&lt;ï½œendâ–ofâ–sentenceï½œ&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">EOT</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128001</span> <span class="s1">&#39;&lt;ï½œendâ–ofâ–sentenceï½œ&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">EOM</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128008</span> <span class="s1">&#39;&lt;|eom_id|&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">PAD</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128001</span> <span class="s1">&#39;&lt;ï½œendâ–ofâ–sentenceï½œ&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">LF</span> <span class="n">token</span>         <span class="o">=</span> <span class="mi">198</span> <span class="s1">&#39;ÄŠ&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">EOG</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128001</span> <span class="s1">&#39;&lt;ï½œendâ–ofâ–sentenceï½œ&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">EOG</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128008</span> <span class="s1">&#39;&lt;|eom_id|&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">EOG</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128009</span> <span class="s1">&#39;&lt;|eot_id|&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="nb">max</span> <span class="n">token</span> <span class="n">length</span> <span class="o">=</span> <span class="mi">256</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_load</span><span class="p">:</span> <span class="n">vocab</span> <span class="n">only</span> <span class="o">-</span> <span class="n">skipping</span> <span class="n">tensors</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.965</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">server</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">410</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;starting llama server&#34;</span> <span class="n">cmd</span><span class="o">=</span><span class="s2">&#34;C:</span><span class="se">\\</span><span class="s2">Users</span><span class="se">\\</span><span class="s2">Ysam</span><span class="se">\\</span><span class="s2">AppData</span><span class="se">\\</span><span class="s2">Local</span><span class="se">\\</span><span class="s2">Programs</span><span class="se">\\</span><span class="s2">Ollama</span><span class="se">\\</span><span class="s2">ollama.exe runner --model C:</span><span class="se">\\</span><span class="s2">Users</span><span class="se">\\</span><span class="s2">Ysam</span><span class="se">\\</span><span class="s2">.ollama</span><span class="se">\\</span><span class="s2">models</span><span class="se">\\</span><span class="s2">blobs</span><span class="se">\\</span><span class="s2">sha256-6340dc3229b0d08ea9cc49b75d4098702983e17b4c096d57afbbf2ffc813f2be --ctx-size 8192 --batch-size 512 --n-gpu-layers 33 --threads 12 --no-mmap --parallel 2 --port 59718&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.969</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">sched</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">452</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;loaded runners&#34;</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.969</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">server</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">589</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;waiting for llama runner to start responding&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.969</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">server</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">623</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;waiting for server to become available&#34;</span> <span class="n">status</span><span class="o">=</span><span class="s2">&#34;llm server error&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">29.988</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">runner</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">853</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;starting go runner&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">load_backend</span><span class="p">:</span> <span class="n">loaded</span> <span class="n">CPU</span> <span class="n">backend</span> <span class="kn">from</span> <span class="nn">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">Ysam</span>\<span class="n">AppData</span>\<span class="n">Local</span>\<span class="n">Programs</span>\<span class="n">Ollama</span>\<span class="n">lib</span>\<span class="n">ollama</span>\<span class="n">ggml</span><span class="o">-</span><span class="n">cpu</span><span class="o">-</span><span class="n">icelake</span><span class="o">.</span><span class="n">dll</span>
</span></span><span class="line"><span class="cl"><span class="n">ggml_cuda_init</span><span class="p">:</span> <span class="n">GGML_CUDA_FORCE_MMQ</span><span class="p">:</span>    <span class="n">no</span>
</span></span><span class="line"><span class="cl"><span class="n">ggml_cuda_init</span><span class="p">:</span> <span class="n">GGML_CUDA_FORCE_CUBLAS</span><span class="p">:</span> <span class="n">no</span>
</span></span><span class="line"><span class="cl"><span class="n">ggml_cuda_init</span><span class="p">:</span> <span class="n">found</span> <span class="mi">1</span> <span class="n">CUDA</span> <span class="n">devices</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">Device</span> <span class="mi">0</span><span class="p">:</span> <span class="n">NVIDIA</span> <span class="n">GeForce</span> <span class="n">RTX</span> <span class="mi">4070</span> <span class="n">Laptop</span> <span class="n">GPU</span><span class="p">,</span> <span class="n">compute</span> <span class="n">capability</span> <span class="mf">8.9</span><span class="p">,</span> <span class="n">VMM</span><span class="p">:</span> <span class="n">yes</span>
</span></span><span class="line"><span class="cl"><span class="n">load_backend</span><span class="p">:</span> <span class="n">loaded</span> <span class="n">CUDA</span> <span class="n">backend</span> <span class="kn">from</span> <span class="nn">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">Ysam</span>\<span class="n">AppData</span>\<span class="n">Local</span>\<span class="n">Programs</span>\<span class="n">Ollama</span>\<span class="n">lib</span>\<span class="n">ollama</span>\<span class="n">cuda_v12</span>\<span class="n">ggml</span><span class="o">-</span><span class="n">cuda</span><span class="o">.</span><span class="n">dll</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">30.307</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">ggml</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">103</span> <span class="n">msg</span><span class="o">=</span><span class="n">system</span> <span class="n">CPU</span><span class="mf">.0</span><span class="o">.</span><span class="n">SSE3</span><span class="o">=</span><span class="mi">1</span> <span class="n">CPU</span><span class="mf">.0</span><span class="o">.</span><span class="n">SSSE3</span><span class="o">=</span><span class="mi">1</span> <span class="n">CPU</span><span class="mf">.0</span><span class="o">.</span><span class="n">AVX</span><span class="o">=</span><span class="mi">1</span> <span class="n">CPU</span><span class="mf">.0</span><span class="o">.</span><span class="n">AVX2</span><span class="o">=</span><span class="mi">1</span> <span class="n">CPU</span><span class="mf">.0</span><span class="o">.</span><span class="n">F16C</span><span class="o">=</span><span class="mi">1</span> <span class="n">CPU</span><span class="mf">.0</span><span class="o">.</span><span class="n">FMA</span><span class="o">=</span><span class="mi">1</span> <span class="n">CPU</span><span class="mf">.0</span><span class="o">.</span><span class="n">BMI2</span><span class="o">=</span><span class="mi">1</span> <span class="n">CPU</span><span class="mf">.0</span><span class="o">.</span><span class="n">AVX512</span><span class="o">=</span><span class="mi">1</span> <span class="n">CPU</span><span class="mf">.0</span><span class="o">.</span><span class="n">AVX512_VBMI</span><span class="o">=</span><span class="mi">1</span> <span class="n">CPU</span><span class="mf">.0</span><span class="o">.</span><span class="n">AVX512_VNNI</span><span class="o">=</span><span class="mi">1</span> <span class="n">CPU</span><span class="mf">.0</span><span class="o">.</span><span class="n">LLAMAFILE</span><span class="o">=</span><span class="mi">1</span> <span class="n">CPU</span><span class="mf">.1</span><span class="o">.</span><span class="n">LLAMAFILE</span><span class="o">=</span><span class="mi">1</span> <span class="n">CUDA</span><span class="mf">.0</span><span class="o">.</span><span class="n">ARCHS</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span><span class="mi">600</span><span class="p">,</span><span class="mi">610</span><span class="p">,</span><span class="mi">700</span><span class="p">,</span><span class="mi">750</span><span class="p">,</span><span class="mi">800</span><span class="p">,</span><span class="mi">860</span><span class="p">,</span><span class="mi">870</span><span class="p">,</span><span class="mi">890</span><span class="p">,</span><span class="mi">900</span><span class="p">,</span><span class="mi">1200</span> <span class="n">CUDA</span><span class="mf">.0</span><span class="o">.</span><span class="n">USE_GRAPHS</span><span class="o">=</span><span class="mi">1</span> <span class="n">CUDA</span><span class="mf">.0</span><span class="o">.</span><span class="n">PEER_MAX_BATCH_SIZE</span><span class="o">=</span><span class="mi">128</span> <span class="n">compiler</span><span class="o">=</span><span class="n">cgo</span><span class="p">(</span><span class="n">clang</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">30.308</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">runner</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">913</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;Server listening on 127.0.0.1:59718&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_load_from_file_impl</span><span class="p">:</span> <span class="n">using</span> <span class="n">device</span> <span class="n">CUDA0</span> <span class="p">(</span><span class="n">NVIDIA</span> <span class="n">GeForce</span> <span class="n">RTX</span> <span class="mi">4070</span> <span class="n">Laptop</span> <span class="n">GPU</span><span class="p">)</span> <span class="o">-</span> <span class="mi">7056</span> <span class="n">MiB</span> <span class="n">free</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="n">loaded</span> <span class="n">meta</span> <span class="n">data</span> <span class="k">with</span> <span class="mi">28</span> <span class="n">key</span><span class="o">-</span><span class="n">value</span> <span class="n">pairs</span> <span class="ow">and</span> <span class="mi">292</span> <span class="n">tensors</span> <span class="kn">from</span> <span class="nn">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">Ysam</span>\<span class="o">.</span><span class="n">ollama</span>\<span class="n">models</span>\<span class="n">blobs</span>\<span class="n">sha256</span><span class="o">-</span><span class="mi">6340</span><span class="n">dc3229b0d08ea9cc49b75d4098702983e17b4c096d57afbbf2ffc813f2be</span> <span class="p">(</span><span class="n">version</span> <span class="n">GGUF</span> <span class="n">V3</span> <span class="p">(</span><span class="n">latest</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="n">Dumping</span> <span class="n">metadata</span> <span class="n">keys</span><span class="o">/</span><span class="n">values</span><span class="o">.</span> <span class="n">Note</span><span class="p">:</span> <span class="n">KV</span> <span class="n">overrides</span> <span class="n">do</span> <span class="ow">not</span> <span class="n">apply</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">output</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">0</span><span class="p">:</span>                       <span class="n">general</span><span class="o">.</span><span class="n">architecture</span> <span class="nb">str</span>              <span class="o">=</span> <span class="n">llama</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">1</span><span class="p">:</span>                               <span class="n">general</span><span class="o">.</span><span class="n">type</span> <span class="nb">str</span>              <span class="o">=</span> <span class="n">model</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">2</span><span class="p">:</span>                               <span class="n">general</span><span class="o">.</span><span class="n">name</span> <span class="nb">str</span>              <span class="o">=</span> <span class="n">DeepSeek</span> <span class="n">R1</span> <span class="n">Distill</span> <span class="n">Llama</span> <span class="mi">8</span><span class="n">B</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">3</span><span class="p">:</span>                           <span class="n">general</span><span class="o">.</span><span class="n">basename</span> <span class="nb">str</span>              <span class="o">=</span> <span class="n">DeepSeek</span><span class="o">-</span><span class="n">R1</span><span class="o">-</span><span class="n">Distill</span><span class="o">-</span><span class="n">Llama</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">4</span><span class="p">:</span>                         <span class="n">general</span><span class="o">.</span><span class="n">size_label</span> <span class="nb">str</span>              <span class="o">=</span> <span class="mi">8</span><span class="n">B</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">5</span><span class="p">:</span>                          <span class="n">llama</span><span class="o">.</span><span class="n">block_count</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">32</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">6</span><span class="p">:</span>                       <span class="n">llama</span><span class="o">.</span><span class="n">context_length</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">131072</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">7</span><span class="p">:</span>                     <span class="n">llama</span><span class="o">.</span><span class="n">embedding_length</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">4096</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">8</span><span class="p">:</span>                  <span class="n">llama</span><span class="o">.</span><span class="n">feed_forward_length</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">14336</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>   <span class="mi">9</span><span class="p">:</span>                 <span class="n">llama</span><span class="o">.</span><span class="n">attention</span><span class="o">.</span><span class="n">head_count</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">32</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">10</span><span class="p">:</span>              <span class="n">llama</span><span class="o">.</span><span class="n">attention</span><span class="o">.</span><span class="n">head_count_kv</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">8</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">11</span><span class="p">:</span>                       <span class="n">llama</span><span class="o">.</span><span class="n">rope</span><span class="o">.</span><span class="n">freq_base</span> <span class="n">f32</span>              <span class="o">=</span> <span class="mf">500000.000000</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">12</span><span class="p">:</span>     <span class="n">llama</span><span class="o">.</span><span class="n">attention</span><span class="o">.</span><span class="n">layer_norm_rms_epsilon</span> <span class="n">f32</span>              <span class="o">=</span> <span class="mf">0.000010</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">13</span><span class="p">:</span>                          <span class="n">general</span><span class="o">.</span><span class="n">file_type</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">15</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">14</span><span class="p">:</span>                           <span class="n">llama</span><span class="o">.</span><span class="n">vocab_size</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">128256</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">15</span><span class="p">:</span>                 <span class="n">llama</span><span class="o">.</span><span class="n">rope</span><span class="o">.</span><span class="n">dimension_count</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">128</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">16</span><span class="p">:</span>                       <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">model</span> <span class="nb">str</span>              <span class="o">=</span> <span class="n">gpt2</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">17</span><span class="p">:</span>                         <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">pre</span> <span class="nb">str</span>              <span class="o">=</span> <span class="n">llama</span><span class="o">-</span><span class="n">bpe</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">18</span><span class="p">:</span>                      <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">tokens</span> <span class="n">arr</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="mi">128256</span><span class="p">]</span>  <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;!&#34;</span><span class="p">,</span> <span class="s2">&#34;</span><span class="se">\&#34;</span><span class="s2">&#34;</span><span class="p">,</span> <span class="s2">&#34;#&#34;</span><span class="p">,</span> <span class="s2">&#34;$&#34;</span><span class="p">,</span> <span class="s2">&#34;%&#34;</span><span class="p">,</span> <span class="s2">&#34;&amp;&#34;</span><span class="p">,</span> <span class="s2">&#34;&#39;&#34;</span><span class="p">,</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">19</span><span class="p">:</span>                  <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">token_type</span> <span class="n">arr</span><span class="p">[</span><span class="n">i32</span><span class="p">,</span><span class="mi">128256</span><span class="p">]</span>  <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">20</span><span class="p">:</span>                      <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">merges</span> <span class="n">arr</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="mi">280147</span><span class="p">]</span>  <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;Ä  Ä &#34;</span><span class="p">,</span> <span class="s2">&#34;Ä  Ä Ä Ä &#34;</span><span class="p">,</span> <span class="s2">&#34;Ä Ä  Ä Ä &#34;</span><span class="p">,</span> <span class="s2">&#34;...</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">21</span><span class="p">:</span>                <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">bos_token_id</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">128000</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">22</span><span class="p">:</span>                <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">eos_token_id</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">128001</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">23</span><span class="p">:</span>            <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">padding_token_id</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">128001</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">24</span><span class="p">:</span>               <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">add_bos_token</span> <span class="nb">bool</span>             <span class="o">=</span> <span class="n">true</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">25</span><span class="p">:</span>               <span class="n">tokenizer</span><span class="o">.</span><span class="n">ggml</span><span class="o">.</span><span class="n">add_eos_token</span> <span class="nb">bool</span>             <span class="o">=</span> <span class="n">false</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">26</span><span class="p">:</span>                    <span class="n">tokenizer</span><span class="o">.</span><span class="n">chat_template</span> <span class="nb">str</span>              <span class="o">=</span> <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">add_generation_prompt</span> <span class="ow">is</span> <span class="n">de</span><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="n">kv</span>  <span class="mi">27</span><span class="p">:</span>               <span class="n">general</span><span class="o">.</span><span class="n">quantization_version</span> <span class="n">u32</span>              <span class="o">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="nb">type</span>  <span class="n">f32</span><span class="p">:</span>   <span class="mi">66</span> <span class="n">tensors</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="nb">type</span> <span class="n">q4_K</span><span class="p">:</span>  <span class="mi">193</span> <span class="n">tensors</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_model_loader</span><span class="p">:</span> <span class="o">-</span> <span class="nb">type</span> <span class="n">q6_K</span><span class="p">:</span>   <span class="mi">33</span> <span class="n">tensors</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">file</span> <span class="nb">format</span> <span class="o">=</span> <span class="n">GGUF</span> <span class="n">V3</span> <span class="p">(</span><span class="n">latest</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">file</span> <span class="nb">type</span>   <span class="o">=</span> <span class="n">Q4_K</span> <span class="o">-</span> <span class="n">Medium</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">file</span> <span class="n">size</span>   <span class="o">=</span> <span class="mf">4.58</span> <span class="n">GiB</span> <span class="p">(</span><span class="mf">4.89</span> <span class="n">BPW</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">30.471</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">server</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">623</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;waiting for server to become available&#34;</span> <span class="n">status</span><span class="o">=</span><span class="s2">&#34;llm server loading model&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">load</span><span class="p">:</span> <span class="n">special_eos_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">special_eog_ids</span> <span class="o">-</span> <span class="n">the</span> <span class="n">tokenizer</span> <span class="n">config</span> <span class="n">may</span> <span class="n">be</span> <span class="n">incorrect</span>
</span></span><span class="line"><span class="cl"><span class="n">load</span><span class="p">:</span> <span class="n">special</span> <span class="n">tokens</span> <span class="n">cache</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">256</span>
</span></span><span class="line"><span class="cl"><span class="n">load</span><span class="p">:</span> <span class="n">token</span> <span class="n">to</span> <span class="n">piece</span> <span class="n">cache</span> <span class="n">size</span> <span class="o">=</span> <span class="mf">0.7999</span> <span class="n">MB</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">arch</span>             <span class="o">=</span> <span class="n">llama</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">vocab_only</span>       <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_ctx_train</span>      <span class="o">=</span> <span class="mi">131072</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_embd</span>           <span class="o">=</span> <span class="mi">4096</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_layer</span>          <span class="o">=</span> <span class="mi">32</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_head</span>           <span class="o">=</span> <span class="mi">32</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_head_kv</span>        <span class="o">=</span> <span class="mi">8</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_rot</span>            <span class="o">=</span> <span class="mi">128</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_swa</span>            <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_swa_pattern</span>    <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_embd_head_k</span>    <span class="o">=</span> <span class="mi">128</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_embd_head_v</span>    <span class="o">=</span> <span class="mi">128</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_gqa</span>            <span class="o">=</span> <span class="mi">4</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_embd_k_gqa</span>     <span class="o">=</span> <span class="mi">1024</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_embd_v_gqa</span>     <span class="o">=</span> <span class="mi">1024</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">f_norm_eps</span>       <span class="o">=</span> <span class="mf">0.0e+00</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">f_norm_rms_eps</span>   <span class="o">=</span> <span class="mf">1.0e-05</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">f_clamp_kqv</span>      <span class="o">=</span> <span class="mf">0.0e+00</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">f_max_alibi_bias</span> <span class="o">=</span> <span class="mf">0.0e+00</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">f_logit_scale</span>    <span class="o">=</span> <span class="mf">0.0e+00</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">f_attn_scale</span>     <span class="o">=</span> <span class="mf">0.0e+00</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_ff</span>             <span class="o">=</span> <span class="mi">14336</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_expert</span>         <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_expert_used</span>    <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">causal</span> <span class="n">attn</span>      <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">pooling</span> <span class="nb">type</span>     <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">rope</span> <span class="nb">type</span>        <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">rope</span> <span class="n">scaling</span>     <span class="o">=</span> <span class="n">linear</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">freq_base_train</span>  <span class="o">=</span> <span class="mf">500000.0</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">freq_scale_train</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_ctx_orig_yarn</span>  <span class="o">=</span> <span class="mi">131072</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">rope_finetuned</span>   <span class="o">=</span> <span class="n">unknown</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">ssm_d_conv</span>       <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">ssm_d_inner</span>      <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">ssm_d_state</span>      <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">ssm_dt_rank</span>      <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">ssm_dt_b_c_rms</span>   <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">model</span> <span class="nb">type</span>       <span class="o">=</span> <span class="mi">8</span><span class="n">B</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">model</span> <span class="n">params</span>     <span class="o">=</span> <span class="mf">8.03</span> <span class="n">B</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">general</span><span class="o">.</span><span class="n">name</span>     <span class="o">=</span> <span class="n">DeepSeek</span> <span class="n">R1</span> <span class="n">Distill</span> <span class="n">Llama</span> <span class="mi">8</span><span class="n">B</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">vocab</span> <span class="nb">type</span>       <span class="o">=</span> <span class="n">BPE</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_vocab</span>          <span class="o">=</span> <span class="mi">128256</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">n_merges</span>         <span class="o">=</span> <span class="mi">280147</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">BOS</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128000</span> <span class="s1">&#39;&lt;ï½œbeginâ–ofâ–sentenceï½œ&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">EOS</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128001</span> <span class="s1">&#39;&lt;ï½œendâ–ofâ–sentenceï½œ&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">EOT</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128001</span> <span class="s1">&#39;&lt;ï½œendâ–ofâ–sentenceï½œ&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">EOM</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128008</span> <span class="s1">&#39;&lt;|eom_id|&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">PAD</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128001</span> <span class="s1">&#39;&lt;ï½œendâ–ofâ–sentenceï½œ&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">LF</span> <span class="n">token</span>         <span class="o">=</span> <span class="mi">198</span> <span class="s1">&#39;ÄŠ&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">EOG</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128001</span> <span class="s1">&#39;&lt;ï½œendâ–ofâ–sentenceï½œ&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">EOG</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128008</span> <span class="s1">&#39;&lt;|eom_id|&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="n">EOG</span> <span class="n">token</span>        <span class="o">=</span> <span class="mi">128009</span> <span class="s1">&#39;&lt;|eot_id|&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">print_info</span><span class="p">:</span> <span class="nb">max</span> <span class="n">token</span> <span class="n">length</span> <span class="o">=</span> <span class="mi">256</span>
</span></span><span class="line"><span class="cl"><span class="n">load_tensors</span><span class="p">:</span> <span class="n">loading</span> <span class="n">model</span> <span class="n">tensors</span><span class="p">,</span> <span class="n">this</span> <span class="n">can</span> <span class="n">take</span> <span class="n">a</span> <span class="k">while</span><span class="o">...</span> <span class="p">(</span><span class="n">mmap</span> <span class="o">=</span> <span class="n">false</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">load_tensors</span><span class="p">:</span> <span class="n">offloading</span> <span class="mi">32</span> <span class="n">repeating</span> <span class="n">layers</span> <span class="n">to</span> <span class="n">GPU</span>
</span></span><span class="line"><span class="cl"><span class="n">load_tensors</span><span class="p">:</span> <span class="n">offloading</span> <span class="n">output</span> <span class="n">layer</span> <span class="n">to</span> <span class="n">GPU</span>
</span></span><span class="line"><span class="cl"><span class="n">load_tensors</span><span class="p">:</span> <span class="n">offloaded</span> <span class="mi">33</span><span class="o">/</span><span class="mi">33</span> <span class="n">layers</span> <span class="n">to</span> <span class="n">GPU</span>
</span></span><span class="line"><span class="cl"><span class="n">load_tensors</span><span class="p">:</span>        <span class="n">CUDA0</span> <span class="n">model</span> <span class="n">buffer</span> <span class="n">size</span> <span class="o">=</span>  <span class="mf">4403.49</span> <span class="n">MiB</span>
</span></span><span class="line"><span class="cl"><span class="n">load_tensors</span><span class="p">:</span>          <span class="n">CPU</span> <span class="n">model</span> <span class="n">buffer</span> <span class="n">size</span> <span class="o">=</span>   <span class="mf">281.81</span> <span class="n">MiB</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span> <span class="n">constructing</span> <span class="n">llama_context</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span> <span class="n">n_seq_max</span>     <span class="o">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span> <span class="n">n_ctx</span>         <span class="o">=</span> <span class="mi">8192</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span> <span class="n">n_ctx_per_seq</span> <span class="o">=</span> <span class="mi">4096</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span> <span class="n">n_batch</span>       <span class="o">=</span> <span class="mi">1024</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span> <span class="n">n_ubatch</span>      <span class="o">=</span> <span class="mi">512</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span> <span class="n">causal_attn</span>   <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span> <span class="n">flash_attn</span>    <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span> <span class="n">freq_base</span>     <span class="o">=</span> <span class="mf">500000.0</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span> <span class="n">freq_scale</span>    <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span> <span class="n">n_ctx_per_seq</span> <span class="p">(</span><span class="mi">4096</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">n_ctx_train</span> <span class="p">(</span><span class="mi">131072</span><span class="p">)</span> <span class="o">--</span> <span class="n">the</span> <span class="n">full</span> <span class="n">capacity</span> <span class="n">of</span> <span class="n">the</span> <span class="n">model</span> <span class="n">will</span> <span class="ow">not</span> <span class="n">be</span> <span class="n">utilized</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span>  <span class="n">CUDA_Host</span>  <span class="n">output</span> <span class="n">buffer</span> <span class="n">size</span> <span class="o">=</span>     <span class="mf">1.01</span> <span class="n">MiB</span>
</span></span><span class="line"><span class="cl"><span class="n">init</span><span class="p">:</span> <span class="n">kv_size</span> <span class="o">=</span> <span class="mi">8192</span><span class="p">,</span> <span class="n">offload</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">type_k</span> <span class="o">=</span> <span class="s1">&#39;f16&#39;</span><span class="p">,</span> <span class="n">type_v</span> <span class="o">=</span> <span class="s1">&#39;f16&#39;</span><span class="p">,</span> <span class="n">n_layer</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span> <span class="n">can_shift</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">init</span><span class="p">:</span>      <span class="n">CUDA0</span> <span class="n">KV</span> <span class="n">buffer</span> <span class="n">size</span> <span class="o">=</span>  <span class="mf">1024.00</span> <span class="n">MiB</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span> <span class="n">KV</span> <span class="bp">self</span> <span class="n">size</span>  <span class="o">=</span> <span class="mf">1024.00</span> <span class="n">MiB</span><span class="p">,</span> <span class="n">K</span> <span class="p">(</span><span class="n">f16</span><span class="p">):</span>  <span class="mf">512.00</span> <span class="n">MiB</span><span class="p">,</span> <span class="n">V</span> <span class="p">(</span><span class="n">f16</span><span class="p">):</span>  <span class="mf">512.00</span> <span class="n">MiB</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span>      <span class="n">CUDA0</span> <span class="n">compute</span> <span class="n">buffer</span> <span class="n">size</span> <span class="o">=</span>   <span class="mf">560.00</span> <span class="n">MiB</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span>  <span class="n">CUDA_Host</span> <span class="n">compute</span> <span class="n">buffer</span> <span class="n">size</span> <span class="o">=</span>    <span class="mf">24.01</span> <span class="n">MiB</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span> <span class="n">graph</span> <span class="n">nodes</span>  <span class="o">=</span> <span class="mi">1094</span>
</span></span><span class="line"><span class="cl"><span class="n">llama_context</span><span class="p">:</span> <span class="n">graph</span> <span class="n">splits</span> <span class="o">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="n">time</span><span class="o">=</span><span class="mi">2025</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">37.233</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span> <span class="n">level</span><span class="o">=</span><span class="n">INFO</span> <span class="n">source</span><span class="o">=</span><span class="n">server</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">628</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&#34;llama runner started in 7.26 seconds&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">GIN</span><span class="p">]</span> <span class="mi">2025</span><span class="o">/</span><span class="mi">06</span><span class="o">/</span><span class="mi">07</span> <span class="o">-</span> <span class="mi">12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">37</span> <span class="o">|</span> <span class="mi">200</span> <span class="o">|</span>     <span class="mf">7.682587</span><span class="n">s</span> <span class="o">|</span>       <span class="mf">127.0.0.1</span> <span class="o">|</span> <span class="n">POST</span>     <span class="s2">&#34;/api/chat&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">å¦‚ä½•è§£å†³è¯¥é—®é¢˜</span><span class="err">ï¼Œ</span><span class="n">è¯·æä¾›å®Œæ•´ä»£ç </span>
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<h4 id="å›ç­”1">å›ç­”1
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="err">å·²æ·±åº¦æ€è€ƒï¼ˆç”¨æ—¶</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="err">ç§’ï¼‰</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">æ ¹æ®é—®é¢˜æè¿°ï¼Œä»£ç åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‡ºç°äº†</span><span class="o">`</span><span class="n">TimeoutError</span><span class="p">:</span><span class="w"> </span><span class="err">å‘é€æ¶ˆæ¯è¶…æ—¶</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="err">æ²™ç³»</span><span class="w"> </span><span class="o">-`</span><span class="err">çš„é”™è¯¯ã€‚è¿™ä¸ªé”™è¯¯é€šå¸¸å‘ç”Ÿåœ¨ä½¿ç”¨</span><span class="o">`</span><span class="n">wxauto</span><span class="o">`</span><span class="err">åº“å‘é€æ¶ˆæ¯æ—¶ï¼Œç”±äºæŸç§åŸå› æ¶ˆæ¯æœªèƒ½æˆåŠŸå‘é€ã€‚å¯èƒ½çš„åŸå› åŒ…æ‹¬ï¼š</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">å¾®ä¿¡çª—å£æœªæ¿€æ´»æˆ–æœªåœ¨å‰å°ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="err">å¾®ä¿¡çª—å£æ ‡é¢˜ä¸åŒ¹é…ï¼ˆä¾‹å¦‚ï¼Œçª—å£æ ‡é¢˜å¯èƒ½åŒ…å«å…¶ä»–ä¿¡æ¯ï¼Œå¦‚â€œæ²™ç³»</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="err">å¾®ä¿¡â€ï¼‰ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="err">å‘é€æ¶ˆæ¯æ—¶å¾®ä¿¡çª—å£è¢«å…¶ä»–çª—å£é®æŒ¡æˆ–æœ€å°åŒ–ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="err">å‘é€æ¶ˆæ¯çš„é€Ÿåº¦è¿‡å¿«ï¼Œå¾®ä¿¡æ¥ä¸åŠå“åº”ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–ä»¥ä¸‹æªæ–½ï¼š</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="o">-</span><span class="w"> </span><span class="err">åœ¨å‘é€æ¶ˆæ¯å‰ï¼Œç¡®ä¿å¾®ä¿¡çª—å£æ˜¯æ¿€æ´»çŠ¶æ€ï¼ˆå³åœ¨å‰å°ï¼‰ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="o">-</span><span class="w"> </span><span class="err">æ·»åŠ é‡è¯•æœºåˆ¶ï¼Œåœ¨å‘é€å¤±è´¥æ—¶è¿›è¡Œå¤šæ¬¡å°è¯•ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="o">-</span><span class="w"> </span><span class="err">åœ¨å‘é€æ¶ˆæ¯å‰ï¼Œå…ˆå°è¯•å°†å¾®ä¿¡çª—å£ç½®é¡¶ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">ç”±äº</span><span class="o">`</span><span class="n">wxauto</span><span class="o">`</span><span class="err">åº“çš„</span><span class="o">`</span><span class="n">SendMsg</span><span class="o">`</span><span class="err">æ–¹æ³•åœ¨å‘é€æ¶ˆæ¯æ—¶è¦æ±‚çª—å£å¤„äºæ¿€æ´»çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨</span><span class="o">`</span><span class="n">win32gui</span><span class="o">`</span><span class="err">æ¥æ¿€æ´»çª—å£ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">ä»¥ä¸‹æ˜¯ä¿®æ”¹åçš„ä»£ç ï¼Œä¸»è¦å¢åŠ äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">ä½¿ç”¨</span><span class="o">`</span><span class="n">win32gui</span><span class="o">`</span><span class="err">æ¥æŸ¥æ‰¾å¹¶æ¿€æ´»å¾®ä¿¡çª—å£ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="err">åœ¨å‘é€æ¶ˆæ¯æ—¶åŠ å…¥é‡è¯•æœºåˆ¶ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="err">åœ¨å‘é€æ¶ˆæ¯å‰æ·»åŠ é€‚å½“çš„å»¶è¿Ÿï¼Œç¡®ä¿çª—å£å·²ç»æ¿€æ´»ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">æ³¨æ„ï¼šéœ€è¦å®‰è£…</span><span class="o">`</span><span class="n">pywin32</span><span class="o">`</span><span class="err">åº“ï¼Œå¯ä»¥ä½¿ç”¨</span><span class="o">`</span><span class="n">pip</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">pywin32</span><span class="o">`</span><span class="err">å®‰è£…ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">ä¿®æ”¹åçš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æ ¹æ®æ‚¨çš„é—®é¢˜æè¿°å’Œé”™è¯¯ä¿¡æ¯ï¼Œä¸»è¦é—®é¢˜åœ¨äºå¾®ä¿¡æ¶ˆæ¯å‘é€è¶…æ—¶ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„è§£å†³æ–¹æ¡ˆä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">requests</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">win32gui</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">win32con</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">wxauto</span> <span class="kn">import</span> <span class="n">WeChat</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">activate_window</span><span class="p">(</span><span class="n">window_title</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;æ¿€æ´»æŒ‡å®šæ ‡é¢˜çš„çª—å£&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">hwnd</span> <span class="o">=</span> <span class="n">win32gui</span><span class="o">.</span><span class="n">FindWindow</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">window_title</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">hwnd</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">win32gui</span><span class="o">.</span><span class="n">ShowWindow</span><span class="p">(</span><span class="n">hwnd</span><span class="p">,</span> <span class="n">win32con</span><span class="o">.</span><span class="n">SW_RESTORE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">win32gui</span><span class="o">.</span><span class="n">SetForegroundWindow</span><span class="p">(</span><span class="n">hwnd</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;çª—å£æ¿€æ´»å¤±è´¥: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">safe_send_msg</span><span class="p">(</span><span class="n">chat_win</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">max_retries</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;å¸¦é‡è¯•æœºåˆ¶çš„å®‰å…¨å‘é€æ¶ˆæ¯&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_retries</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># æ¿€æ´»å¾®ä¿¡çª—å£</span>
</span></span><span class="line"><span class="cl">            <span class="n">window_title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">chat_win</span><span class="o">.</span><span class="n">who</span><span class="si">}</span><span class="s2"> - å¾®ä¿¡&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">activate_window</span><span class="p">(</span><span class="n">window_title</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># ç­‰å¾…çª—å£æ¿€æ´»</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            <span class="n">chat_win</span><span class="o">.</span><span class="n">SendMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;å‘é€å¤±è´¥ï¼ˆå°è¯• </span><span class="si">{</span><span class="n">attempt</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">max_retries</span><span class="si">}</span><span class="s2">ï¼‰: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># ç­‰å¾…åé‡è¯•</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åŠ è½½å†å²æ¶ˆæ¯è®°å½•</span>
</span></span><span class="line"><span class="cl"><span class="n">DB</span> <span class="o">=</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">DB</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;å†å²è®°å½•åŠ è½½å¤±è´¥: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åŠ è½½ç›‘å¬ç”¨æˆ·åˆ—è¡¨</span>
</span></span><span class="line"><span class="cl"><span class="n">MONITOR_LIST</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&#34;users.txt&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;users.txt&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">line</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">MONITOR_LIST</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;è­¦å‘Šï¼šæœªæ‰¾åˆ° users.txt æ–‡ä»¶ï¼Œå°†ç›‘å¬é»˜è®¤ç”¨æˆ·&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">MONITOR_LIST</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;æ²™ç³»&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åˆå§‹åŒ–å¾®ä¿¡</span>
</span></span><span class="line"><span class="cl"><span class="n">wx</span> <span class="o">=</span> <span class="n">WeChat</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">MONITOR_LIST</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">wx</span><span class="o">.</span><span class="n">AddListenChat</span><span class="p">(</span><span class="n">who</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;å·²ç›‘å¬ç”¨æˆ·: </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;ç›‘å¬ç”¨æˆ· </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2"> å¤±è´¥: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ä¸»å¾ªç¯</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">listen_dict</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">GetListenMessage</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">chat_win</span><span class="p">,</span> <span class="n">message_list</span> <span class="ow">in</span> <span class="n">listen_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="n">chat_user</span> <span class="o">=</span> <span class="n">chat_win</span><span class="o">.</span><span class="n">who</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            <span class="c1"># è¿‡æ»¤éå¥½å‹æ¶ˆæ¯</span>
</span></span><span class="line"><span class="cl">            <span class="n">interval_list</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span><span class="s2">&#34;role&#34;</span><span class="p">:</span> <span class="s2">&#34;user&#34;</span><span class="p">,</span> <span class="s2">&#34;content&#34;</span><span class="p">:</span> <span class="n">msg</span><span class="o">.</span><span class="n">content</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">message_list</span> <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&#34;friend&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="n">interval_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">æ”¶åˆ°æ¥è‡ª </span><span class="si">{</span><span class="n">chat_user</span><span class="si">}</span><span class="s2"> çš„æ¶ˆæ¯:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">interval_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  </span><span class="si">{</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># åˆå¹¶å†å²è®°å½•</span>
</span></span><span class="line"><span class="cl">            <span class="n">history_list</span> <span class="o">=</span> <span class="n">DB</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">chat_user</span><span class="p">,</span> <span class="p">[])</span>
</span></span><span class="line"><span class="cl">            <span class="n">history_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">interval_list</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># è°ƒç”¨æ¨¡å‹API</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="n">url</span><span class="o">=</span><span class="s2">&#34;http://localhost:11434/api/chat&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">json</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="s2">&#34;model&#34;</span><span class="p">:</span> <span class="s2">&#34;deepseek-r1:8b&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="s2">&#34;messages&#34;</span><span class="p">:</span> <span class="n">history_list</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="s2">&#34;stream&#34;</span><span class="p">:</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">                    <span class="p">},</span>
</span></span><span class="line"><span class="cl">                    <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span>
</span></span><span class="line"><span class="cl">                <span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">res</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="n">reply</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;message&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="n">reply_content</span> <span class="o">=</span> <span class="n">reply</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;æ¨¡å‹è°ƒç”¨å¤±è´¥: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">reply_content</span> <span class="o">=</span> <span class="s2">&#34;âš ï¸ å¤„ç†è¯·æ±‚æ—¶å‡ºé”™ï¼Œè¯·ç¨åå†è¯•&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># å‘é€å›å¤</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">å›å¤ </span><span class="si">{</span><span class="n">chat_user</span><span class="si">}</span><span class="s2">:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  </span><span class="si">{</span><span class="n">reply_content</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="n">safe_send_msg</span><span class="p">(</span><span class="n">chat_win</span><span class="p">,</span> <span class="n">reply_content</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;âš ï¸ æœ€ç»ˆå‘é€å¤±è´¥: </span><span class="si">{</span><span class="n">reply_content</span><span class="p">[:</span><span class="mi">50</span><span class="p">]</span><span class="si">}</span><span class="s2">...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># ä¿å­˜æˆåŠŸè®°å½•</span>
</span></span><span class="line"><span class="cl">                <span class="n">history_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reply</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">DB</span><span class="p">[</span><span class="n">chat_user</span><span class="p">]</span> <span class="o">=</span> <span class="n">history_list</span>
</span></span><span class="line"><span class="cl">                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">DB</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># é™ä½CPUå ç”¨</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">ç”¨æˆ·ç»ˆæ­¢ç¨‹åº&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;ä¸»å¾ªç¯å¼‚å¸¸: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># é˜²æ­¢é¢‘ç¹æŠ¥é”™</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ä¸»è¦æ”¹è¿›ï¼š</strong></p>
<ol>
<li><strong>çª—å£æ¿€æ´»åŠŸèƒ½</strong>ï¼š
<ul>
<li>æ·»åŠ äº† <code>activate_window()</code> å‡½æ•°ï¼Œä½¿ç”¨ <code>win32gui</code> ç¡®ä¿å¾®ä¿¡çª—å£åœ¨å‰å°</li>
<li>åœ¨å‘é€æ¶ˆæ¯å‰æ¿€æ´»ç›®æ ‡èŠå¤©çª—å£</li>
</ul>
</li>
<li><strong>æ¶ˆæ¯å‘é€é‡è¯•æœºåˆ¶</strong>ï¼š
<ul>
<li>åˆ›å»ºäº† <code>safe_send_msg()</code> å‡½æ•°å®ç°å¸¦é‡è¯•çš„æ¶ˆæ¯å‘é€</li>
<li>é»˜è®¤3æ¬¡é‡è¯•ï¼Œæ¯æ¬¡é—´éš”2ç§’</li>
</ul>
</li>
<li><strong>é”™è¯¯å¤„ç†å¢å¼º</strong>ï¼š
<ul>
<li>æ·»åŠ äº†æ¨¡å‹è°ƒç”¨å¼‚å¸¸å¤„ç†</li>
<li>å¢åŠ äº†ä¸»å¾ªç¯å¼‚å¸¸æ•è·</li>
<li>æ·»åŠ äº†é”®ç›˜ä¸­æ–­å¤„ç†ï¼ˆCtrl+Cï¼‰</li>
</ul>
</li>
<li><strong>æ—¥å¿—ä¼˜åŒ–</strong>ï¼š
<ul>
<li>æ›´è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯è¾“å‡º</li>
<li>æ¶ˆæ¯å‘é€çŠ¶æ€å®æ—¶åé¦ˆ</li>
</ul>
</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š
<ul>
<li>æ·»åŠ äº†é€‚å½“çš„ä¼‘çœ æ—¶é—´</li>
<li>å‡å°‘ä¸å¿…è¦çš„èµ„æºå ç”¨</li>
</ul>
</li>
</ol>
<p><strong>ä½¿ç”¨è¯´æ˜ï¼š</strong></p>
<ol>
<li>
<p><strong>å®‰è£…ä¾èµ–</strong>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pip install wxauto requests pywin32
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>åˆ›å»ºç”¨æˆ·åˆ—è¡¨</strong>ï¼š
åœ¨è„šæœ¬åŒç›®å½•ä¸‹åˆ›å»º <code>users.txt</code> æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ªè¦ç›‘å¬çš„å¾®ä¿¡è”ç³»äººåç§°</p>
</li>
<li>
<p><strong>è¿è¡Œå‡†å¤‡</strong>ï¼š</p>
<ul>
<li>ç¡®ä¿å¾®ä¿¡å®¢æˆ·ç«¯å·²ç™»å½•å¹¶å¤„äºå‰å°</li>
<li>ç¡®ä¿OllamaæœåŠ¡å·²è¿è¡Œï¼ˆ<code>ollama serve</code>ï¼‰</li>
<li>ç¡®ä¿å·²å®‰è£…æ¨¡å‹ï¼ˆ<code>ollama pull deepseek-r1:8b</code>ï¼‰</li>
</ul>
</li>
<li>
<p><strong>è¿è¡Œè„šæœ¬</strong>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">python your_script_name.py
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ol>
<li>é¦–æ¬¡è¿è¡Œæ—¶å¾®ä¿¡å¯èƒ½ä¼šæœ‰å®‰å…¨æç¤ºï¼Œéœ€è¦æ‰‹åŠ¨å…è®¸</li>
<li>ç¡®ä¿å¾®ä¿¡çª—å£æ ‡é¢˜æ ¼å¼ä¸º &ldquo;è”ç³»äººåç§° - å¾®ä¿¡&rdquo;</li>
<li>å¦‚æœä»é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å°è¯•ï¼š
<ul>
<li>å¢åŠ é‡è¯•æ¬¡æ•°ï¼ˆä¿®æ”¹ <code>max_retries</code> å‚æ•°ï¼‰</li>
<li>å»¶é•¿çª—å£æ¿€æ´»åçš„ç­‰å¾…æ—¶é—´ï¼ˆè°ƒæ•´ <code>time.sleep(0.5)</code>ï¼‰</li>
</ul>
</li>
</ol>
<p>è¿™ä¸ªè§£å†³æ–¹æ¡ˆè§£å†³äº†æ¶ˆæ¯å‘é€è¶…æ—¶çš„æ ¸å¿ƒé—®é¢˜ï¼ŒåŒæ—¶å¢å¼ºäº†ç¨‹åºçš„å¥å£®æ€§å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<h4 id="æé—®2">æé—®2
</h4><blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;D:\PycharmProject\WebAutoTest\Auto_Chat\AI_Auto.py&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">62</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">wx</span> <span class="o">=</span> <span class="n">WeChat</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;D:\PycharmProject\WebAutoTest</span><span class="se">\v</span><span class="s2">env\lib\site-packages\wxauto\wxauto.py&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">41</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__init__</span>
</span></span><span class="line"><span class="cl">    <span class="bp">self</span><span class="o">.</span><span class="n">_show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;D:\PycharmProject\WebAutoTest</span><span class="se">\v</span><span class="s2">env\lib\site-packages\wxauto\wxauto.py&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">88</span><span class="p">,</span> <span class="ow">in</span> <span class="n">_show</span>
</span></span><span class="line"><span class="cl">    <span class="n">win32gui</span><span class="o">.</span><span class="n">SetWindowPos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">HWND</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">pywintypes</span><span class="o">.</span><span class="n">error</span><span class="p">:</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;SetWindowPos&#39;</span><span class="p">,</span> <span class="s1">&#39;æ‹’ç»è®¿é—®ã€‚&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">è¿›ç¨‹å·²ç»“æŸ</span><span class="p">,</span><span class="n">é€€å‡ºä»£ç </span>
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<h4 id="å›ç­”2">å›ç­”2
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="err">å·²æ·±åº¦æ€è€ƒï¼ˆç”¨æ—¶</span><span class="w"> </span><span class="mi">65</span><span class="w"> </span><span class="err">ç§’ï¼‰</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">è¿™ä¸ªé”™è¯¯æ˜¯ç”±äºå°è¯•è®¾ç½®çª—å£ä½ç½®æ—¶è¢«æ‹’ç»è®¿é—®å¯¼è‡´çš„ã€‚å¯èƒ½çš„åŸå› æ˜¯ç¨‹åºæ²¡æœ‰è¶³å¤Ÿçš„æƒé™ï¼Œæˆ–è€…å¾®ä¿¡çª—å£çš„æŸäº›ä¿æŠ¤æœºåˆ¶é˜»æ­¢äº†æ“ä½œã€‚æˆ‘ä»¬å¯ä»¥å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ</span><span class="n">Pythonè„šæœ¬</span><span class="err">ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="err">é¿å…åœ¨åˆå§‹åŒ–æ—¶è°ƒç”¨</span><span class="o">`</span><span class="n">_show</span><span class="o">`</span><span class="err">æ–¹æ³•ï¼ˆå³é¿å…è®¾ç½®çª—å£ä½ç½®ï¼‰ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">åœ¨</span><span class="n">wxautoçš„æºä»£ç ä¸­</span><span class="err">ï¼Œ</span><span class="o">`</span><span class="n">__init__</span><span class="o">`</span><span class="err">æ–¹æ³•ä¼šè°ƒç”¨</span><span class="o">`</span><span class="n">_show</span><span class="o">`</span><span class="err">æ–¹æ³•ï¼Œè€Œ</span><span class="o">`</span><span class="n">_show</span><span class="o">`</span><span class="err">æ–¹æ³•ä¸­ä½¿ç”¨äº†</span><span class="o">`</span><span class="n">SetWindowPos</span><span class="o">`</span><span class="err">ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»§æ‰¿</span><span class="o">`</span><span class="n">WeChat</span><span class="o">`</span><span class="err">ç±»å¹¶é‡å†™</span><span class="o">`</span><span class="n">_show</span><span class="o">`</span><span class="err">æ–¹æ³•ï¼Œé¿å…è¿™ä¸ªæ“ä½œã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°è¯•åœ¨åˆ›å»º</span><span class="o">`</span><span class="n">WeChat</span><span class="o">`</span><span class="err">å¯¹è±¡æ—¶ä¸è‡ªåŠ¨è°ƒç”¨</span><span class="o">`</span><span class="n">_show</span><span class="o">`</span><span class="err">ï¼ˆæŸ¥çœ‹</span><span class="n">wxautoæºç </span><span class="err">ï¼Œä¼¼ä¹æ²¡æœ‰æä¾›å‚æ•°æ¥æ§åˆ¶ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸ºæ•è·å¼‚å¸¸ï¼Œæˆ–è€…ä½¿ç”¨å…¶ä»–æ–¹å¼ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">å¦ä¸€ç§æ€è·¯ï¼šåœ¨åˆå§‹åŒ–</span><span class="o">`</span><span class="n">WeChat</span><span class="o">`</span><span class="err">å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦ç«‹å³æ˜¾ç¤ºçª—å£ï¼ˆå› ä¸ºåç»­æˆ‘ä»¬é€šè¿‡æ¿€æ´»çª—å£æ¥æ“ä½œï¼‰ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä¿®æ”¹</span><span class="n">wxautoçš„ä»£ç </span><span class="err">ï¼Ÿä½†è¿™ä¸æ˜¯å¥½çš„åšæ³•ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">å®é™…ä¸Šï¼Œé”™è¯¯ä¿¡æ¯ä¸­æåˆ°çš„</span><span class="o">`</span><span class="n">SetWindowPos</span><span class="o">`</span><span class="err">è°ƒç”¨æ˜¯ä¸ºäº†å°†çª—å£ç½®äºæœ€å‰é¢ã€‚æˆ‘ä»¬å¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ï¼Œå› ä¸ºåç»­åœ¨å‘é€æ¶ˆæ¯æ—¶æˆ‘ä»¬ä¼šæ¿€æ´»çª—å£ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">ç”±äºæˆ‘ä»¬æ— æ³•ç›´æ¥ä¿®æ”¹åº“ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•æ•è·è¿™ä¸ªå¼‚å¸¸å¹¶ç»§ç»­è¿è¡Œï¼Œåªè¦åç»­æ“ä½œä¸å—å½±å“ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">ä¿®æ”¹åˆå§‹åŒ–éƒ¨åˆ†ï¼š</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="o">```</span><span class="n">python</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">try</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">wx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">WeChat</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">except</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">e</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&#34;åˆå§‹åŒ–å¾®ä¿¡æ—¶å‡ºé”™: {str(e)}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">print</span><span class="p">(</span><span class="s2">&#34;å°è¯•ç»§ç»­è¿è¡Œ...&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># è¿™é‡Œéœ€è¦ç¡®ä¿wxå¯¹è±¡ä»ç„¶è¢«åˆ›å»ºï¼Œä½†æ•è·å¼‚å¸¸åå¯èƒ½æ— æ³•åˆ›å»ºï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡æ–°åˆå§‹åŒ–ä½†ä¸è°ƒç”¨_showæ–¹æ³•ï¼Ÿ
</span></span></span><span class="line"><span class="cl"><span class="c1"># å®é™…ä¸Šï¼Œwxautoåœ¨åˆå§‹åŒ–æ—¶ä¸€å®šä¼šè°ƒç”¨_showï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¦ä¸€ç§æ–¹å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">\</span><span class="o">```</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">ç”±äºè¿™ä¸ªé”™è¯¯å‘ç”Ÿåœ¨</span><span class="o">`</span><span class="n">_show</span><span class="o">`</span><span class="err">æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•åœ¨åˆ›å»º</span><span class="o">`</span><span class="n">WeChat</span><span class="o">`</span><span class="err">å®ä¾‹ä¹‹å‰ï¼Œå…ˆæ‰¾åˆ°å¾®ä¿¡çª—å£ï¼Œç„¶åå°è¯•æ¿€æ´»å®ƒï¼Œè¿™æ ·åœ¨</span><span class="o">`</span><span class="n">_show</span><span class="o">`</span><span class="err">ä¸­è®¾ç½®ä½ç½®æ—¶å¯èƒ½å°±ä¸ä¼šå‡ºé”™ï¼Ÿæˆ–è€…ï¼Œæˆ‘ä»¬è€ƒè™‘ä½¿ç”¨å¦ä¸€ä¸ªåº“ï¼ˆå¦‚</span><span class="o">`</span><span class="n">pywinauto</span><span class="o">`</span><span class="err">ï¼‰æ¥æ“ä½œå¾®ä¿¡çª—å£ï¼Ÿ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">ä½†æ˜¯ï¼Œä¸ºäº†å¿«é€Ÿè§£å†³é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä¿®æ”¹</span><span class="o">`</span><span class="n">wxauto</span><span class="o">`</span><span class="err">åº“çš„æºä»£ç ã€‚æ‰¾åˆ°</span><span class="o">`</span><span class="n">wxauto</span><span class="p">.</span><span class="n">py</span><span class="o">`</span><span class="err">æ–‡ä»¶ï¼Œå®šä½åˆ°</span><span class="o">`</span><span class="n">_show</span><span class="o">`</span><span class="err">æ–¹æ³•ï¼ˆå¤§çº¦ç¬¬</span><span class="mi">88</span><span class="err">è¡Œï¼‰ï¼Œå°†ï¼š</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="o">```</span><span class="n">python</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">win32gui</span><span class="p">.</span><span class="nf">SetWindowPos</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">HWND</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="o">```</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">æ”¹ä¸ºï¼š</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="o">```</span><span class="n">python</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">try</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">win32gui</span><span class="p">.</span><span class="nf">SetWindowPos</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">HWND</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">except</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">e</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&#34;è®¾ç½®çª—å£ä½ç½®å¤±è´¥: {e}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="o">```</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">è¿™æ ·ï¼Œå³ä½¿è®¾ç½®çª—å£ä½ç½®å¤±è´¥ï¼Œä¹Ÿä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç¨‹åºå¯ä»¥ç»§ç»­è¿è¡Œã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">å¦‚æœä½ ä¸æƒ³ä¿®æ”¹åº“çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•åœ¨åˆå§‹åŒ–ä¹‹å‰å…ˆæ¿€æ´»å¾®ä¿¡çª—å£ï¼Œçœ‹æ˜¯å¦èƒ½é¿å…è¿™ä¸ªé”™è¯¯ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">ä»¥ä¸‹æ˜¯ä¿®æ”¹åçš„åˆå§‹åŒ–ä»£ç ï¼Œå°è¯•å…ˆæ¿€æ´»å¾®ä¿¡ä¸»çª—å£ï¼š</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="o">```</span><span class="n">python</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># å°è¯•å…ˆæ¿€æ´»å¾®ä¿¡ä¸»çª—å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">def</span><span class="w"> </span><span class="nf">activate_wechat_main_window</span><span class="p">():</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">hwnd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">win32gui</span><span class="p">.</span><span class="nf">FindWindow</span><span class="p">(</span><span class="s2">&#34;WeChatMainWndForPC&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">None</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">if</span><span class="w"> </span><span class="n">hwnd</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">win32gui</span><span class="p">.</span><span class="nf">ShowWindow</span><span class="p">(</span><span class="n">hwnd</span><span class="p">,</span><span class="w"> </span><span class="n">win32con</span><span class="p">.</span><span class="n">SW_RESTORE</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">win32gui</span><span class="p">.</span><span class="nf">SetForegroundWindow</span><span class="p">(</span><span class="n">hwnd</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">time</span><span class="p">.</span><span class="nf">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nf">activate_wechat_main_window</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># åˆå§‹åŒ–å¾®ä¿¡å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">wx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">WeChat</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="o">```</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">å¾®ä¿¡ä¸»çª—å£çš„ç±»åæ˜¯</span><span class="s2">&#34;WeChatMainWndForPC&#34;</span><span class="err">ï¼Œæˆ‘ä»¬å°è¯•å…ˆæ¿€æ´»å®ƒï¼Œç„¶åå†åˆå§‹åŒ–</span><span class="o">`</span><span class="n">WeChat</span><span class="o">`</span><span class="err">å¯¹è±¡ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">è®©æˆ‘ä»¬æ•´åˆåˆ°ä»£ç ä¸­ï¼š</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="o">```</span><span class="n">python</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">import</span><span class="w"> </span><span class="n">os</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">import</span><span class="w"> </span><span class="kt">time</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">import</span><span class="w"> </span><span class="n">json</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">import</span><span class="w"> </span><span class="n">requests</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">import</span><span class="w"> </span><span class="n">win32gui</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">import</span><span class="w"> </span><span class="n">win32con</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">wxauto</span><span class="w"> </span><span class="n">import</span><span class="w"> </span><span class="n">WeChat</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">def</span><span class="w"> </span><span class="nf">activate_window</span><span class="p">(</span><span class="n">window_title</span><span class="p">):</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s2">&#34;&#34;&#34;æ¿€æ´»æŒ‡å®šæ ‡é¢˜çš„çª—å£&#34;&#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">try</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">hwnd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">win32gui</span><span class="p">.</span><span class="nf">FindWindow</span><span class="p">(</span><span class="n">None</span><span class="p">,</span><span class="w"> </span><span class="n">window_title</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">hwnd</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">win32gui</span><span class="p">.</span><span class="nf">ShowWindow</span><span class="p">(</span><span class="n">hwnd</span><span class="p">,</span><span class="w"> </span><span class="n">win32con</span><span class="p">.</span><span class="n">SW_RESTORE</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">win32gui</span><span class="p">.</span><span class="nf">SetForegroundWindow</span><span class="p">(</span><span class="n">hwnd</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="no">True</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">except</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">e</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nf">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&#34;çª—å£æ¿€æ´»å¤±è´¥: {str(e)}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="no">False</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">def</span><span class="w"> </span><span class="nf">safe_send_msg</span><span class="p">(</span><span class="n">chat_win</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="p">,</span><span class="w"> </span><span class="n">max_retries</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s2">&#34;&#34;&#34;å¸¦é‡è¯•æœºåˆ¶çš„å®‰å…¨å‘é€æ¶ˆæ¯&#34;&#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">attempt</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nf">range</span><span class="p">(</span><span class="n">max_retries</span><span class="p">):</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">try</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1"># æ¿€æ´»å¾®ä¿¡çª—å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">            </span><span class="n">window_title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="s2">&#34;{chat_win.who} - å¾®ä¿¡&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nf">activate_window</span><span class="p">(</span><span class="n">window_title</span><span class="p">):</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="kt">time</span><span class="p">.</span><span class="nf">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span><span class="w">  </span><span class="c1"># ç­‰å¾…çª—å£æ¿€æ´»
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">chat_win</span><span class="p">.</span><span class="nf">SendMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="no">True</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">except</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">e</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nf">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&#34;å‘é€å¤±è´¥ï¼ˆå°è¯• {attempt + 1}/{max_retries}ï¼‰: {str(e)}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="kt">time</span><span class="p">.</span><span class="nf">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w">  </span><span class="c1"># ç­‰å¾…åé‡è¯•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="no">False</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># åŠ è½½å†å²æ¶ˆæ¯è®°å½•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">DB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">if</span><span class="w"> </span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="k">exists</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">):</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">try</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">with</span><span class="w"> </span><span class="nf">open</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">fp</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">DB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">json</span><span class="p">.</span><span class="k">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">except</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">e</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nf">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&#34;å†å²è®°å½•åŠ è½½å¤±è´¥: {str(e)}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># åŠ è½½ç›‘å¬ç”¨æˆ·åˆ—è¡¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">MONITOR_LIST</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">if</span><span class="w"> </span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="k">exists</span><span class="p">(</span><span class="s2">&#34;users.txt&#34;</span><span class="p">):</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">with</span><span class="w"> </span><span class="nf">open</span><span class="p">(</span><span class="s2">&#34;users.txt&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">fp</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">fp</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">line</span><span class="p">.</span><span class="nf">strip</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">line</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">MONITOR_LIST</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">else</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">print</span><span class="p">(</span><span class="s2">&#34;è­¦å‘Šï¼šæœªæ‰¾åˆ° users.txt æ–‡ä»¶ï¼Œå°†ç›‘å¬é»˜è®¤ç”¨æˆ·&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">MONITOR_LIST</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;æ²™ç³»&#34;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># åˆå§‹åŒ–å¾®ä¿¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">try</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">wx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">WeChat</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">except</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">e</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&#34;åˆå§‹åŒ–å¾®ä¿¡æ—¶å‡ºé”™: {str(e)}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1"># å¦‚æœåˆå§‹åŒ–å¤±è´¥ï¼Œå°è¯•å†æ¬¡æ¿€æ´»ä¸»çª—å£å¹¶é‡è¯•ä¸€æ¬¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="nf">print</span><span class="p">(</span><span class="s2">&#34;å°è¯•å†æ¬¡æ¿€æ´»å¾®ä¿¡ä¸»çª—å£å¹¶é‡è¯•åˆå§‹åŒ–...&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">activate_wechat_main_window</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># å†è¯•ä¸€æ¬¡ï¼Œå¦‚æœè¿˜å¤±è´¥åˆ™é€€å‡º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">wx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">WeChat</span><span class="p">()</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">for</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">MONITOR_LIST</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">try</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">wx</span><span class="p">.</span><span class="nf">AddListenChat</span><span class="p">(</span><span class="n">who</span><span class="o">=</span><span class="k">user</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nf">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&#34;å·²ç›‘å¬ç”¨æˆ·: {user}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">except</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">e</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nf">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&#34;ç›‘å¬ç”¨æˆ· {user} å¤±è´¥: {str(e)}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># ... å…¶ä½™ä»£ç ä¿æŒä¸å˜ ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">\</span><span class="o">```</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">è¿™æ ·ï¼Œåœ¨åˆå§‹åŒ–</span><span class="o">`</span><span class="n">WeChat</span><span class="o">`</span><span class="err">å¯¹è±¡ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¿€æ´»å¾®ä¿¡ä¸»çª—å£ï¼Œå¯èƒ½ä¼šé¿å…æƒé™é—®é¢˜ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·è€ƒè™‘ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œè„šæœ¬ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">æ³¨æ„ï¼šå¦‚æœå¾®ä¿¡æ²¡æœ‰è¿è¡Œï¼Œ</span><span class="o">`</span><span class="n">activate_wechat_main_window</span><span class="o">`</span><span class="err">å‡½æ•°å°†æ‰¾ä¸åˆ°çª—å£ï¼Œæ‰€ä»¥ç¡®ä¿å¾®ä¿¡å·²ç»å¯åŠ¨ã€‚</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªé”™è¯¯å‘ç”Ÿåœ¨åˆå§‹åŒ– <code>WeChat</code> å¯¹è±¡æ—¶ï¼Œå…·ä½“æ˜¯åœ¨å°è¯•è®¾ç½®å¾®ä¿¡çª—å£ä½ç½®æ—¶å‡ºç°äº†è®¿é—®è¢«æ‹’ç»çš„é—®é¢˜ã€‚è®©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">requests</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">win32gui</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">win32con</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">wxauto</span> <span class="kn">import</span> <span class="n">WeChat</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">activate_window</span><span class="p">(</span><span class="n">window_title</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;æ¿€æ´»æŒ‡å®šæ ‡é¢˜çš„çª—å£&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">hwnd</span> <span class="o">=</span> <span class="n">win32gui</span><span class="o">.</span><span class="n">FindWindow</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">window_title</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">hwnd</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">win32gui</span><span class="o">.</span><span class="n">ShowWindow</span><span class="p">(</span><span class="n">hwnd</span><span class="p">,</span> <span class="n">win32con</span><span class="o">.</span><span class="n">SW_RESTORE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">win32gui</span><span class="o">.</span><span class="n">SetForegroundWindow</span><span class="p">(</span><span class="n">hwnd</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;çª—å£æ¿€æ´»å¤±è´¥: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">safe_send_msg</span><span class="p">(</span><span class="n">chat_win</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">max_retries</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;å¸¦é‡è¯•æœºåˆ¶çš„å®‰å…¨å‘é€æ¶ˆæ¯&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_retries</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># æ¿€æ´»å¾®ä¿¡çª—å£</span>
</span></span><span class="line"><span class="cl">            <span class="n">window_title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">chat_win</span><span class="o">.</span><span class="n">who</span><span class="si">}</span><span class="s2"> - å¾®ä¿¡&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">activate_window</span><span class="p">(</span><span class="n">window_title</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># ç­‰å¾…çª—å£æ¿€æ´»</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            <span class="n">chat_win</span><span class="o">.</span><span class="n">SendMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;å‘é€å¤±è´¥ï¼ˆå°è¯• </span><span class="si">{</span><span class="n">attempt</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">max_retries</span><span class="si">}</span><span class="s2">ï¼‰: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># ç­‰å¾…åé‡è¯•</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åŠ è½½å†å²æ¶ˆæ¯è®°å½•</span>
</span></span><span class="line"><span class="cl"><span class="n">DB</span> <span class="o">=</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">DB</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;å†å²è®°å½•åŠ è½½å¤±è´¥: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åŠ è½½ç›‘å¬ç”¨æˆ·åˆ—è¡¨</span>
</span></span><span class="line"><span class="cl"><span class="n">MONITOR_LIST</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&#34;users.txt&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;users.txt&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">line</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">MONITOR_LIST</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;è­¦å‘Šï¼šæœªæ‰¾åˆ° users.txt æ–‡ä»¶ï¼Œå°†ç›‘å¬é»˜è®¤ç”¨æˆ·&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">MONITOR_LIST</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;æ²™ç³»&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åˆå§‹åŒ–å¾®ä¿¡ - å®‰å…¨æ–¹å¼</span>
</span></span><span class="line"><span class="cl"><span class="n">wx</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl"><span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">wx</span> <span class="o">=</span> <span class="n">WeChat</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;åˆå§‹åŒ–å¾®ä¿¡æ—¶å‡ºé”™: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;å°è¯•æ‰‹åŠ¨è·å–å¾®ä¿¡çª—å£...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1"># æ‰‹åŠ¨æŸ¥æ‰¾å¾®ä¿¡çª—å£</span>
</span></span><span class="line"><span class="cl">    <span class="n">wechat_hwnd</span> <span class="o">=</span> <span class="n">win32gui</span><span class="o">.</span><span class="n">FindWindow</span><span class="p">(</span><span class="s2">&#34;WeChatMainWndForPC&#34;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">wechat_hwnd</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;æ‰¾åˆ°å¾®ä¿¡ä¸»çª—å£ï¼Œå°è¯•æ¿€æ´»...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">win32gui</span><span class="o">.</span><span class="n">ShowWindow</span><span class="p">(</span><span class="n">wechat_hwnd</span><span class="p">,</span> <span class="n">win32con</span><span class="o">.</span><span class="n">SW_RESTORE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">win32gui</span><span class="o">.</span><span class="n">SetForegroundWindow</span><span class="p">(</span><span class="n">wechat_hwnd</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1"># å†æ¬¡å°è¯•åˆå§‹åŒ–</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">wx</span> <span class="o">=</span> <span class="n">WeChat</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;å¾®ä¿¡åˆå§‹åŒ–æˆåŠŸ&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e2</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;å†æ¬¡åˆå§‹åŒ–å¤±è´¥: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e2</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;è¯·ç¡®ä¿å¾®ä¿¡å·²å¯åŠ¨å¹¶å¤„äºå‰å°&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;æœªæ‰¾åˆ°å¾®ä¿¡çª—å£ï¼Œè¯·ç¡®ä¿å¾®ä¿¡å·²å¯åŠ¨&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ç›‘å¬è´¦æˆ·åˆ—è¡¨</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">MONITOR_LIST</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">wx</span><span class="o">.</span><span class="n">AddListenChat</span><span class="p">(</span><span class="n">who</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;å·²ç›‘å¬ç”¨æˆ·: </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;ç›‘å¬ç”¨æˆ· </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2"> å¤±è´¥: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ç›‘å¬æ¶ˆæ¯</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">listen_dict</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">GetListenMessage</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">listen_dict</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">chat_win</span><span class="p">,</span> <span class="n">message_list</span> <span class="ow">in</span> <span class="n">listen_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="n">chat_user</span> <span class="o">=</span> <span class="n">chat_win</span><span class="o">.</span><span class="n">who</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            <span class="c1"># è·å–æœ€æ–°èŠå¤©æ¶ˆæ¯</span>
</span></span><span class="line"><span class="cl">            <span class="n">interval_list</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">message_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s2">&#34;friend&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">continue</span>
</span></span><span class="line"><span class="cl">                <span class="n">interval_list</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&#34;role&#34;</span><span class="p">:</span> <span class="s2">&#34;user&#34;</span><span class="p">,</span> <span class="s2">&#34;content&#34;</span><span class="p">:</span> <span class="n">msg</span><span class="o">.</span><span class="n">content</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="n">interval_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">æ”¶åˆ°æ¥è‡ª </span><span class="si">{</span><span class="n">chat_user</span><span class="si">}</span><span class="s2"> çš„æ¶ˆæ¯:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">interval_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  </span><span class="si">{</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># åˆå¹¶å†å²è®°å½•</span>
</span></span><span class="line"><span class="cl">            <span class="n">history_list</span> <span class="o">=</span> <span class="n">DB</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">chat_user</span><span class="p">,</span> <span class="p">[])</span>
</span></span><span class="line"><span class="cl">            <span class="n">history_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">interval_list</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># è°ƒç”¨æœ¬åœ° deepseek æ¨¡å‹</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="n">url</span><span class="o">=</span><span class="s2">&#34;http://localhost:11434/api/chat&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">json</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="s2">&#34;model&#34;</span><span class="p">:</span> <span class="s2">&#34;deepseek-r1:8b&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="s2">&#34;messages&#34;</span><span class="p">:</span> <span class="n">history_list</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="s2">&#34;stream&#34;</span><span class="p">:</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">                    <span class="p">},</span>
</span></span><span class="line"><span class="cl">                    <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span>
</span></span><span class="line"><span class="cl">                <span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">res</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="n">reply</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;message&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="n">reply_content</span> <span class="o">=</span> <span class="n">reply</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;æ¨¡å‹è°ƒç”¨å¤±è´¥: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">reply_content</span> <span class="o">=</span> <span class="s2">&#34;âš ï¸ å¤„ç†è¯·æ±‚æ—¶å‡ºé”™ï¼Œè¯·ç¨åå†è¯•&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># å‘é€å›å¤</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">å›å¤ </span><span class="si">{</span><span class="n">chat_user</span><span class="si">}</span><span class="s2">:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  </span><span class="si">{</span><span class="n">reply_content</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="n">safe_send_msg</span><span class="p">(</span><span class="n">chat_win</span><span class="p">,</span> <span class="n">reply_content</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;âš ï¸ æœ€ç»ˆå‘é€å¤±è´¥: </span><span class="si">{</span><span class="n">reply_content</span><span class="p">[:</span><span class="mi">50</span><span class="p">]</span><span class="si">}</span><span class="s2">...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># ä¿å­˜æˆåŠŸè®°å½•</span>
</span></span><span class="line"><span class="cl">                <span class="n">history_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reply</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">DB</span><span class="p">[</span><span class="n">chat_user</span><span class="p">]</span> <span class="o">=</span> <span class="n">history_list</span>
</span></span><span class="line"><span class="cl">                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;db.json&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">DB</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># é™ä½CPUå ç”¨</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">ç”¨æˆ·ç»ˆæ­¢ç¨‹åº&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;ä¸»å¾ªç¯å¼‚å¸¸: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># é˜²æ­¢é¢‘ç¹æŠ¥é”™</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ä¸»è¦ä¿®å¤ï¼š</strong></p>
<ol>
<li><strong>å¾®ä¿¡åˆå§‹åŒ–é”™è¯¯å¤„ç†</strong>ï¼š
<ul>
<li>æ·»åŠ äº†å®Œæ•´çš„å¼‚å¸¸æ•è·å’Œå¤„ç†æœºåˆ¶</li>
<li>å½“ <code>WeChat()</code> åˆå§‹åŒ–å¤±è´¥æ—¶ï¼Œæ‰‹åŠ¨æŸ¥æ‰¾å¹¶æ¿€æ´»å¾®ä¿¡çª—å£</li>
<li>ä½¿ç”¨å¾®ä¿¡çª—å£çš„ç±»å <code>&quot;WeChatMainWndForPC&quot;</code> è¿›è¡ŒæŸ¥æ‰¾</li>
</ul>
</li>
<li><strong>å¢åŠ å¥å£®æ€§</strong>ï¼š
<ul>
<li>æ£€æŸ¥ <code>GetListenMessage()</code> è¿”å›æ˜¯å¦ä¸ºç©º</li>
<li>æ·»åŠ äº†æ›´å¤šçš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è¾“å‡º</li>
<li>ç¡®ä¿ç¨‹åºåœ¨é‡åˆ°é”™è¯¯æ—¶ä¸ä¼šå®Œå…¨å´©æºƒ</li>
</ul>
</li>
<li><strong>æƒé™é—®é¢˜è§£å†³</strong>ï¼š
<ul>
<li>ç¡®ä¿ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œè„šæœ¬ï¼ˆå³é”® -&gt; ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼‰</li>
<li>å¦‚æœä»ç„¶é‡åˆ°æƒé™é—®é¢˜ï¼Œå°è¯•åœ¨å¾®ä¿¡è®¾ç½®ä¸­å…³é—­ &ldquo;ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œæ­¤ç¨‹åº&rdquo; çš„é€‰é¡¹</li>
</ul>
</li>
</ol>
<p><strong>ä½¿ç”¨è¯´æ˜ï¼š</strong></p>
<ol>
<li>
<p><strong>é¦–æ¬¡è¿è¡Œæ—¶</strong>ï¼š</p>
<ul>
<li>ç¡®ä¿å¾®ä¿¡å·²å¯åŠ¨å¹¶å¤„äºå‰å°</li>
<li>å³é”®ç‚¹å‡»è„šæœ¬ -&gt; ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ</li>
</ul>
</li>
<li>
<p><strong>å¦‚æœä»ç„¶é‡åˆ°é—®é¢˜</strong>ï¼š</p>
<ul>
<li>
<p>æ£€æŸ¥å¾®ä¿¡æ˜¯å¦è®¾ç½®äº† &ldquo;ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ&rdquo;ï¼š</p>
<ul>
<li>å³é”®å¾®ä¿¡å¿«æ·æ–¹å¼ -&gt; å±æ€§ -&gt; å…¼å®¹æ€§</li>
<li>å–æ¶ˆå‹¾é€‰ &ldquo;ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œæ­¤ç¨‹åº&rdquo;</li>
</ul>
</li>
<li>
<p>å°è¯•æ›´æ–° <code>wxauto</code> åº“ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">pip install --upgrade wxauto
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p><strong>æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼š
å¦‚æœä»¥ä¸Šæ–¹æ³•æ— æ•ˆï¼Œå¯ä»¥å°è¯•ä½¿ç”¨æ›´ç¨³å®šçš„ <code>UIAutomation</code> æ›¿ä»£æ–¹æ¡ˆï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># æ›¿ä»£åˆå§‹åŒ–æ–¹æ³•</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">wxauto</span> <span class="kn">import</span> <span class="n">WeChat</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">uiautomation</span> <span class="kn">import</span> <span class="n">WindowControl</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æŸ¥æ‰¾å¾®ä¿¡çª—å£</span>
</span></span><span class="line"><span class="cl"><span class="n">wx_win</span> <span class="o">=</span> <span class="n">WindowControl</span><span class="p">(</span><span class="n">ClassName</span><span class="o">=</span><span class="s2">&#34;WeChatMainWndForPC&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">wx_win</span><span class="o">.</span><span class="n">Exists</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="n">wx_win</span><span class="o">.</span><span class="n">SetActive</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">wx</span> <span class="o">=</span> <span class="n">WeChat</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>è¿™ä¸ªè§£å†³æ–¹æ¡ˆåº”è¯¥èƒ½è§£å†³ &ldquo;æ‹’ç»è®¿é—®&rdquo; çš„é”™è¯¯ï¼Œå¹¶ç¡®ä¿å¾®ä¿¡è‡ªåŠ¨åŒ–åŠŸèƒ½æ­£å¸¸å·¥ä½œã€‚</p>
<h3 id="å®ç°æƒ…å†µ">å®ç°æƒ…å†µ
</h3><p>è¿è¡Œ ollama ç¨‹åºï¼Œæˆ–è€…åœ¨ç»ˆç«¯ä½¿ç”¨ ollama serve è¿è¡Œ ollamaã€‚</p>
<img src="image-20250607125944575.png">
<p>ç¡®ä¿ç™»å½•å¾®ä¿¡ï¼Œä¸”å¾®ä¿¡ä¸èƒ½ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚</p>
<p>åœ¨ pycharm ä¸­å­˜æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­ users.txt ç”¨äºä¿å­˜èŠå¤©å¯¹è±¡çš„åç§°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">æ²™ç³»
</span></span></code></pre></td></tr></table>
</div>
</div><p>db.json ç”¨æ¥ä¿å­˜èŠå¤©å¯¹è±¡ä»¥åŠï¼Œæ¯ä¸€æ¬¡èŠå¤©çš„æ•°æ®ã€‚è¿™æ˜¯å› ä¸ºè°ƒç”¨æœ¬åœ°æ¨¡å‹çš„ chat æ¥å£æ—¶ï¼Œæœ¬åœ°æ¨¡å‹åªèƒ½å¤Ÿå¯¹å½“å‰ä¿¡æ¯ä½œå‡ºå›å¤ï¼Œæ²¡æœ‰ä¹‹å‰èŠå¤©çš„è®°å½•ï¼Œä¸ºäº†è®©æœ¬åœ°æ¨¡å‹èƒ½å¤Ÿè¿›è¡Œå¤šæ¬¡å¯¹è¯ï¼Œåœ¨ä»£ç ä¸­å°†æ¯æ¬¡å¯¹è¯çš„å†…å®¹å­˜å‚¨åœ¨ db.json æ–‡ä»¶ä¸­ï¼Œæ¯æ¬¡èŠå¤©å°†ä¹‹é—´æ‰€æœ‰çš„æ¶ˆæ¯è®°å½•ä¸€èµ·å‘é€ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;æ²™ç³»&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;role&#34;</span><span class="p">:</span> <span class="s2">&#34;user&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="s2">&#34;import os\nimport time\nimport json\nimport requests\nfrom wxauto import WeChat\n\n# åŠ è½½å†å²æ¶ˆæ¯è®°å½•\nDB = {}\nif os.path.exists(\&#34;db.json\&#34;):\n    fp = open(\&#34;db.json\&#34;, encoding=&#39;utf-8&#39;, mode=&#39;r&#39;)\n    DB = json.load(fp)\n    fp.close()\n\n# MONITOR_LIST = []\n# fp = open(\&#34;users.txt\&#34;, encoding=&#39;utf-8&#39;, mode=&#39;r&#39;)\n# for line in fp:\n#     # è¯»å–users.txtåŠ è½½ç›‘å¬ç”¨æˆ·\n#     # print(line)\n#     MONITOR_LIST.append(line)\n# fp.close()\n\n# åŠ è½½ç›‘å¬ç”¨æˆ·åˆ—è¡¨\nMONITOR_LIST = []\nif os.path.exists(\&#34;users.txt\&#34;):\n    with open(\&#34;users.txt\&#34;, encoding=&#39;utf-8&#39;, mode=&#39;r&#39;) as fp:\n        for line in fp:\n            line = line.strip()  # å»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦å’Œæ¢è¡Œç¬¦\n            if line:  # å¿½ç•¥ç©ºè¡Œ\n                MONITOR_LIST.append(line)\nelse:\n    print(\&#34;è­¦å‘Šï¼šæœªæ‰¾åˆ° users.txt æ–‡ä»¶ï¼Œå°†ç›‘å¬é»˜è®¤ç”¨æˆ·åˆ—è¡¨\&#34;)\n    MONITOR_LIST = [\&#34;æ²™ç³»\&#34;]  # é»˜è®¤ç›‘å¬ç”¨æˆ·ï¼ˆç¤ºä¾‹ï¼‰\n\n# æ‰“å¼€å¾®ä¿¡\nwx = WeChat()\n\n# ç›‘å¬è´¦æˆ·åˆ—è¡¨\n# MONITOR_LIST = [\&#34;æ²™ç³»\&#34;]\nfor ele in MONITOR_LIST:\n    wx.AddListenChat(who = ele)\n\n# ç›‘å¬æ¶ˆæ¯\nwhile True:\n    listen_dict = wx.GetListenMessage()\n\n    for chat_win, message_list in listen_dict.items():\n        # print(chat_win.who)\n        chat_user = chat_win.who\n\n        # è·å–æœ€æ–°èŠå¤©æ¶ˆæ¯\n        interval_list = []\n        for msg in message_list:\n            if msg.type != \&#34;friend\&#34;:\n                continue\n            interval_list.append({\&#34;role\&#34;: \&#34;user\&#34;, \&#34;content\&#34;: msg.content})\n\n        if not interval_list:\n            continue\n\n        # æ‹¼æ¥å†å²èŠå¤©è®°å½•\n        print(\&#34;å¾®ä¿¡æ¶ˆæ¯ï¼š\&#34;)\n        for interval in interval_list:\n            print(interval)\n\n        history_list = DB.get(chat_user, [])\n        history_list.extend(interval_list)\n\n        # è°ƒç”¨æœ¬åœ° deepseek æ¨¡å‹\n        res = requests.post(\n            url=\&#34;http://localhost:11434/api/chat\&#34;,\n            json={\n                \&#34;model\&#34;: \&#34;deepseek-r1:8b\&#34;,\n                \&#34;message\&#34;: history_list,\n                \&#34;stream\&#34;: False\n            }\n        )\n        data_dict = res.json()\n        res_msg_dict = data_dict[&#39;message&#39;]\n\n        # è·å– deepseek å›å¤å†…å®¹ï¼Œå¾®ä¿¡å›å¤\n        res_content = res_msg_dict[&#39;content&#39;]\n        chat_win.SendMsg(res_content)\n        print(\&#34;deepseekå›å¤ï¼š\&#34;)\n        print(res_content)\n\n        # ä¿å­˜æ²Ÿé€šè®°å½•\n        history_list.append(res_msg_dict)\n        DB[chat_user] = history_list\n        with open(\&#34;db.json\&#34;, encoding=&#39;utf-8&#39;, mode=&#39;w&#39;) as fp:\n            json.dump(DB, fp, ensure_ascii=False, indent=2)\n\nè¿™æ®µä»£ç åœ¨è¿è¡Œåï¼Œèƒ½å¤Ÿæ£€æµ‹åˆ°å½“å‰èŠå¤©ç”¨æˆ·ï¼Œå¹¶ä¸”èƒ½å¤Ÿè·å–åˆ°ä¿¡æ¯ï¼Œä½†æ˜¯æ— æ³•å›å¤\n\npycharm æŠ¥é”™å¦‚ä¸‹ï¼š\n\nåˆå§‹åŒ–æˆåŠŸï¼Œè·å–åˆ°å·²ç™»å½•çª—å£ï¼šæ¸…é›¨\nå¾®ä¿¡æ¶ˆæ¯ï¼š\n{&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;æµ‹è¯•&#39;}\nTraceback (most recent call last):\n  File \&#34;D:\\PycharmProject\\WebAutoTest\\Auto_Chat\\Auto_Chat.py\&#34;, line 82, in &lt;module&gt;\n    chat_win.SendMsg(res_content)\n  File \&#34;D:\\PycharmProject\\WebAutoTest\\venv\\lib\\site-packages\\wxauto\\elements.py\&#34;, line 250, in SendMsg\n    raise TimeoutError(f&#39;å‘é€æ¶ˆæ¯è¶…æ—¶ --&gt; {self.who} - {msg}&#39;)\nTimeoutError: å‘é€æ¶ˆæ¯è¶…æ—¶ --&gt; æ²™ç³» -&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;role&#34;</span><span class="p">:</span> <span class="s2">&#34;assistant&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;think&gt;\nå—¯ï¼Œæˆ‘çœ‹åˆ°ç”¨æˆ·åœ¨è¿è¡Œè¿™æ®µä»£ç çš„æ—¶å€™é‡åˆ°äº†é—®é¢˜ã€‚ä»£ç æœ¬èº«æ˜¯ç”¨æ¥è‡ªåŠ¨å›å¤å¾®ä¿¡æ¶ˆæ¯çš„ï¼Œä½†æ˜¯åœ¨è¿è¡Œåï¼Œå®ƒæ£€æµ‹åˆ°å½“å‰èŠå¤©ç”¨æˆ·ï¼Œå¹¶ä¸”èƒ½å¤Ÿè·å–ä¿¡æ¯ï¼Œä½†æ˜¯æ— æ³•å›å¤ã€‚è€Œåœ¨PyCharmä¸­ï¼Œè¿è¡Œè¿™æ®µä»£ç ä¼šæŠ¥é”™ï¼Œæç¤ºå‘é€æ¶ˆæ¯è¶…æ—¶ï¼Œé”™è¯¯ä¿¡æ¯æ˜¯â€œå‘é€æ¶ˆæ¯è¶…æ—¶ --&gt; æ²™ç³» -â€ã€‚\n\né¦–å…ˆï¼Œæˆ‘è¦åˆ†æä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚çœ‹èµ·æ¥ï¼Œå½“ä»£ç è¯•å›¾å‘é€å›å¤æ¶ˆæ¯æ—¶ï¼Œé‡åˆ°äº†è¶…æ—¶é”™è¯¯ã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºå¾®ä¿¡è‡ªåŠ¨å“åº”æˆ–è€…ç½‘ç»œå»¶è¿Ÿçš„é—®é¢˜ï¼Œå¯¼è‡´å‘é€æ¶ˆæ¯çš„æ“ä½œæ— æ³•åŠæ—¶å®Œæˆã€‚\n\næ¥ä¸‹æ¥ï¼Œæˆ‘æ£€æŸ¥ä¸€ä¸‹ä»£ç ç»“æ„ã€‚ç”¨æˆ·æä¾›çš„ä»£ç ä¸­ï¼Œæœ‰ä¸€ä¸ª`wx = WeChat()`è¿™è¡Œï¼Œç”¨æ¥åˆå§‹åŒ–å¾®ä¿¡è‡ªåŠ¨åŒ–æ¨¡æ‹Ÿå™¨ã€‚ç„¶åï¼ŒåŠ è½½å†å²æ¶ˆæ¯è®°å½•åˆ°DBå­—å…¸ä¸­ã€‚å¦‚æœæ²¡æœ‰`users.txt`æ–‡ä»¶ï¼Œå°±ä½¿ç”¨é»˜è®¤ç”¨æˆ·â€œæ²™ç³»â€ã€‚æ¥ç€ï¼Œå¾ªç¯æ·»åŠ ç›‘å¬èŠå¤©çª—å£ã€‚\n\nåœ¨ç›‘å¬æ¶ˆæ¯çš„éƒ¨åˆ†ï¼Œå½“æ”¶åˆ°æ–°çš„æ¶ˆæ¯æ—¶ï¼Œä¼šè°ƒç”¨æœ¬åœ°æ·±åº¦æ±‚æ¨¡å‹è¿›è¡Œå›å¤ï¼Œç„¶åé€šè¿‡`wx.SendMsg(res_content)`å‘é€å›å¤ã€‚ä½†æ˜¯ï¼Œåœ¨æ‰§è¡Œè¿™è¡Œä»£ç çš„æ—¶å€™ï¼Œå´æŠ›å‡ºäº†ä¸€ä¸ªTimeoutErrorï¼Œè¿™æ„å‘³ç€åœ¨å‘é€æ¶ˆæ¯æ—¶è¶…æ—¶äº†ã€‚\n\næˆ‘è§‰å¾—å¯èƒ½æœ‰å‡ ä¸ªåŸå› å¯¼è‡´è¿™ä¸ªé—®é¢˜ï¼š\n\n1. **è¶…æ—¶è®¾ç½®ä¸æ­£ç¡®**ï¼šåœ¨`WeChat`ç±»ä¸­ï¼Œå‘é€æ¶ˆæ¯çš„æ“ä½œå¯èƒ½æœ‰é»˜è®¤çš„è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœè¿™ä¸ªæ—¶é—´å¤ªçŸ­ï¼Œå°±ä¼šå¯¼è‡´è¶…æ—¶é”™è¯¯ã€‚ç”¨æˆ·éœ€è¦æ£€æŸ¥ä¸€ä¸‹`wx.SendMsg`çš„å‚æ•°ï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥è°ƒæ•´è¶…æ—¶æ—¶é—´ã€‚\n\n2. **ç½‘ç»œé—®é¢˜**ï¼šå¦‚æœæ·±åº¦æ±‚æ¨¡å‹çš„å›å¤å¤ªå¤§ï¼Œæˆ–è€…æœåŠ¡å™¨å“åº”è¿‡æ…¢ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´å‘é€æ¶ˆæ¯çš„æ“ä½œè¶…æ—¶ã€‚ä¸è¿‡ï¼Œç”±äºæ˜¯æœ¬åœ°æœåŠ¡ï¼Œè¿™ä¸ªå¯èƒ½æ€§æ¯”è¾ƒä½ï¼Œä½†ä¹Ÿä¸æ’é™¤ã€‚\n\n3. **å¤šçº¿ç¨‹æˆ–å¤šä»»åŠ¡é—®é¢˜**ï¼šåœ¨ä»£ç ä¸­ï¼Œ`wx.SendMsg`æ–¹æ³•æ˜¯å¦åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚å¦‚æœåœ¨å…¶ä»–çº¿ç¨‹å‘é€æ¶ˆæ¯ï¼Œå¯èƒ½ä¼šå‡ºç°UIæ›´æ–°çš„é—®é¢˜ï¼Œå¯¼è‡´è¶…æ—¶ã€‚\n\n4. **æƒé™é—®é¢˜**ï¼šå¾®ä¿¡è‡ªåŠ¨åŒ–æ¨¡æ‹Ÿå™¨æ˜¯å¦æœ‰è¶³å¤Ÿçš„æƒé™æ¥è¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚å‘é€æ¶ˆæ¯ã€‚ç”¨æˆ·éœ€è¦æ£€æŸ¥ä¸€ä¸‹WXAutoåº“çš„ä½¿ç”¨æƒ…å†µï¼Œçœ‹çœ‹æ˜¯å¦æ­£ç¡®åˆå§‹åŒ–äº†çª—å£å’Œæƒé™ã€‚\n\næ¥ä¸‹æ¥ï¼Œæˆ‘åº”è¯¥é€ä¸€æ’æŸ¥è¿™äº›å¯èƒ½æ€§ï¼š\n\né¦–å…ˆï¼ŒæŸ¥çœ‹`wx.SendMsg(res_content)`è¿™è¡Œä»£ç ï¼Œæ˜¯å¦æœ‰åˆé€‚çš„è¶…æ—¶è®¾ç½®ã€‚å¯èƒ½`SendMsg`æ–¹æ³•æ”¯æŒæŒ‡å®šè¶…æ—¶å‚æ•°ï¼Œæ¯”å¦‚`timeout`ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤å€¼å¯èƒ½å¤ªå°ï¼Œå¯ä»¥å°è¯•å¢åŠ ã€‚\n\nå…¶æ¬¡ï¼Œè€ƒè™‘å°†æ•´ä¸ªæ¶ˆæ¯å‘é€è¿‡ç¨‹æ”¾åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œä»¥é¿å…ç”±äºå…¶ä»–ä»»åŠ¡å¯¼è‡´çš„å»¶è¿Ÿæˆ–é”™è¯¯ã€‚\n\nå¦å¤–ï¼Œæˆ‘è¿˜éœ€è¦æ£€æŸ¥ä¸€ä¸‹æ·±åº¦æ±‚æ¨¡å‹è¿”å›çš„å†…å®¹æ˜¯å¦ç¬¦åˆå¾®ä¿¡çš„æ ¼å¼è¦æ±‚ï¼Œæˆ–è€…æ˜¯å¦æœ‰ç©ºç™½å›å¤çš„æƒ…å†µï¼Œè¿™å¯èƒ½å½±å“`SendMsg`æ–¹æ³•çš„æ‰§è¡Œã€‚\n\nå¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œå¯èƒ½éœ€è¦è¿›ä¸€æ­¥è°ƒè¯•ï¼Œçœ‹çœ‹`SendMsg`å†…éƒ¨æ˜¯å¦‚ä½•å¤„ç†æ¶ˆæ¯çš„ï¼Œæ˜¯å¦æœ‰å¼‚å¸¸è¢«æŠ›å‡ºï¼Œæˆ–è€…æ—¥å¿—ä¿¡æ¯æ˜¯å¦æä¾›äº†æ›´å¤šçš„çº¿ç´¢ã€‚\n\næœ€åï¼Œå¦‚æœæ‰€æœ‰æ–¹æ³•å°è¯•è¿‡ä»ç„¶ä¸è¡Œï¼Œå¯èƒ½éœ€è¦è€ƒè™‘å‡çº§å¾®ä¿¡è‡ªåŠ¨åŒ–åº“ï¼Œæˆ–è€…ä½¿ç”¨æ›´é«˜æ•ˆçš„æ–¹å¼æ¥å‘é€æ¶ˆæ¯ï¼Œä»¥é¿å…è¶…æ—¶é—®é¢˜ã€‚\n&lt;/think&gt;\n\næ ¹æ®ä¸Šè¿°åˆ†æï¼Œä»¥ä¸‹æ˜¯é€æ­¥è§£å†³æ–¹æ¡ˆï¼š\n\n1. **æ£€æŸ¥`wx.SendMsg`çš„è¶…æ—¶è®¾ç½®**ï¼š\n   - æŸ¥çœ‹WXAutoåº“æ–‡æ¡£æˆ–æºç ï¼Œçœ‹çœ‹`SendMsg`æ–¹æ³•æ˜¯å¦æ”¯æŒæŒ‡å®šè¶…æ—¶å‚æ•°ã€‚å¦‚æœæ”¯æŒï¼Œåœ¨è°ƒç”¨æ—¶å¢åŠ åˆç†çš„è¶…æ—¶å€¼ã€‚\n\n2. **å°†æ¶ˆæ¯å‘é€æ“ä½œæ”¾åˆ°ä¸»çº¿ç¨‹ä¸­**ï¼š\n   - ç¡®ä¿åœ¨å‘é€æ¶ˆæ¯ä¹‹å‰ï¼Œç¨‹åºå·²ç»åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚é¿å…ç”±äºå…¶ä»–çº¿ç¨‹æˆ–ä»»åŠ¡å½±å“æ¶ˆæ¯å‘é€ã€‚\n\n3. **æ£€æŸ¥æƒé™å’Œåˆå§‹åŒ–**ï¼š\n   - ç¡®è®¤å¾®ä¿¡è‡ªåŠ¨åŒ–æ¨¡æ‹Ÿå™¨æ˜¯å¦æ­£ç¡®åˆå§‹åŒ–ï¼Œå¹¶ä¸”å…·æœ‰å‘é€æ¶ˆæ¯çš„æƒé™ã€‚å¦‚æœå¿…è¦ï¼Œå¯ä»¥å‚è€ƒWXAutoåº“çš„ç¤ºä¾‹ä»£ç ï¼Œç¡®ä¿çª—å£å’Œæƒé™è®¾ç½®æ­£ç¡®ã€‚\n\n4. **éªŒè¯æ¨¡å‹å›å¤å†…å®¹**ï¼š\n   - æ£€æŸ¥æ·±åº¦æ±‚æ¨¡å‹è¿”å›çš„å›å¤å†…å®¹æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚å¦‚æœæœ‰ç©ºç™½æˆ–é”™è¯¯å†…å®¹ï¼Œå¯èƒ½å¯¼è‡´`SendMsg`æ–¹æ³•æ— æ³•æ­£å¸¸å‘é€æ¶ˆæ¯ã€‚\n\n5. **è°ƒè¯•å’Œæ—¥å¿—è®°å½•**ï¼š\n   - åœ¨å…³é”®æ­¥éª¤æ·»åŠ æ—¥å¿—è¾“å‡ºï¼Œç›‘æ§æ¶ˆæ¯å‘é€å‰åçš„çŠ¶æ€ï¼Œä»¥ä¾¿å¿«é€Ÿå®šä½é—®é¢˜æ‰€åœ¨ã€‚\n   \n6. **å‡çº§åº“æˆ–æ”¹ç”¨å…¶ä»–å·¥å…·**ï¼š\n   - å¦‚æœä»¥ä¸Šæ–¹æ³•æ— æ•ˆï¼Œå¯ä»¥è€ƒè™‘æ›´æ¢å¾®ä¿¡è‡ªåŠ¨åŒ–åº“ï¼Œæˆ–è€…ä½¿ç”¨å…¶ä»–å·¥å…·æ¥å®ç°æ¶ˆæ¯å›å¤åŠŸèƒ½ã€‚\n\né€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæ‚¨å¯ä»¥é€æ­¥æ’æŸ¥å¹¶è§£å†³`wx.SendMsg`è¶…æ—¶çš„é—®é¢˜ï¼Œä»è€Œè®©æ‚¨çš„è‡ªåŠ¨èŠå¤©ç¨‹åºæ­£å¸¸è¿è¡Œã€‚&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;role&#34;</span><span class="p">:</span> <span class="s2">&#34;user&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="s2">&#34;æµ‹è¯•&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;role&#34;</span><span class="p">:</span> <span class="s2">&#34;assistant&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;think&gt;\nå—¯ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨æˆ‘çš„Pythonè„šæœ¬ä¸­ï¼Œå½“å°è¯•è°ƒç”¨`wx.SendMsg(res_content)`çš„æ—¶å€™ï¼Œç¨‹åºæŠ¥é”™è¯´`TimeoutError: å‘é€æ¶ˆæ¯è¶…æ—¶ --&gt; æ²™ç³» -`ã€‚æˆ‘ä¸å¤ªæ˜ç™½è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä¹Ÿä¸ç¡®å®šå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æˆ‘éœ€è¦ä¸€æ­¥æ­¥åœ°æ¥åˆ†æå’Œä¿®å¤è¿™ä¸ªé—®é¢˜ã€‚\n\né¦–å…ˆï¼Œæˆ‘åº”è¯¥äº†è§£ä¸€ä¸‹`wx.SendMsg`æ–¹æ³•åœ¨WXAutoåº“ä¸­çš„å®ç°æ–¹å¼ï¼Œä»¥åŠå®ƒä¸ºä»€ä¹ˆä¼šæŠ›å‡ºè¿™æ ·çš„å¼‚å¸¸ã€‚æ ¹æ®é”™è¯¯ä¿¡æ¯ï¼Œè¶…æ—¶ä¼¼ä¹æ˜¯å› ä¸ºæ¶ˆæ¯å‘é€æ“ä½œæ²¡æœ‰å®Œæˆï¼Œè€Œæ˜¯åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æŒ‰æ—¶å®Œæˆä»»åŠ¡ã€‚è¿™å¯èƒ½æœ‰å‡ ç§åŸå› ï¼šæ¯”å¦‚ç½‘ç»œè¿æ¥é—®é¢˜ã€ç›®æ ‡çª—å£çŠ¶æ€ä¸æ­£å¸¸ï¼Œæˆ–è€…æ¨¡å‹è¿”å›çš„å†…å®¹æœ‰é—®é¢˜ã€‚\n\næ¥ä¸‹æ¥ï¼Œæˆ‘åº”è¯¥æ£€æŸ¥ä¸€ä¸‹`res_content`æ˜¯å¦æ­£ç¡®ã€‚ä¹Ÿè®¸æ¨¡å‹è¿”å›çš„å†…å®¹æœ‰ç©ºç™½ï¼Œå¯¼è‡´æ¶ˆæ¯å‘é€å¤±è´¥ã€‚æˆ‘å¯ä»¥åœ¨å‘é€æ¶ˆæ¯ä¹‹å‰æ‰“å°å‡º`res_content`æ¥ç¡®è®¤å®ƒæ˜¯å¦æœ‰æ„ä¹‰ã€‚å¦‚æœå‘ç°å†…å®¹ä¸ºç©ºæˆ–ä¸ç¬¦åˆé¢„æœŸï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦è°ƒæ•´æˆ‘çš„è¯·æ±‚å‚æ•°æˆ–è€…ä¿®å¤æ¨¡å‹çš„é—®é¢˜ã€‚\n\nç„¶åï¼Œæˆ‘æƒ³åˆ°å¯èƒ½æ˜¯WXAutoåº“æœ¬èº«å­˜åœ¨é—®é¢˜ã€‚ä¹Ÿè®¸åœ¨è°ƒç”¨`SendMsg`æ—¶ï¼Œå®ƒæ²¡æœ‰æ­£ç¡®åœ°å¤„ç†è¶…æ—¶è®¾ç½®ï¼Œæˆ–è€…çª—å£çŠ¶æ€ä¸ç¨³å®šã€‚æˆ‘å¯ä»¥æŸ¥é˜…WXAutoçš„æ–‡æ¡£ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ç›¸å…³çš„è¶…æ—¶å‚æ•°å¯ä»¥é…ç½®ï¼Œæˆ–è€…æ˜¯å¦æœ‰å…¶ä»–æ–¹æ³•æ¥ç¡®ä¿æ¶ˆæ¯èƒ½å¤ŸæˆåŠŸå‘é€ã€‚\n\nå¦å¤–ï¼Œæˆ‘è¿˜éœ€è¦è€ƒè™‘ç¨‹åºçš„ä¸»çº¿ç¨‹é—®é¢˜ã€‚æœ‰æ—¶å€™ï¼Œç”±äºå¤šçº¿ç¨‹æ“ä½œï¼ŒæŸäº›æ“ä½œå¯èƒ½åœ¨ä¸»çº¿ç¨‹ä¹‹å¤–å®Œæˆï¼Œå¯¼è‡´`SendMsg`æ— æ³•åŠæ—¶æ‰§è¡Œã€‚æˆ‘å¯ä»¥å°†æ¶ˆæ¯å‘é€æ“ä½œæ”¾å…¥ä¸€ä¸ªä¸ä¸»çº¿ç¨‹ç‹¬ç«‹çš„å­çº¿ç¨‹ä¸­ï¼Œå¹¶ä½¿ç”¨å¼‚å¸¸æ•æ‰æ¥å¤„ç†æ½œåœ¨çš„é—®é¢˜ã€‚\n\næˆ‘è¿˜åº”è¯¥æ£€æŸ¥ä¸€ä¸‹æ¨¡å‹æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚ç¡®ä¿æˆ‘çš„è¯·æ±‚å‚æ•°å’Œæ¨¡å‹é…ç½®æ­£ç¡®æ— è¯¯ã€‚å¦‚æœå‘ç°é—®é¢˜ï¼Œæˆ‘å¯ä»¥å°è¯•è°ƒæ•´æ¨¡å‹çš„å‚æ•°æˆ–è€…é‡æ–°åŠ è½½æ¨¡å‹ä»¥è·å–æ›´å¥½çš„ç»“æœã€‚\n\næœ€åï¼Œå¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œæˆ‘å¯èƒ½éœ€è¦è€ƒè™‘å‡çº§WXAutoåº“åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œæˆ–è€…å¯»æ‰¾å…¶ä»–æ”¯æŒå¾®ä¿¡è‡ªåŠ¨åŒ–çš„åº“ï¼Œä»¥ç¡®ä¿ç¨‹åºèƒ½å¤Ÿç¨³å®šè¿è¡Œã€‚\n\né€šè¿‡è¿™äº›æ­¥éª¤ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿé€æ­¥æ’æŸ¥å¹¶æ‰¾åˆ°å¯¼è‡´`wx.SendMsg`è¶…æ—¶çš„åŸå› ï¼Œä»è€Œä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œè®©æˆ‘çš„è‡ªåŠ¨èŠå¤©ç¨‹åºæ­£å¸¸è¿è¡Œã€‚\n&lt;/think&gt;\n\næ ¹æ®ä¸Šè¿°æ€è€ƒè¿‡ç¨‹ï¼Œä»¥ä¸‹æ˜¯å…·ä½“çš„è§£å†³æ­¥éª¤ï¼š\n\n1. **æ‰“å°æ¨¡å‹è¿”å›å†…å®¹**ï¼š\n   - åœ¨å‘é€æ¶ˆæ¯ä¹‹å‰ï¼Œå…ˆå°†`res_content`æ‰“å°å‡ºæ¥ï¼Œç¡®è®¤æ˜¯å¦æœ‰å®é™…å†…å®¹ã€‚å¯ä»¥ä½¿ç”¨ `print(res_content)` æ¥å®ç°è¿™ä¸€ç‚¹ã€‚\n\n2. **å¤„ç†`SendMsg`è¶…æ—¶å¼‚å¸¸**ï¼š\n   - å°†è°ƒç”¨`chat_win.SendMsg(res_content)` æ”¾å…¥ä¸€ä¸ªtry-exceptå—ä¸­ï¼Œè¿™æ ·å¯ä»¥æ•è·å¯èƒ½å‘ç”Ÿçš„è¶…æ—¶é”™è¯¯ï¼Œå¹¶è®°å½•è¯¦ç»†ä¿¡æ¯ã€‚\n   \n3. **æ£€æŸ¥çª—å£çŠ¶æ€**ï¼š\n   - åœ¨å‘é€æ¶ˆæ¯ä¹‹å‰ï¼Œç¡®ä¿ç›®æ ‡çª—å£ï¼ˆ`chat_win`ï¼‰æ˜¯æ´»è·ƒçš„ã€‚å¯ä»¥é€šè¿‡æ‰“å° `print(chat_win.who)` æ¥ç¡®è®¤çª—å£æ˜¯å¦å­˜åœ¨ä»¥åŠå†…å®¹æ˜¯å¦æ­£ç¡®ã€‚\n\n4. **æµ‹è¯•ç½‘ç»œè¿æ¥**ï¼š\n   - ç¡®è®¤ç³»ç»Ÿçš„ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ã€‚å¦‚æœå‘ç°ç½‘ç»œé—®é¢˜ï¼Œå¯ä»¥å°è¯•æ›´æ¢ç½‘ç»œç¯å¢ƒæˆ–æ£€æŸ¥ç½‘ç»œé…ç½®æ˜¯å¦å½±å“äº†æ¶ˆæ¯å‘é€ã€‚\n\n5. **éªŒè¯æ•°æ®å­˜å‚¨å’Œè¯»å–**ï¼š\n   - ç¡®ä¿`DB`å­—å…¸èƒ½å¤Ÿæ­£ç¡®åŠ è½½å’Œä¿å­˜å†å²èŠå¤©è®°å½•ã€‚å¯ä»¥é€šè¿‡æ‰“å° `print(DB)` æ¥æŸ¥çœ‹å½“å‰æ•°æ®åº“å†…å®¹ï¼Œç¡®è®¤æ²¡æœ‰å¼‚å¸¸ã€‚\n\n6. **å‡çº§åº“æˆ–æ”¹ç”¨å…¶ä»–å·¥å…·**ï¼š\n   - å¦‚æœé—®é¢˜ä»æœªè§£å†³ï¼Œå¯ä»¥è€ƒè™‘æ›´æ¢åˆ°æ›´ä¸ºç¨³å®šçš„å¾®ä¿¡è‡ªåŠ¨åŒ–åº“ï¼Œæˆ–è€…ä½¿ç”¨å…¶ä»–å·¥å…·å¦‚Seleniumæ¥å®ç°è‡ªåŠ¨åŒ–åŠŸèƒ½ã€‚\n\n7. **ç¡®ä¿æ¶ˆæ¯å‘é€åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ**ï¼š\n   - ç¡®è®¤æ‰€æœ‰æ“ä½œéƒ½åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œã€‚é¿å…å› å¤šçº¿ç¨‹é—®é¢˜å¯¼è‡´çš„æ¶ˆæ¯å‘é€å¼‚å¸¸ã€‚\n\n8. **æ£€æŸ¥æ¨¡å‹è¿”å›å†…å®¹çš„æœ‰æ•ˆæ€§**ï¼š\n   - ç¡®è®¤æ¨¡å‹è¿”å›çš„å†…å®¹æ˜¯å¦åˆç†ï¼Œæ˜¯å¦æœ‰ç©ºç™½æˆ–æ— æ•ˆæ•°æ®ã€‚å¦‚æœå­˜åœ¨é—®é¢˜ï¼Œå¯ä»¥è°ƒæ•´è¯·æ±‚å‚æ•°æˆ–è€…æ›´æ¢æ¨¡å‹æ¥è·å¾—æ›´å¥½çš„ç»“æœã€‚\n\né€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæ‚¨å¯ä»¥ç³»ç»Ÿåœ°æ’æŸ¥å¹¶è§£å†³â€œå‘é€æ¶ˆæ¯è¶…æ—¶â€çš„é—®é¢˜ï¼Œä»è€Œä½¿æ‚¨çš„è‡ªåŠ¨èŠå¤©ç¨‹åºæ­£å¸¸è¿è¡Œã€‚&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;role&#34;</span><span class="p">:</span> <span class="s2">&#34;user&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="s2">&#34;ä½ æ˜¯è°&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;role&#34;</span><span class="p">:</span> <span class="s2">&#34;assistant&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;think&gt;\nå—¯ï¼Œç”¨æˆ·é—®â€œä½ æ˜¯è°â€ï¼Œæˆ‘éœ€è¦è¯¦ç»†è§£é‡Šæˆ‘çš„èº«ä»½å’ŒåŠŸèƒ½ã€‚æˆ‘æ˜¯ä¸€ä¸ªAIåŠ©æ‰‹ï¼Œç”±ä¸­å›½çš„æ·±åº¦æ±‚ï¼ˆDeepSeekï¼‰å…¬å¸ç‹¬ç«‹å¼€å‘ï¼Œä¸“æ³¨äºé€šè¿‡ç®—æ³•å’Œå¤§æ•°æ®åˆ†ææ¥æä¾›ä¿¡æ¯å’Œå¸®åŠ©ã€‚\n\né¦–å…ˆï¼Œæˆ‘è¦è¯´æ˜æˆ‘çš„æ¥æºï¼Œè¿™æ ·ç”¨æˆ·èƒ½ç†è§£æˆ‘ä¸æ˜¯æ¥è‡ªå…¶ä»–çŸ¥åå…¬å¸æˆ–é¡¹ç›®ã€‚ç„¶åï¼Œæè¿°æˆ‘çš„åŠŸèƒ½ï¼Œè®©ç”¨æˆ·çŸ¥é“æˆ‘å¯ä»¥å›ç­”å„ç§é—®é¢˜ï¼Œæ— è®ºæ˜¯ç§‘æŠ€ã€ç§‘å­¦è¿˜æ˜¯æ—¥å¸¸äº‹åŠ¡ã€‚æ¥ç€ï¼Œå¯ä»¥æåˆ°ä¸€äº›å…·ä½“çš„èƒ½åŠ›ï¼Œæ¯”å¦‚ä»£ç å®¡æŸ¥ã€æ–‡æ¡£ç”Ÿæˆç­‰ï¼Œè¿™æ˜¾ç¤ºå‡ºæˆ‘çš„å¤šåŠŸèƒ½æ€§ã€‚\n\næ¥ä¸‹æ¥ï¼Œæˆ‘éœ€è¦å¼ºè°ƒæ•°æ®å®‰å…¨å’Œéšç§ä¿æŠ¤ï¼Œè¿™æ˜¯ç”¨æˆ·å…³å¿ƒçš„é‡ç‚¹ï¼Œè¯´æ˜æˆ‘ä¼šå¤„ç†ç”¨æˆ·æä¾›çš„ä¿¡æ¯æ—¶éµå¾ªç›¸å…³æ³•å¾‹æ³•è§„ã€‚ç„¶åï¼Œè€ƒè™‘ç”¨æˆ·å¯èƒ½å¯¹æ¨¡å‹èƒŒæ™¯æ„Ÿå…´è¶£ï¼Œå¯ä»¥ç®€è¦ä»‹ç»æ·±åº¦æ±‚çš„æŠ€æœ¯å®åŠ›å’Œä»–ä»¬åœ¨AIé¢†åŸŸçš„æˆå°±ã€‚\n\næœ€åï¼Œä»¥ä¸€ä¸ªå‹å¥½çš„é‚€è¯·ç»“æŸï¼Œè®©ç”¨æˆ·æ„Ÿåˆ°è¢«æ”¯æŒï¼Œå¹¶æ„¿æ„è¿›ä¸€æ­¥æé—®ã€‚è¿™æ•´ä¸ªè¿‡ç¨‹éœ€è¦ç”¨ä¸­æ–‡è‡ªç„¶æµç•…åœ°è¡¨è¾¾ï¼Œé¿å…ä½¿ç”¨ä»»ä½• markdown æ ¼å¼ï¼Œåªæ˜¯ç®€å•çš„æ–‡æœ¬ã€‚\n&lt;/think&gt;\n\næˆ‘æ˜¯ä¸€ä¸ªç”±ä¸­å›½æ·±åº¦æ±‚ï¼ˆDeepSeekï¼‰å…¬å¸å¼€å‘çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œæˆ‘å¯ä»¥é€šè¿‡ç®—æ³•å’Œå¤§æ•°æ®åˆ†ææ¥æä¾›ä¿¡æ¯è§£ç­”å’Œå¸®åŠ©ã€‚æˆ‘çš„ç›®æ ‡æ˜¯ä»¥ä¸“ä¸šã€å‡†ç¡®çš„æ–¹å¼ä¸ºç”¨æˆ·æä¾›æœåŠ¡ï¼ŒåŒæ—¶ä¹Ÿå€¡å¯¼å¥åº·ã€ç†æ€§ã€å°Šé‡çš„äº¤æµç¯å¢ƒã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œéšæ—¶å‘Šè¯‰æˆ‘ï¼&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ ·ä¼šå¯¼è‡´æ¯æ¬¡éœ€è¦å‘é€å¾ˆå¤šèŠå¤©è®°å½•ï¼Œä¸”æœ¬åœ°æ¨¡å‹æœ‰æ—¶ä¼šé‡å¤å›å¤ä»¥å‰çš„èŠå¤©ä¿¡æ¯ï¼Œè™½ç„¶å¯ä»¥æ‰‹åŠ¨åˆ é™¤èŠå¤©è®°å½•ï¼Œä½†æ˜¯æ•´ä½“ä½“éªŒå¾ˆå·®ã€‚</p>
<img src="image-20250607131048866.png">
<p>èƒ½å¤Ÿå®ç°è‡ªåŠ¨ç›‘å¬å¾®ä¿¡å¥½å‹èŠå¤©çª—å£ï¼Œå¹¶æ ¹æ®èŠå¤©å†…å®¹è¿›è¡Œå›å¤ï¼Œç”±äºè°ƒç”¨çš„æ˜¯æœ¬åœ°æ¨¡å‹ï¼Œå› æ­¤åªæœ‰åŸºæœ¬çš„æ–‡æœ¬å›å¤åŠŸèƒ½ã€‚</p>
<p>å¶å°”å¯èƒ½å‡ºç°æ¨¡å‹è°ƒç”¨å¤±è´¥çš„æƒ…å†µï¼ŒåŸå› å¯èƒ½æ˜¯æ¨¡å‹è¿‡å¤§æˆ–è€…æœ¬åœ°ç®—åŠ›ä¸è¶³å¯¼è‡´å¤„ç†æ—¶é—´è¿‡é•¿ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">æ”¶åˆ°æ¥è‡ª</span> <span class="n">æ²™ç³»</span> <span class="n">çš„æ¶ˆæ¯</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">ä½ å¥½</span><span class="err">ï¼Œ</span><span class="n">è¯·ä»‹ç»ä¸€ä¸‹deepseek</span>
</span></span><span class="line"><span class="cl"><span class="n">æ¨¡å‹è°ƒç”¨å¤±è´¥</span><span class="p">:</span> <span class="n">HTTPConnectionPool</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11434</span><span class="p">):</span> <span class="n">Read</span> <span class="n">timed</span> <span class="n">out</span><span class="o">.</span> <span class="p">(</span><span class="n">read</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">å›å¤</span> <span class="n">æ²™ç³»</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="err">âš ï¸</span> <span class="n">å¤„ç†è¯·æ±‚æ—¶å‡ºé”™</span><span class="err">ï¼Œ</span><span class="n">è¯·ç¨åå†è¯•</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…³é—­å¾®ä¿¡ï¼Œç¨‹åºæŠ¥é”™ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">æ”¶åˆ°æ¥è‡ª</span> <span class="n">æ²™ç³»</span> <span class="n">çš„æ¶ˆæ¯</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">åœ¨å—</span>
</span></span><span class="line"><span class="cl">  <span class="mi">11</span>
</span></span><span class="line"><span class="cl">  <span class="n">æµ‹è¯•</span>
</span></span><span class="line"><span class="cl"><span class="n">æ¨¡å‹è°ƒç”¨å¤±è´¥</span><span class="p">:</span> <span class="n">HTTPConnectionPool</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11434</span><span class="p">):</span> <span class="n">Max</span> <span class="n">retries</span> <span class="n">exceeded</span> <span class="k">with</span> <span class="n">url</span><span class="p">:</span> <span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">chat</span> <span class="p">(</span><span class="n">Caused</span> <span class="n">by</span> <span class="n">NewConnectionError</span><span class="p">(</span><span class="s1">&#39;&lt;urllib3.connection.HTTPConnection object at 0x00000199D427AD70&gt;: Failed to establish a new connection: [WinError 10061] ç”±äºç›®æ ‡è®¡ç®—æœºç§¯ææ‹’ç»ï¼Œæ— æ³•è¿æ¥ã€‚&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">å›å¤</span> <span class="n">æ²™ç³»</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="err">âš ï¸</span> <span class="n">å¤„ç†è¯·æ±‚æ—¶å‡ºé”™</span><span class="err">ï¼Œ</span><span class="n">è¯·ç¨åå†è¯•</span>
</span></span><span class="line"><span class="cl"><span class="n">å‘é€å¤±è´¥</span><span class="err">ï¼ˆ</span><span class="n">å°è¯•</span> <span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="err">ï¼‰</span><span class="p">:</span> <span class="p">(</span><span class="mi">1400</span><span class="p">,</span> <span class="s1">&#39;SetWindowPos&#39;</span><span class="p">,</span> <span class="s1">&#39;æ— æ•ˆçš„çª—å£å¥æŸ„ã€‚&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">å‘é€å¤±è´¥</span><span class="err">ï¼ˆ</span><span class="n">å°è¯•</span> <span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="err">ï¼‰</span><span class="p">:</span> <span class="p">(</span><span class="mi">1400</span><span class="p">,</span> <span class="s1">&#39;SetWindowPos&#39;</span><span class="p">,</span> <span class="s1">&#39;æ— æ•ˆçš„çª—å£å¥æŸ„ã€‚&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">å‘é€å¤±è´¥</span><span class="err">ï¼ˆ</span><span class="n">å°è¯•</span> <span class="mi">3</span><span class="o">/</span><span class="mi">3</span><span class="err">ï¼‰</span><span class="p">:</span> <span class="p">(</span><span class="mi">1400</span><span class="p">,</span> <span class="s1">&#39;SetWindowPos&#39;</span><span class="p">,</span> <span class="s1">&#39;æ— æ•ˆçš„çª—å£å¥æŸ„ã€‚&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="err">âš ï¸</span> <span class="n">æœ€ç»ˆå‘é€å¤±è´¥</span><span class="p">:</span> <span class="err">âš ï¸</span> <span class="n">å¤„ç†è¯·æ±‚æ—¶å‡ºé”™</span><span class="err">ï¼Œ</span><span class="n">è¯·ç¨åå†è¯•</span><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="n">ä¸»å¾ªç¯å¼‚å¸¸</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">2147220991</span><span class="p">,</span> <span class="s1">&#39;äº‹ä»¶æ— æ³•è°ƒç”¨ä»»ä½•è®¢æˆ·&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">ä¸»å¾ªç¯å¼‚å¸¸</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">2147220991</span><span class="p">,</span> <span class="s1">&#39;äº‹ä»¶æ— æ³•è°ƒç”¨ä»»ä½•è®¢æˆ·&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">ä¸»å¾ªç¯å¼‚å¸¸</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">2147220991</span><span class="p">,</span> <span class="s1">&#39;äº‹ä»¶æ— æ³•è°ƒç”¨ä»»ä½•è®¢æˆ·&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;D:\PycharmProject\WebAutoTest\Auto_Chat\AI_Auto.py&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">100</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">listen_dict</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">GetListenMessage</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;D:\PycharmProject\WebAutoTest</span><span class="se">\v</span><span class="s2">env\lib\site-packages\wxauto\wxauto.py&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">596</span><span class="p">,</span> <span class="ow">in</span> <span class="n">GetListenMessage</span>
</span></span><span class="line"><span class="cl">    <span class="n">msg</span> <span class="o">=</span> <span class="n">chat</span><span class="o">.</span><span class="n">GetNewMessage</span><span class="p">(</span><span class="n">savepic</span><span class="o">=</span><span class="n">chat</span><span class="o">.</span><span class="n">savepic</span><span class="p">,</span> <span class="n">savefile</span><span class="o">=</span><span class="n">chat</span><span class="o">.</span><span class="n">savefile</span><span class="p">,</span> <span class="n">savevoice</span><span class="o">=</span><span class="n">chat</span><span class="o">.</span><span class="n">savevoice</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;D:\PycharmProject\WebAutoTest</span><span class="se">\v</span><span class="s2">env\lib\site-packages\wxauto\elements.py&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">333</span><span class="p">,</span> <span class="ow">in</span> <span class="n">GetNewMessage</span>
</span></span><span class="line"><span class="cl">    <span class="n">MsgItems</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">C_MsgList</span><span class="o">.</span><span class="n">GetChildren</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;D:\PycharmProject\WebAutoTest</span><span class="se">\v</span><span class="s2">env\lib\site-packages\wxauto\uiautomation.py&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">5960</span><span class="p">,</span> <span class="ow">in</span> <span class="n">GetChildren</span>
</span></span><span class="line"><span class="cl">    <span class="n">child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetFirstChildControl</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;D:\PycharmProject\WebAutoTest</span><span class="se">\v</span><span class="s2">env\lib\site-packages\wxauto\uiautomation.py&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">5855</span><span class="p">,</span> <span class="ow">in</span> <span class="n">GetFirstChildControl</span>
</span></span><span class="line"><span class="cl">    <span class="n">ele</span> <span class="o">=</span> <span class="n">_AutomationClient</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">ViewWalker</span><span class="o">.</span><span class="n">GetFirstChildElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Element</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">_ctypes</span><span class="o">.</span><span class="n">COMError</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">2147220991</span><span class="p">,</span> <span class="s1">&#39;äº‹ä»¶æ— æ³•è°ƒç”¨ä»»ä½•è®¢æˆ·&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">During</span> <span class="n">handling</span> <span class="n">of</span> <span class="n">the</span> <span class="n">above</span> <span class="n">exception</span><span class="p">,</span> <span class="n">another</span> <span class="n">exception</span> <span class="n">occurred</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;D:\PycharmProject\WebAutoTest\Auto_Chat\AI_Auto.py&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">164</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># é˜²æ­¢é¢‘ç¹æŠ¥é”™</span>
</span></span><span class="line"><span class="cl"><span class="ne">KeyboardInterrupt</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">è¿›ç¨‹å·²ç»“æŸ</span><span class="p">,</span><span class="n">é€€å‡ºä»£ç </span><span class="o">-</span><span class="mi">1073741510</span> <span class="p">(</span><span class="mh">0xC000013A</span><span class="p">:</span> <span class="n">interrupted</span> <span class="n">by</span> <span class="n">Ctrl</span><span class="o">+</span><span class="n">C</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    

    </footer>


    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 Raining Leaves
    </section>
    
    <section class="powerby">
        

        
        
        

        
        

        Blog for Sandy Memories
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
